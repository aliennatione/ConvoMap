<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>((r) => {
          setTimeout(r);
        })(() => {
  const { markmap, mm } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute("style", "position:absolute;bottom:20px;right:20px");
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"&#x1f9e0; Obiettivi del Linguaggio","children":[{"content":"<strong>Dichiarativo</strong>: l&#x2019;utente descrive <em>cosa</em> ottenere, non <em>come</em>","children":[],"payload":{"tag":"li","lines":"16,17"}},{"content":"<strong>Espressivo e leggibile</strong>: sintassi semplice, YAML-based","children":[],"payload":{"tag":"li","lines":"17,18"}},{"content":"<strong>Idempotente</strong>: l&#x2019;esecuzione multipla non modifica lo stato se &#xe8; gi&#xe0; conforme","children":[],"payload":{"tag":"li","lines":"18,19"}},{"content":"<strong>Componibile/modulare</strong>: riuso di task e definizioni","children":[],"payload":{"tag":"li","lines":"19,20"}},{"content":"<strong>Estensibile</strong>: possibilit&#xe0; di aggiungere moduli o provider","children":[],"payload":{"tag":"li","lines":"20,21"}}],"payload":{"tag":"h2","lines":"15,16"}},{"content":"&#x1f4e6; Nome provvisorio del linguaggio","children":[],"payload":{"tag":"h2","lines":"21,22"}},{"content":"&#x1f4d0; Struttura base di un file (<code>.task.yml</code>)","children":[{"content":"<pre data-lines=\"24,52\"><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;Installazione e configurazione webserver&quot;</span>\n\n<span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web_servers</span>\n<span class=\"hljs-attr\">vars:</span>\n  <span class=\"hljs-attr\">package_name:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">config_file_path:</span> <span class=\"hljs-string\">/etc/nginx/nginx.conf</span>\n\n<span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Installare</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">pacchetto</span> {{ <span class=\"hljs-string\">package_name</span> }}\n    <span class=\"hljs-attr\">package:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ package_name }}</span>&quot;</span>\n      <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Scrivere</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">file</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">configurazione</span>\n    <span class=\"hljs-attr\">file:</span>\n      <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ config_file_path }}</span>&quot;</span>\n      <span class=\"hljs-attr\">content:</span> <span class=\"hljs-string\">|\n        user nginx;\n        worker_processes auto;\n</span>      <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Abilitare</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">avviare</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">servizio</span>\n    <span class=\"hljs-attr\">service:</span>\n      <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n      <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n      <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"24,52"}}],"payload":{"tag":"h2","lines":"23,24"}},{"content":"&#x1f527; Specifica sintattica (bozza)","children":[{"content":"<table data-lines=\"53,61\">\n<thead data-lines=\"53,54\">\n<tr data-lines=\"53,54\">\n<th>Elemento</th>\n<th>Descrizione</th>\n</tr>\n</thead>\n<tbody data-lines=\"55,61\">\n<tr data-lines=\"55,56\">\n<td><code>name</code></td>\n<td>Nome umano leggibile del playbook o task</td>\n</tr>\n<tr data-lines=\"56,57\">\n<td><code>hosts</code></td>\n<td>Target (gruppi o host singoli)</td>\n</tr>\n<tr data-lines=\"57,58\">\n<td><code>vars</code></td>\n<td>Dizionario di variabili</td>\n</tr>\n<tr data-lines=\"58,59\">\n<td><code>tasks</code></td>\n<td>Lista di task da eseguire</td>\n</tr>\n<tr data-lines=\"59,60\">\n<td>Moduli</td>\n<td>Ogni task ha un modulo (<code>package</code>, <code>file</code>, ecc.)</td>\n</tr>\n<tr data-lines=\"60,61\">\n<td>Interpolazione</td>\n<td>Usata con <code>{{ }}</code> per inserire variabili</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"53,61"}}],"payload":{"tag":"h2","lines":"52,53"}},{"content":"&#x1f9e9; Moduli core (ispirati a Ansible)","children":[{"content":"<pre data-lines=\"68,75\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Creare</span> <span class=\"hljs-string\">un</span> <span class=\"hljs-string\">utente</span>\n  <span class=\"hljs-attr\">user:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">deploy</span>\n    <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">/bin/bash</span>\n    <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"68,75"}}],"payload":{"tag":"h2","lines":"61,62"}},{"content":"&#x1f4c1; Organizzazione dei file (struttura progetto)","children":[{"content":"<pre data-lines=\"76,87\"><code data-lines=\"76,87\">project-root<span class=\"hljs-symbol\">/</span>\n&#x251c;&#x2500;&#x2500; inventories<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; dev.yml\n&#x251c;&#x2500;&#x2500; playbooks<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; webserver.task.yml\n&#x251c;&#x2500;&#x2500; modules<span class=\"hljs-symbol\">/</span>           <span class=\"hljs-comment\"># moduli personalizzati</span>\n&#x251c;&#x2500;&#x2500; vars<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; global.yml\n&#x2514;&#x2500;&#x2500; tasklang.yml       <span class=\"hljs-comment\"># config globale</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"76,87"}}],"payload":{"tag":"h2","lines":"75,76"}},{"content":"&#x2696;&#xfe0f; Confronto con Ansible","children":[{"content":"<table data-lines=\"88,96\">\n<thead data-lines=\"88,89\">\n<tr data-lines=\"88,89\">\n<th>Aspetto</th>\n<th>Ansible</th>\n<th>TaskLang</th>\n</tr>\n</thead>\n<tbody data-lines=\"90,96\">\n<tr data-lines=\"90,91\">\n<td>Linguaggio</td>\n<td>YAML</td>\n<td>YAML</td>\n</tr>\n<tr data-lines=\"91,92\">\n<td>Interprete</td>\n<td>Python (<code>ansible-playbook</code>)</td>\n<td>TaskLang CLI (da creare)</td>\n</tr>\n<tr data-lines=\"92,93\">\n<td>Moduli</td>\n<td>Molti e avanzati</td>\n<td>Base + estensibili</td>\n</tr>\n<tr data-lines=\"93,94\">\n<td>Complessit&#xe0;</td>\n<td>Medio/alta</td>\n<td>Media (pi&#xf9; opinato)</td>\n</tr>\n<tr data-lines=\"94,95\">\n<td>Estensibilit&#xe0;</td>\n<td>Alta</td>\n<td>Moderata, ma pi&#xf9; semplice</td>\n</tr>\n<tr data-lines=\"95,96\">\n<td>Verbosit&#xe0;</td>\n<td>Alta</td>\n<td>Minima indispensabile</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"88,96"}}],"payload":{"tag":"h2","lines":"87,88"}},{"content":"&#x1f6e0;&#xfe0f; Possibili sviluppi futuri","children":[{"content":"Supporto HCL (come alternativa a YAML)","children":[],"payload":{"tag":"li","lines":"97,98"}},{"content":"Gestione dello <strong>stato</strong> (alla Terraform/OpenTofu)","children":[],"payload":{"tag":"li","lines":"98,99"}},{"content":"Moduli &quot;provider&quot; per cloud, container, ecc.","children":[],"payload":{"tag":"li","lines":"99,100"}},{"content":"Integrazione con CI/CD","children":[],"payload":{"tag":"li","lines":"100,101"}},{"content":"Creazione di un <strong>parser in Go o Python</strong>","children":[],"payload":{"tag":"li","lines":"101,102"}}],"payload":{"tag":"h2","lines":"96,97"}},{"content":"&#x1f9ea; Prossimi passi","children":[{"content":"1. &#x270d;&#xfe0f; Scrivere una <strong>grammatica formale</strong> del linguaggio (es. in ANTLR)?","children":[],"payload":{"tag":"li","lines":"104,105","listIndex":1}},{"content":"2. &#x2699;&#xfe0f; Bozza di un <strong>parser/esecutore minimale</strong> (es. in Python)?","children":[],"payload":{"tag":"li","lines":"105,106","listIndex":2}},{"content":"3. &#x1f4e6; Definizione delle <strong>specifiche dei moduli</strong> (come si definisce un modulo custom)?","children":[],"payload":{"tag":"li","lines":"106,107","listIndex":3}},{"content":"4. &#x1f9ed; Un manifesto tecnico del linguaggio (per documentazione ufficiale)?<br>\nDimmi tu dove vuoi andare pi&#xf9; in profondit&#xe0;.<br>\nQuindi l&#x2019;obiettivo <strong>non &#xe8; reinventare Ansible</strong>, ma piuttosto:","children":[],"payload":{"tag":"li","lines":"107,110","listIndex":4}}],"payload":{"tag":"h2","lines":"102,103"}},{"content":"&#x1f50d; Scenario aggiornato","children":[{"content":"&#x1f3af; <strong>Obiettivo concreto</strong>","children":[],"payload":{"tag":"h3","lines":"111,112"}}],"payload":{"tag":"h2","lines":"110,111"}},{"content":"&#x1f9f1; Possibili approcci (riutilizzando Ansible)","children":[{"content":"&#x2705; 1. <strong>DSL semplificata che genera YAML Ansible</strong>","children":[{"content":"Esempio di input DSL semplificato:","children":[{"content":"<pre data-lines=\"120,130\"><code class=\"language-yaml\"><span class=\"hljs-attr\">target:</span> <span class=\"hljs-string\">web</span>\n<span class=\"hljs-attr\">packages:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n<span class=\"hljs-attr\">service:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n    <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n    <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"120,130"}},{"content":"<pre data-lines=\"131,149\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">packages</span>\n      <span class=\"hljs-attr\">package:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n      <span class=\"hljs-attr\">loop:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Enable</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">start</span> <span class=\"hljs-string\">nginx</span>\n      <span class=\"hljs-attr\">service:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"131,149"}}],"payload":{"tag":"h4","lines":"119,120"}}],"payload":{"tag":"h3","lines":"114,115"}},{"content":"&#x2705; 2. <strong>&quot;Meta-Dichiarativo&quot; sopra Ansible: moduli preconfezionati</strong>","children":[{"content":"<pre data-lines=\"151,156\"><code class=\"language-yaml\"><span class=\"hljs-attr\">webserver:</span>\n  <span class=\"hljs-attr\">type:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">php_support:</span> <span class=\"hljs-literal\">true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"151,156"}}],"payload":{"tag":"h3","lines":"149,150"}},{"content":"&#x2705; 3. <strong>Wrapper CLI o transpiler</strong>","children":[{"content":"Crei una CLI tipo <code>tasklang deploy webserver.task.yml</code>","children":[],"payload":{"tag":"li","lines":"158,159"}},{"content":"Il file viene tradotto in un playbook Ansible temporaneo + inventory","children":[],"payload":{"tag":"li","lines":"159,160"}},{"content":"Poi eseguito con <code>ansible-playbook</code>","children":[],"payload":{"tag":"li","lines":"160,161"}}],"payload":{"tag":"h3","lines":"157,158"}}],"payload":{"tag":"h2","lines":"113,114"}},{"content":"&#x1f6e0;&#xfe0f; Tecnologie consigliate per implementare questo strato","children":[{"content":"<strong>Python</strong> (per affinit&#xe0; con Ansible + Jinja2 templating)","children":[],"payload":{"tag":"li","lines":"162,163"}},{"content":"<strong>Jinja2</strong> (per generare YAML)","children":[],"payload":{"tag":"li","lines":"163,164"}},{"content":"<strong>ruamel.yaml</strong> o <strong>PyYAML</strong> (per leggere/scrivere YAML programmaticamente)","children":[],"payload":{"tag":"li","lines":"164,165"}},{"content":"<strong>Click o Typer</strong> per una CLI elegante","children":[],"payload":{"tag":"li","lines":"165,166"}}],"payload":{"tag":"h2","lines":"161,162"}},{"content":"&#x1f504; Ciclo di lavoro (utente &#x2192; esecuzione)","children":[{"content":"<pre data-lines=\"167,176\"><code class=\"language-plaintext\">[utente scrive DSL]\n        &#x2193;\n[parser / transpiler Python]\n        &#x2193;\n[playbook.yml + inventory.yml generati]\n        &#x2193;\n[ansible-playbook -i inventory.yml playbook.yml]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"167,176"}}],"payload":{"tag":"h2","lines":"166,167"}},{"content":"&#x1f9ea; Vuoi un esempio gi&#xe0; funzionante?","children":[{"content":"1. &#x2705; Un mini file DSL (semplificato)","children":[],"payload":{"tag":"li","lines":"178,179","listIndex":1}},{"content":"2. &#x2705; Uno script Python che lo converte in YAML Ansible","children":[],"payload":{"tag":"li","lines":"179,180","listIndex":2}},{"content":"3. &#x2705; Output del playbook generato","children":[],"payload":{"tag":"li","lines":"180,181","listIndex":3}},{"content":"4. &#x2705; (facoltativo) Wrapper CLI che esegue tutto<br>\nDimmi solo da quale punto vuoi partire.","children":[],"payload":{"tag":"li","lines":"181,183","listIndex":4}}],"payload":{"tag":"h2","lines":"176,177"}},{"content":"&#x2705; 1. Mini file DSL (semplificato)","children":[{"content":"<pre data-lines=\"185,196\"><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;Setup Web Server&quot;</span>\n<span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web</span>\n<span class=\"hljs-attr\">packages:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n<span class=\"hljs-attr\">service:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"185,196"}}],"payload":{"tag":"h2","lines":"183,184"}},{"content":"&#x2705; 2. Script Python che converte in YAML Ansible","children":[{"content":"<pre data-lines=\"199,261\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> yaml\n<span class=\"hljs-keyword\">import</span> sys\n<span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">convert_dsl_to_ansible</span>(<span class=\"hljs-params\">dsl_path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(dsl_path, <span class=\"hljs-string\">&quot;r&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        dsl = yaml.safe_load(f)\n\n    playbook = [\n        {\n            <span class=\"hljs-string\">&quot;name&quot;</span>: dsl.get(<span class=\"hljs-string\">&quot;name&quot;</span>, <span class=\"hljs-string\">&quot;Generated Playbook&quot;</span>),\n            <span class=\"hljs-string\">&quot;hosts&quot;</span>: dsl[<span class=\"hljs-string\">&quot;hosts&quot;</span>],\n            <span class=\"hljs-string\">&quot;become&quot;</span>: <span class=\"hljs-literal\">True</span>,\n            <span class=\"hljs-string\">&quot;tasks&quot;</span>: []\n        }\n    ]\n\n    tasks = playbook[<span class=\"hljs-number\">0</span>][<span class=\"hljs-string\">&quot;tasks&quot;</span>]\n\n    <span class=\"hljs-comment\"># Handle packages</span>\n    packages = dsl.get(<span class=\"hljs-string\">&quot;packages&quot;</span>, [])\n    <span class=\"hljs-keyword\">if</span> packages:\n        tasks.append({\n            <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;Install packages&quot;</span>,\n            <span class=\"hljs-string\">&quot;package&quot;</span>: {\n                <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;{{ item }}&quot;</span>,\n                <span class=\"hljs-string\">&quot;state&quot;</span>: <span class=\"hljs-string\">&quot;present&quot;</span>\n            },\n            <span class=\"hljs-string\">&quot;loop&quot;</span>: packages\n        })\n\n    <span class=\"hljs-comment\"># Handle service</span>\n    service = dsl.get(<span class=\"hljs-string\">&quot;service&quot;</span>)\n    <span class=\"hljs-keyword\">if</span> service:\n        tasks.append({\n            <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure <span class=\"hljs-subst\">{service[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span> is running&quot;</span>,\n            <span class=\"hljs-string\">&quot;service&quot;</span>: {\n                <span class=\"hljs-string\">&quot;name&quot;</span>: service[<span class=\"hljs-string\">&quot;name&quot;</span>],\n                <span class=\"hljs-string\">&quot;enabled&quot;</span>: service.get(<span class=\"hljs-string\">&quot;enabled&quot;</span>, <span class=\"hljs-literal\">True</span>),\n                <span class=\"hljs-string\">&quot;state&quot;</span>: service.get(<span class=\"hljs-string\">&quot;state&quot;</span>, <span class=\"hljs-string\">&quot;started&quot;</span>)\n            }\n        })\n\n    <span class=\"hljs-keyword\">return</span> playbook\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">save_playbook</span>(<span class=\"hljs-params\">playbook, output_path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(output_path, <span class=\"hljs-string\">&quot;w&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        yaml.dump(playbook, f, sort_keys=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(sys.argv) != <span class=\"hljs-number\">3</span>:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Usage: python dsl_to_ansible.py input.task.yml output_playbook.yml&quot;</span>)\n        sys.exit(<span class=\"hljs-number\">1</span>)\n\n    dsl_file = Path(sys.argv[<span class=\"hljs-number\">1</span>])\n    output_file = Path(sys.argv[<span class=\"hljs-number\">2</span>])\n\n    playbook = convert_dsl_to_ansible(dsl_file)\n    save_playbook(playbook, output_file)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;&#x2705; Playbook generato: <span class=\"hljs-subst\">{output_file}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"199,261"}}],"payload":{"tag":"h2","lines":"197,198"}},{"content":"&#x2705; 3. Output del playbook generato","children":[{"content":"<pre data-lines=\"263,266\"><code class=\"language-bash\">python dsl_to_ansible.py example.task.yml generated_playbook.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"263,266"}},{"content":"<pre data-lines=\"267,286\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Setup</span> <span class=\"hljs-string\">Web</span> <span class=\"hljs-string\">Server</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">packages</span>\n      <span class=\"hljs-attr\">package:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n      <span class=\"hljs-attr\">loop:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Ensure</span> <span class=\"hljs-string\">nginx</span> <span class=\"hljs-string\">is</span> <span class=\"hljs-string\">running</span>\n      <span class=\"hljs-attr\">service:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"267,286"}}],"payload":{"tag":"h2","lines":"261,262"}},{"content":"&#x2705; 4. (Facoltativo) Wrapper CLI per eseguire tutto","children":[{"content":"<pre data-lines=\"289,314\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> subprocess\n<span class=\"hljs-keyword\">from</span> dsl_to_ansible <span class=\"hljs-keyword\">import</span> convert_dsl_to_ansible, save_playbook\n<span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\n<span class=\"hljs-keyword\">import</span> sys\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run_tasklang</span>(<span class=\"hljs-params\">dsl_file</span>):\n    dsl_path = Path(dsl_file)\n    playbook_path = dsl_path.with_suffix(<span class=\"hljs-string\">&quot;.playbook.yml&quot;</span>)\n\n    <span class=\"hljs-comment\"># Converti DSL &#x2192; Ansible playbook</span>\n    playbook = convert_dsl_to_ansible(dsl_path)\n    save_playbook(playbook, playbook_path)\n\n    <span class=\"hljs-comment\"># Esegui con ansible-playbook</span>\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;&#x25b6;&#xfe0f; Eseguendo Ansible su <span class=\"hljs-subst\">{playbook_path}</span>...&quot;</span>)\n    subprocess.run([<span class=\"hljs-string\">&quot;ansible-playbook&quot;</span>, <span class=\"hljs-string\">&quot;-i&quot;</span>, <span class=\"hljs-string\">&quot;inventory.yml&quot;</span>, <span class=\"hljs-built_in\">str</span>(playbook_path)])\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">len</span>(sys.argv) != <span class=\"hljs-number\">2</span>:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Usage: python tasklang.py example.task.yml&quot;</span>)\n        sys.exit(<span class=\"hljs-number\">1</span>)\n\n    run_tasklang(sys.argv[<span class=\"hljs-number\">1</span>])\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"289,314"}}],"payload":{"tag":"h2","lines":"287,288"}},{"content":"&#x2705; Esempio d&#x2019;uso completo","children":[{"content":"<pre data-lines=\"317,321\"><code class=\"language-ini\">[web]\nlocalhost ansible_connection=local\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"317,321"}},{"content":"<pre data-lines=\"322,325\"><code class=\"language-bash\">python tasklang.py example.task.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"322,325"}}],"payload":{"tag":"h2","lines":"314,315"}},{"content":"&#x2705; Risultato","children":[{"content":"Legge un DSL semplificato","children":[],"payload":{"tag":"li","lines":"327,328"}},{"content":"Genera un playbook Ansible","children":[],"payload":{"tag":"li","lines":"328,329"}},{"content":"Lo esegue automaticamente","children":[],"payload":{"tag":"li","lines":"329,330"}}],"payload":{"tag":"h2","lines":"325,326"}},{"content":"&#x1f51c; Prossimi passi (se vuoi evolvere):","children":[{"content":"Aggiungere moduli: <code>user</code>, <code>file</code>, <code>template</code>, ecc.","children":[],"payload":{"tag":"li","lines":"331,332"}},{"content":"Supporto per variabili (<code>vars</code>)","children":[],"payload":{"tag":"li","lines":"332,333"}},{"content":"Import di pi&#xf9; file DSL","children":[],"payload":{"tag":"li","lines":"333,334"}},{"content":"Testing automatico (<code>ansible-lint</code>, <code>--check</code>)","children":[],"payload":{"tag":"li","lines":"334,335"}},{"content":"Gestione dello stato (futuribile, tipo Terraform)","children":[],"payload":{"tag":"li","lines":"335,336"}},{"content":"&#x1f4e6; un pacchetto CLI installabile (<code>pip install tasklang</code>)","children":[],"payload":{"tag":"li","lines":"336,337"}},{"content":"&#x1f30d; una web UI/DSL editor","children":[],"payload":{"tag":"li","lines":"337,338"}},{"content":"&#x1f9ea; supporto Molecule/test automatici<br>\nOppure se vuoi integrare <code>OpenTofu</code> anche.","children":[],"payload":{"tag":"li","lines":"338,340"}}],"payload":{"tag":"h2","lines":"330,331"}},{"content":"&#x2705; Obiettivo","children":[{"content":"1. &#x270d;&#xfe0f; Scrivere/modificare un file DSL semplificato (come <code>example.task.yml</code>)","children":[],"payload":{"tag":"li","lines":"342,343","listIndex":1}},{"content":"2. &#x1f504; Convertirlo in un playbook Ansible","children":[],"payload":{"tag":"li","lines":"343,344","listIndex":2}},{"content":"3. &#x25b6;&#xfe0f; Eseguire il playbook su richiesta, mostrando l&#x2019;output","children":[],"payload":{"tag":"li","lines":"344,345","listIndex":3}}],"payload":{"tag":"h2","lines":"340,341"}},{"content":"&#x1f9f1; Stack Tecnologico consigliato","children":[{"content":"<table data-lines=\"346,352\">\n<thead data-lines=\"346,347\">\n<tr data-lines=\"346,347\">\n<th>Parte</th>\n<th>Scelta proposta</th>\n<th>Motivazione</th>\n</tr>\n</thead>\n<tbody data-lines=\"348,352\">\n<tr data-lines=\"348,349\">\n<td>Frontend</td>\n<td>HTML + JS (oppure React)</td>\n<td>UI editor base, facile da avviare</td>\n</tr>\n<tr data-lines=\"349,350\">\n<td>Backend</td>\n<td>Python (Flask o FastAPI)</td>\n<td>Riutilizzo diretto dello script DSL</td>\n</tr>\n<tr data-lines=\"350,351\">\n<td>UI Editor</td>\n<td><a href=\"https://microsoft.github.io/monaco-editor/\">Monaco Editor</a></td>\n<td>Come in VS Code, ottimo per YAML</td>\n</tr>\n<tr data-lines=\"351,352\">\n<td>Sicurezza</td>\n<td>Solo per uso locale / test</td>\n<td>Non sicuro in ambienti aperti!</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"346,352"}}],"payload":{"tag":"h2","lines":"345,346"}},{"content":"&#x1f4e6; Prototipo base &#x2013; struttura progetto","children":[{"content":"<pre data-lines=\"353,365\"><code data-lines=\"353,365\">tasklang-web<span class=\"hljs-symbol\">/</span>\n&#x251c;&#x2500;&#x2500; app.py                     <span class=\"hljs-comment\"># Flask app</span>\n&#x251c;&#x2500;&#x2500; dsl_to_ansible.py          <span class=\"hljs-comment\"># Script DSL &#x2192; Ansible</span>\n&#x251c;&#x2500;&#x2500; templates<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; index.html             <span class=\"hljs-comment\"># Web UI</span>\n&#x251c;&#x2500;&#x2500; static<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; editor.js              <span class=\"hljs-comment\"># Monaco editor loader</span>\n&#x251c;&#x2500;&#x2500; examples<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; default.task.yml       <span class=\"hljs-comment\"># DSL iniziale</span>\n&#x2514;&#x2500;&#x2500; inventory.yml              <span class=\"hljs-comment\"># Inventory Ansible</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"353,365"}}],"payload":{"tag":"h2","lines":"352,353"}},{"content":"&#x1f527; 1. <code>app.py</code> &#x2013; Backend Flask","children":[{"content":"<pre data-lines=\"366,408\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, request, render_template, jsonify\n<span class=\"hljs-keyword\">from</span> dsl_to_ansible <span class=\"hljs-keyword\">import</span> convert_dsl_to_ansible, save_playbook\n<span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\n<span class=\"hljs-keyword\">import</span> subprocess\n<span class=\"hljs-keyword\">import</span> tempfile\n<span class=\"hljs-keyword\">import</span> yaml\n\napp = Flask(__name__)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>():\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;examples/default.task.yml&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        default_dsl = f.read()\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;index.html&apos;</span>, default_dsl=default_dsl)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/run&apos;</span>, methods=[<span class=\"hljs-string\">&apos;POST&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run_tasklang</span>():\n    dsl_content = request.json[<span class=\"hljs-string\">&apos;dsl&apos;</span>]\n    <span class=\"hljs-keyword\">with</span> tempfile.TemporaryDirectory() <span class=\"hljs-keyword\">as</span> tmpdir:\n        dsl_path = Path(tmpdir) / <span class=\"hljs-string\">&quot;input.task.yml&quot;</span>\n        pb_path = Path(tmpdir) / <span class=\"hljs-string\">&quot;generated_playbook.yml&quot;</span>\n        \n        <span class=\"hljs-comment\"># Scrivi il file DSL temporaneo</span>\n        dsl_path.write_text(dsl_content)\n\n        <span class=\"hljs-comment\"># Converti in Ansible</span>\n        playbook = convert_dsl_to_ansible(dsl_path)\n        save_playbook(playbook, pb_path)\n\n        <span class=\"hljs-comment\"># Esegui ansible-playbook</span>\n        result = subprocess.run(\n            [<span class=\"hljs-string\">&quot;ansible-playbook&quot;</span>, <span class=\"hljs-string\">&quot;-i&quot;</span>, <span class=\"hljs-string\">&quot;inventory.yml&quot;</span>, <span class=\"hljs-built_in\">str</span>(pb_path)],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.STDOUT,\n            text=<span class=\"hljs-literal\">True</span>\n        )\n        <span class=\"hljs-keyword\">return</span> jsonify({<span class=\"hljs-string\">&quot;output&quot;</span>: result.stdout})\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    app.run(debug=<span class=\"hljs-literal\">True</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"366,408"}}],"payload":{"tag":"h2","lines":"365,366"}},{"content":"&#x1f5a5;&#xfe0f; 2. <code>templates/index.html</code> &#x2013; Interfaccia Web","children":[{"content":"<pre data-lines=\"409,454\"><code class=\"language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span> <span class=\"hljs-attr\">lang</span>=<span class=\"hljs-string\">&quot;en&quot;</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>TaskLang Web Editor<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n    <span class=\"hljs-selector-tag\">html</span>, <span class=\"hljs-selector-tag\">body</span> { <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100%</span>; <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">0</span>; }\n    <span class=\"hljs-selector-id\">#editor</span> { <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">70vh</span>; <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>; }\n    <span class=\"hljs-selector-id\">#output</span> { <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">30vh</span>; <span class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\">#111</span>; <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#0f0</span>; <span class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\">1em</span>; <span class=\"hljs-attribute\">font-family</span>: monospace; <span class=\"hljs-attribute\">overflow</span>: auto; }\n    <span class=\"hljs-selector-tag\">button</span> { <span class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\">10px</span> <span class=\"hljs-number\">20px</span>; <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">10px</span>; }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;runDSL()&quot;</span>&gt;</span>&#x25b6;&#xfe0f; Esegui<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;editor&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pre</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;output&quot;</span>&gt;</span>&#x1f504; Output Ansible apparir&#xe0; qui...<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pre</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">let</span> editor;\n    <span class=\"hljs-built_in\">require</span>.<span class=\"hljs-title function_\">config</span>({ <span class=\"hljs-attr\">paths</span>: { <span class=\"hljs-string\">&apos;vs&apos;</span>: <span class=\"hljs-string\">&apos;https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs&apos;</span> }});\n    <span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">&apos;vs/editor/editor.main&apos;</span>], <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n        editor = monaco.<span class=\"hljs-property\">editor</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;editor&apos;</span>), {\n            <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">`{{ default_dsl | safe }}`</span>,\n            <span class=\"hljs-attr\">language</span>: <span class=\"hljs-string\">&apos;yaml&apos;</span>,\n            <span class=\"hljs-attr\">theme</span>: <span class=\"hljs-string\">&apos;vs-dark&apos;</span>,\n        });\n    });\n\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">runDSL</span>(<span class=\"hljs-params\"></span>) {\n        <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&apos;/run&apos;</span>, {\n            <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&apos;POST&apos;</span>,\n            <span class=\"hljs-attr\">headers</span>: { <span class=\"hljs-string\">&apos;Content-Type&apos;</span>: <span class=\"hljs-string\">&apos;application/json&apos;</span> },\n            <span class=\"hljs-attr\">body</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>({ <span class=\"hljs-attr\">dsl</span>: editor.<span class=\"hljs-title function_\">getValue</span>() })\n        })\n        .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">res</span> =&gt;</span> res.<span class=\"hljs-title function_\">json</span>())\n        .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n            <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;output&apos;</span>).<span class=\"hljs-property\">textContent</span> = data.<span class=\"hljs-property\">output</span>;\n        });\n    }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"409,454"}}],"payload":{"tag":"h2","lines":"408,409"}},{"content":"&#x1f4c4; 3. <code>examples/default.task.yml</code> &#x2013; DSL di partenza","children":[{"content":"<pre data-lines=\"455,466\"><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;Setup Web Server&quot;</span>\n<span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web</span>\n<span class=\"hljs-attr\">packages:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n<span class=\"hljs-attr\">service:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"455,466"}}],"payload":{"tag":"h2","lines":"454,455"}},{"content":"&#x1f4c2; 4. <code>inventory.yml</code> &#x2013; per test locali","children":[{"content":"<pre data-lines=\"467,471\"><code class=\"language-ini\">[web]\nlocalhost ansible_connection=local\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"467,471"}}],"payload":{"tag":"h2","lines":"466,467"}},{"content":"&#x25b6;&#xfe0f; Come avviare tutto","children":[{"content":"<pre data-lines=\"473,476\"><code class=\"language-bash\">pip install flask pyyaml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"473,476"}},{"content":"<pre data-lines=\"477,480\"><code class=\"language-bash\">python app.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"477,480"}}],"payload":{"tag":"h2","lines":"471,472"}},{"content":"&#x1f4cc; Note di sicurezza","children":[],"payload":{"tag":"h2","lines":"482,483"}},{"content":"&#x1f51c; Prossimi miglioramenti","children":[{"content":"Validazione della sintassi DSL","children":[],"payload":{"tag":"li","lines":"487,488"}},{"content":"Download dei playbook generati","children":[],"payload":{"tag":"li","lines":"488,489"}},{"content":"Aggiunta di moduli (<code>file</code>, <code>user</code>, ecc.)","children":[],"payload":{"tag":"li","lines":"489,490"}},{"content":"UI pi&#xf9; elegante (con Bootstrap o Tailwind)","children":[],"payload":{"tag":"li","lines":"490,491"}},{"content":"Deploy in container (Docker)<br>\nVuoi che ti crei anche un <strong>contenitore Docker</strong> per far girare tutta questa web UI in un click?","children":[],"payload":{"tag":"li","lines":"491,493"}},{"content":"&#x1f3af; Obiettivo","children":[],"payload":{"tag":"li","lines":"493,494"}},{"content":"&#x1f527; Implementazione","children":[],"payload":{"tag":"li","lines":"494,495"}},{"content":"&#x2705; Codice di esempio","children":[],"payload":{"tag":"li","lines":"495,496"}}],"payload":{"tag":"h2","lines":"486,487"}},{"content":"&#x2705; 1. <strong>Validazione della sintassi DSL</strong>","children":[{"content":"&#x1f3af; Obiettivo:","children":[],"payload":{"tag":"h3","lines":"497,498"}},{"content":"&#x1f527; Come fare:","children":[{"content":"Valutare lo schema atteso (es: campi obbligatori <code>hosts</code>, <code>tasks</code> o <code>packages</code>)","children":[],"payload":{"tag":"li","lines":"500,501"}},{"content":"Usare <strong>PyYAML</strong> per parsing + controlli manuali o usare <strong>Cerberus / Pydantic</strong>","children":[],"payload":{"tag":"li","lines":"501,502"}}],"payload":{"tag":"h3","lines":"499,500"}},{"content":"&#x2705; Codice (da aggiungere in <code>dsl_to_ansible.py</code>):","children":[{"content":"<pre data-lines=\"503,510\"><code class=\"language-python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">validate_dsl</span>(<span class=\"hljs-params\">dsl</span>):\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&apos;hosts&apos;</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> dsl:\n        <span class=\"hljs-keyword\">raise</span> ValueError(<span class=\"hljs-string\">&quot;Campo &apos;hosts&apos; mancante nel DSL&quot;</span>)\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-built_in\">any</span>(k <span class=\"hljs-keyword\">in</span> dsl <span class=\"hljs-keyword\">for</span> k <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-string\">&apos;packages&apos;</span>, <span class=\"hljs-string\">&apos;service&apos;</span>, <span class=\"hljs-string\">&apos;file&apos;</span>, <span class=\"hljs-string\">&apos;user&apos;</span>]):\n        <span class=\"hljs-keyword\">raise</span> ValueError(<span class=\"hljs-string\">&quot;Almeno uno tra &apos;packages&apos;, &apos;service&apos;, &apos;file&apos;, &apos;user&apos; &#xe8; richiesto&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"503,510"}},{"content":"<pre data-lines=\"511,518\"><code class=\"language-python\"><span class=\"hljs-keyword\">try</span>:\n    dsl = yaml.safe_load(dsl_content)\n    validate_dsl(dsl)\n<span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n    <span class=\"hljs-keyword\">return</span> jsonify({<span class=\"hljs-string\">&quot;error&quot;</span>: <span class=\"hljs-built_in\">str</span>(e)}), <span class=\"hljs-number\">400</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"511,518"}}],"payload":{"tag":"h3","lines":"502,503"}}],"payload":{"tag":"h2","lines":"496,497"}},{"content":"&#x2705; 2. <strong>Download dei playbook generati</strong>","children":[{"content":"&#x1f3af; Obiettivo:","children":[],"payload":{"tag":"h3","lines":"519,520"}},{"content":"&#x1f527; Come fare:","children":[{"content":"Generare il file","children":[],"payload":{"tag":"li","lines":"522,523"}},{"content":"Offrire un link per il download (via <code>/download</code>)","children":[],"payload":{"tag":"li","lines":"523,524"}}],"payload":{"tag":"h3","lines":"521,522"}},{"content":"&#x2705; Backend (<code>app.py</code>):","children":[{"content":"<pre data-lines=\"525,540\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> send_file\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/download&apos;</span>, methods=[<span class=\"hljs-string\">&apos;POST&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">download_playbook</span>():\n    dsl_content = request.json[<span class=\"hljs-string\">&apos;dsl&apos;</span>]\n    <span class=\"hljs-keyword\">with</span> tempfile.NamedTemporaryFile(mode=<span class=\"hljs-string\">&apos;w+&apos;</span>, delete=<span class=\"hljs-literal\">False</span>, suffix=<span class=\"hljs-string\">&apos;.yml&apos;</span>) <span class=\"hljs-keyword\">as</span> tmp:\n        dsl_path = Path(tmp.name)\n        pb_path = dsl_path.with_suffix(<span class=\"hljs-string\">&apos;.playbook.yml&apos;</span>)\n        dsl = yaml.safe_load(dsl_content)\n        validate_dsl(dsl)\n        playbook = convert_dsl_to_ansible(dsl)\n        save_playbook(playbook, pb_path)\n        <span class=\"hljs-keyword\">return</span> send_file(pb_path, as_attachment=<span class=\"hljs-literal\">True</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"525,540"}}],"payload":{"tag":"h3","lines":"524,525"}},{"content":"&#x2705; Frontend (<code>index.html</code>):","children":[{"content":"<pre data-lines=\"541,544\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;downloadPlaybook()&quot;</span>&gt;</span>&#x1f4be; Scarica Playbook<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"541,544"}},{"content":"<pre data-lines=\"544,563\"><code class=\"language-javascript\"><span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">downloadPlaybook</span>(<span class=\"hljs-params\"></span>) {\n  <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&apos;/download&apos;</span>, {\n    <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&apos;POST&apos;</span>,\n    <span class=\"hljs-attr\">headers</span>: { <span class=\"hljs-string\">&apos;Content-Type&apos;</span>: <span class=\"hljs-string\">&apos;application/json&apos;</span> },\n    <span class=\"hljs-attr\">body</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>({ <span class=\"hljs-attr\">dsl</span>: editor.<span class=\"hljs-title function_\">getValue</span>() })\n  })\n  .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">res</span> =&gt;</span> res.<span class=\"hljs-title function_\">blob</span>())\n  .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">blob</span> =&gt;</span> {\n    <span class=\"hljs-keyword\">const</span> url = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">URL</span>.<span class=\"hljs-title function_\">createObjectURL</span>(blob);\n    <span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&apos;a&apos;</span>);\n    a.<span class=\"hljs-property\">href</span> = url;\n    a.<span class=\"hljs-property\">download</span> = <span class=\"hljs-string\">&apos;generated_playbook.yml&apos;</span>;\n    <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(a);\n    a.<span class=\"hljs-title function_\">click</span>();\n    a.<span class=\"hljs-title function_\">remove</span>();\n  });\n}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"544,563"}}],"payload":{"tag":"h3","lines":"540,541"}}],"payload":{"tag":"h2","lines":"518,519"}},{"content":"&#x2705; 3. <strong>Aggiunta di moduli (<code>file</code>, <code>user</code>, ecc.)</strong>","children":[{"content":"&#x1f3af; Obiettivo:","children":[],"payload":{"tag":"h3","lines":"564,565"}},{"content":"&#x2705; DSL esempio:","children":[{"content":"<pre data-lines=\"567,577\"><code class=\"language-yaml\"><span class=\"hljs-attr\">file:</span>\n  <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">/tmp/demo.txt</span>\n  <span class=\"hljs-attr\">content:</span> <span class=\"hljs-string\">&quot;ciao mondo&quot;</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n\n<span class=\"hljs-attr\">user:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;deploy&quot;</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"567,577"}}],"payload":{"tag":"h3","lines":"566,567"}},{"content":"&#x2705; In <code>dsl_to_ansible.py</code>:","children":[{"content":"<pre data-lines=\"578,601\"><code class=\"language-python\"><span class=\"hljs-comment\"># Gestione modulo file</span>\nfile_def = dsl.get(<span class=\"hljs-string\">&quot;file&quot;</span>)\n<span class=\"hljs-keyword\">if</span> file_def:\n    tasks.append({\n        <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure file <span class=\"hljs-subst\">{file_def[<span class=\"hljs-string\">&apos;path&apos;</span>]}</span> exists&quot;</span>,\n        <span class=\"hljs-string\">&quot;copy&quot;</span>: {\n            <span class=\"hljs-string\">&quot;dest&quot;</span>: file_def[<span class=\"hljs-string\">&quot;path&quot;</span>],\n            <span class=\"hljs-string\">&quot;content&quot;</span>: file_def.get(<span class=\"hljs-string\">&quot;content&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>),\n        }\n    })\n\n<span class=\"hljs-comment\"># Gestione modulo user</span>\nuser_def = dsl.get(<span class=\"hljs-string\">&quot;user&quot;</span>)\n<span class=\"hljs-keyword\">if</span> user_def:\n    tasks.append({\n        <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure user <span class=\"hljs-subst\">{user_def[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span> exists&quot;</span>,\n        <span class=\"hljs-string\">&quot;user&quot;</span>: {\n            <span class=\"hljs-string\">&quot;name&quot;</span>: user_def[<span class=\"hljs-string\">&quot;name&quot;</span>],\n            <span class=\"hljs-string\">&quot;state&quot;</span>: user_def.get(<span class=\"hljs-string\">&quot;state&quot;</span>, <span class=\"hljs-string\">&quot;present&quot;</span>)\n        }\n    })\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"578,601"}}],"payload":{"tag":"h3","lines":"577,578"}}],"payload":{"tag":"h2","lines":"563,564"}},{"content":"&#x2705; 4. <strong>UI pi&#xf9; elegante (con Bootstrap o Tailwind CSS)</strong>","children":[{"content":"&#x1f3af; Obiettivo:","children":[],"payload":{"tag":"h3","lines":"602,603"}},{"content":"&#x1f527; Bootstrap 5 (pi&#xf9; semplice da integrare via CDN)","children":[],"payload":{"tag":"h3","lines":"604,605"}},{"content":"&#x2705; In <code>index.html</code>, aggiungi nel <code>&lt;head&gt;</code>:","children":[{"content":"<pre data-lines=\"606,609\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css&quot;</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"606,609"}},{"content":"<pre data-lines=\"610,622\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container mt-4&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mb-4&quot;</span>&gt;</span>TaskLang Web Editor<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mb-3&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-success me-2&quot;</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;runDSL()&quot;</span>&gt;</span>&#x25b6;&#xfe0f; Esegui<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-primary&quot;</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;downloadPlaybook()&quot;</span>&gt;</span>&#x1f4be; Scarica Playbook<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;editor&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;border rounded&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;height: 60vh;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mt-4&quot;</span>&gt;</span>Output:<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pre</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;output&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;bg-dark text-success p-3 rounded&quot;</span> <span class=\"hljs-attr\">style</span>=<span class=\"hljs-string\">&quot;height: 25vh; overflow-y: auto;&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pre</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"610,622"}}],"payload":{"tag":"h3","lines":"605,606"}}],"payload":{"tag":"h2","lines":"601,602"}},{"content":"&#x2705; 5. <strong>Deploy in container (Docker)</strong>","children":[{"content":"&#x1f3af; Obiettivo:","children":[],"payload":{"tag":"h3","lines":"623,624"}},{"content":"&#x2705; <code>Dockerfile</code>","children":[{"content":"<pre data-lines=\"626,639\"><code class=\"language-Dockerfile\"><span class=\"hljs-keyword\">FROM</span> python:<span class=\"hljs-number\">3.10</span>-slim\n\n<span class=\"hljs-keyword\">WORKDIR</span><span class=\"language-bash\"> /app</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> . /app</span>\n\n<span class=\"hljs-keyword\">RUN</span><span class=\"language-bash\"> pip install flask pyyaml ansible</span>\n\n<span class=\"hljs-keyword\">EXPOSE</span> <span class=\"hljs-number\">5000</span>\n\n<span class=\"hljs-keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"hljs-string\">&quot;python&quot;</span>, <span class=\"hljs-string\">&quot;app.py&quot;</span>]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"626,639"}}],"payload":{"tag":"h3","lines":"625,626"}},{"content":"&#x2705; <code>docker-compose.yml</code> (opzionale)","children":[{"content":"<pre data-lines=\"640,650\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&apos;3&apos;</span>\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">tasklang:</span>\n    <span class=\"hljs-attr\">build:</span> <span class=\"hljs-string\">.</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;5000:5000&quot;</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">.:/app</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"640,650"}}],"payload":{"tag":"h3","lines":"639,640"}},{"content":"&#x2705; Avvio","children":[{"content":"<pre data-lines=\"651,655\"><code class=\"language-bash\">docker build -t tasklang .\ndocker run -p 5000:5000 tasklang\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"651,655"}},{"content":"<pre data-lines=\"656,659\"><code class=\"language-bash\">docker-compose up\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"656,659"}}],"payload":{"tag":"h3","lines":"650,651"}}],"payload":{"tag":"h2","lines":"622,623"}},{"content":"&#x1f3c1; Risultato finale","children":[{"content":"&#x2705; Web editor dichiarativo","children":[],"payload":{"tag":"li","lines":"661,662"}},{"content":"&#x2705; Conversione automatica in YAML Ansible","children":[],"payload":{"tag":"li","lines":"662,663"}},{"content":"&#x2705; Esecuzione e output live","children":[],"payload":{"tag":"li","lines":"663,664"}},{"content":"&#x2705; Download del playbook","children":[],"payload":{"tag":"li","lines":"664,665"}},{"content":"&#x2705; UI responsive ed elegante","children":[],"payload":{"tag":"li","lines":"665,666"}},{"content":"&#x2705; Deploy con Docker<br>\nIl risultato &#xe8; una webapp con editor dichiarativo semplificato che genera ed esegue playbook <strong>Ansible</strong> sfruttando una DSL YAML minimale, il tutto con un&#x2019;interfaccia elegante e un sistema di conversione + validazione + esecuzione backend.","children":[],"payload":{"tag":"li","lines":"666,668"}}],"payload":{"tag":"h2","lines":"659,660"}},{"content":"&#x1f5c2;&#xfe0f; Struttura del progetto","children":[{"content":"<pre data-lines=\"669,687\"><code data-lines=\"669,687\">tasklang-web/\n&#x251c;&#x2500;&#x2500; app<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; dsl_to_ansible<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; requirements<span class=\"hljs-selector-class\">.txt</span>\n&#x251c;&#x2500;&#x2500; Dockerfile\n&#x251c;&#x2500;&#x2500; docker-compose<span class=\"hljs-selector-class\">.yml</span>\n&#x251c;&#x2500;&#x2500; <span class=\"hljs-selector-class\">.gitignore</span>\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x251c;&#x2500;&#x2500; README<span class=\"hljs-selector-class\">.md</span>\n&#x251c;&#x2500;&#x2500; inventory<span class=\"hljs-selector-class\">.yml</span>\n&#x251c;&#x2500;&#x2500; examples/\n&#x2502;   &#x2514;&#x2500;&#x2500; default<span class=\"hljs-selector-class\">.task</span><span class=\"hljs-selector-class\">.yml</span>\n&#x251c;&#x2500;&#x2500; templates/\n&#x2502;   &#x2514;&#x2500;&#x2500; index<span class=\"hljs-selector-class\">.html</span>\n&#x2514;&#x2500;&#x2500; static/\n    &#x2514;&#x2500;&#x2500; editor<span class=\"hljs-selector-class\">.js</span> (opzionale, usa CDN nel template)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"669,687"}}],"payload":{"tag":"h2","lines":"668,669"}},{"content":"&#x1f4c4; <code>README.md</code>","children":[{"content":"2. Crea ambiente virtuale (opzionale)","children":[{"content":"<pre data-lines=\"728,732\"><code class=\"language-bash\">python -m venv .venv\n<span class=\"hljs-built_in\">source</span> .venv/bin/activate\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"728,732"}}],"payload":{"tag":"h3","lines":"726,727"}},{"content":"3. Installa le dipendenze","children":[{"content":"<pre data-lines=\"735,738\"><code class=\"language-bash\">pip install -r requirements.txt\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"735,738"}}],"payload":{"tag":"h3","lines":"733,734"}},{"content":"4. Avvia l&apos;applicazione","children":[{"content":"<pre data-lines=\"741,744\"><code class=\"language-bash\">python app.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"741,744"}}],"payload":{"tag":"h3","lines":"739,740"}}],"payload":{"tag":"h2","lines":"687,688"}},{"content":"&#x1f433; Esecuzione con Docker","children":[{"content":"<pre data-lines=\"751,755\"><code class=\"language-bash\">docker build -t tasklang .\ndocker run -p 5000:5000 tasklang\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"751,755"}},{"content":"<pre data-lines=\"758,761\"><code class=\"language-bash\">docker-compose up\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"758,761"}}],"payload":{"tag":"h2","lines":"749,750"}},{"content":"&#x1f4a1; Esempio DSL (<code>examples/default.task.yml</code>)","children":[{"content":"<pre data-lines=\"766,784\"><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;Setup Web Server&quot;</span>\n<span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web</span>\n<span class=\"hljs-attr\">packages:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n<span class=\"hljs-attr\">service:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n<span class=\"hljs-attr\">user:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">deploy</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n<span class=\"hljs-attr\">file:</span>\n  <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">/tmp/hello.txt</span>\n  <span class=\"hljs-attr\">content:</span> <span class=\"hljs-string\">&quot;Ciao dal TaskLang!&quot;</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"766,784"}}],"payload":{"tag":"h2","lines":"764,765"}},{"content":"&#x1f4dd; DSL supportata","children":[{"content":"<table data-lines=\"789,796\">\n<thead data-lines=\"789,790\">\n<tr data-lines=\"789,790\">\n<th>Componente</th>\n<th>Descrizione</th>\n</tr>\n</thead>\n<tbody data-lines=\"791,796\">\n<tr data-lines=\"791,792\">\n<td><code>hosts</code></td>\n<td>Target host/group</td>\n</tr>\n<tr data-lines=\"792,793\">\n<td><code>packages</code></td>\n<td>Elenco pacchetti da installare</td>\n</tr>\n<tr data-lines=\"793,794\">\n<td><code>service</code></td>\n<td>Avvio/abilitazione servizio</td>\n</tr>\n<tr data-lines=\"794,795\">\n<td><code>user</code></td>\n<td>Creazione utente di sistema</td>\n</tr>\n<tr data-lines=\"795,796\">\n<td><code>file</code></td>\n<td>Creazione file con contenuto</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"789,796"}}],"payload":{"tag":"h2","lines":"787,788"}},{"content":"&#x1f4c1; Inventory di esempio","children":[{"content":"<pre data-lines=\"803,807\"><code class=\"language-ini\">[web]\nlocalhost ansible_connection=local\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"803,807"}}],"payload":{"tag":"h2","lines":"799,800"}},{"content":"&#x1f4e4; Funzionalit&#xe0; Web","children":[{"content":"&#x270d;&#xfe0f; Editor DSL con sintassi evidenziata (Monaco)","children":[],"payload":{"tag":"li","lines":"812,813"}},{"content":"&#x2705; Validazione sintattica DSL","children":[],"payload":{"tag":"li","lines":"813,814"}},{"content":"&#x1f504; Conversione in Ansible YAML","children":[],"payload":{"tag":"li","lines":"814,815"}},{"content":"&#x25b6;&#xfe0f; Esecuzione playbook con output live","children":[],"payload":{"tag":"li","lines":"815,816"}},{"content":"&#x1f4be; Download playbook generato","children":[],"payload":{"tag":"li","lines":"816,818"}}],"payload":{"tag":"h2","lines":"810,811"}},{"content":"&#x1f9ea; Test","children":[{"content":"<pre data-lines=\"824,829\"><code class=\"language-bash\">curl -X POST http://localhost:5000/run \\\n     -H <span class=\"hljs-string\">&quot;Content-Type: application/json&quot;</span> \\\n     -d @tests/test_payload.json\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"824,829"}}],"payload":{"tag":"h2","lines":"820,821"}},{"content":"&#x1f4c4; Licenza","children":[],"payload":{"tag":"h2","lines":"832,833"}},{"content":"&#x1f91d; Contribuire","children":[{"content":"<pre data-lines=\"842,845\"><code data-lines=\"842,845\">## &#x1f4c1; `requirements.txt`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"842,845"}},{"content":"<pre data-lines=\"850,920\"><code data-lines=\"850,920\"><span class=\"hljs-comment\">## &#x1f40d; `dsl_to_ansible.py`</span>\n```python\n<span class=\"hljs-keyword\">import</span> yaml\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">validate_dsl</span>(<span class=\"hljs-params\">dsl</span>):\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-string\">&apos;hosts&apos;</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-keyword\">in</span> dsl:\n        <span class=\"hljs-keyword\">raise</span> ValueError(<span class=\"hljs-string\">&quot;Campo &apos;hosts&apos; mancante nel DSL&quot;</span>)\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-built_in\">any</span>(k <span class=\"hljs-keyword\">in</span> dsl <span class=\"hljs-keyword\">for</span> k <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-string\">&apos;packages&apos;</span>, <span class=\"hljs-string\">&apos;service&apos;</span>, <span class=\"hljs-string\">&apos;file&apos;</span>, <span class=\"hljs-string\">&apos;user&apos;</span>]):\n        <span class=\"hljs-keyword\">raise</span> ValueError(<span class=\"hljs-string\">&quot;Il DSL deve contenere almeno uno tra: &apos;packages&apos;, &apos;service&apos;, &apos;file&apos;, &apos;user&apos;&quot;</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">convert_dsl_to_ansible</span>(<span class=\"hljs-params\">dsl_path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(dsl_path, <span class=\"hljs-string\">&quot;r&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        dsl = yaml.safe_load(f)\n\n    validate_dsl(dsl)\n\n    playbook = [{\n        <span class=\"hljs-string\">&quot;name&quot;</span>: dsl.get(<span class=\"hljs-string\">&quot;name&quot;</span>, <span class=\"hljs-string\">&quot;Generated Playbook&quot;</span>),\n        <span class=\"hljs-string\">&quot;hosts&quot;</span>: dsl[<span class=\"hljs-string\">&quot;hosts&quot;</span>],\n        <span class=\"hljs-string\">&quot;become&quot;</span>: <span class=\"hljs-literal\">True</span>,\n        <span class=\"hljs-string\">&quot;tasks&quot;</span>: []\n    }]\n\n    tasks = playbook[<span class=\"hljs-number\">0</span>][<span class=\"hljs-string\">&quot;tasks&quot;</span>]\n\n    <span class=\"hljs-keyword\">if</span> packages := dsl.get(<span class=\"hljs-string\">&quot;packages&quot;</span>):\n        tasks.append({\n            <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;Install packages&quot;</span>,\n            <span class=\"hljs-string\">&quot;package&quot;</span>: {\n                <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">&quot;{{ item }}&quot;</span>,\n                <span class=\"hljs-string\">&quot;state&quot;</span>: <span class=\"hljs-string\">&quot;present&quot;</span>\n            },\n            <span class=\"hljs-string\">&quot;loop&quot;</span>: packages\n        })\n\n    <span class=\"hljs-keyword\">if</span> service := dsl.get(<span class=\"hljs-string\">&quot;service&quot;</span>):\n        tasks.append({\n            <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure <span class=\"hljs-subst\">{service[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span> is running&quot;</span>,\n            <span class=\"hljs-string\">&quot;service&quot;</span>: {\n                <span class=\"hljs-string\">&quot;name&quot;</span>: service[<span class=\"hljs-string\">&quot;name&quot;</span>],\n                <span class=\"hljs-string\">&quot;enabled&quot;</span>: service.get(<span class=\"hljs-string\">&quot;enabled&quot;</span>, <span class=\"hljs-literal\">True</span>),\n                <span class=\"hljs-string\">&quot;state&quot;</span>: service.get(<span class=\"hljs-string\">&quot;state&quot;</span>, <span class=\"hljs-string\">&quot;started&quot;</span>)\n            }\n        })\n\n    <span class=\"hljs-keyword\">if</span> user := dsl.get(<span class=\"hljs-string\">&quot;user&quot;</span>):\n        tasks.append({\n            <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure user <span class=\"hljs-subst\">{user[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span> exists&quot;</span>,\n            <span class=\"hljs-string\">&quot;user&quot;</span>: {\n                <span class=\"hljs-string\">&quot;name&quot;</span>: user[<span class=\"hljs-string\">&quot;name&quot;</span>],\n                <span class=\"hljs-string\">&quot;state&quot;</span>: user.get(<span class=\"hljs-string\">&quot;state&quot;</span>, <span class=\"hljs-string\">&quot;present&quot;</span>)\n            }\n        })\n\n    <span class=\"hljs-keyword\">if</span> file := dsl.get(<span class=\"hljs-string\">&quot;file&quot;</span>):\n        tasks.append({\n            <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure file <span class=\"hljs-subst\">{file[<span class=\"hljs-string\">&apos;path&apos;</span>]}</span> exists&quot;</span>,\n            <span class=\"hljs-string\">&quot;copy&quot;</span>: {\n                <span class=\"hljs-string\">&quot;dest&quot;</span>: file[<span class=\"hljs-string\">&quot;path&quot;</span>],\n                <span class=\"hljs-string\">&quot;content&quot;</span>: file.get(<span class=\"hljs-string\">&quot;content&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>)\n            }\n        })\n\n    <span class=\"hljs-keyword\">return</span> playbook\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">save_playbook</span>(<span class=\"hljs-params\">playbook, output_path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(output_path, <span class=\"hljs-string\">&quot;w&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        yaml.dump(playbook, f, sort_keys=<span class=\"hljs-literal\">False</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"850,920"}}],"payload":{"tag":"h2","lines":"838,839"}},{"content":"&#x1f9e9; <code>app.py</code> &#x2013; Flask Webserver","children":[{"content":"<pre data-lines=\"921,978\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, request, render_template, jsonify, send_file\n<span class=\"hljs-keyword\">from</span> dsl_to_ansible <span class=\"hljs-keyword\">import</span> convert_dsl_to_ansible, save_playbook\n<span class=\"hljs-keyword\">from</span> pathlib <span class=\"hljs-keyword\">import</span> Path\n<span class=\"hljs-keyword\">import</span> subprocess\n<span class=\"hljs-keyword\">import</span> tempfile\n<span class=\"hljs-keyword\">import</span> yaml\n\napp = Flask(__name__)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>():\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(<span class=\"hljs-string\">&apos;examples/default.task.yml&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        default_dsl = f.read()\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&apos;index.html&apos;</span>, default_dsl=default_dsl)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/run&apos;</span>, methods=[<span class=\"hljs-string\">&apos;POST&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run_tasklang</span>():\n    dsl_content = request.json[<span class=\"hljs-string\">&apos;dsl&apos;</span>]\n    <span class=\"hljs-keyword\">try</span>:\n        dsl = yaml.safe_load(dsl_content)\n    <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n        <span class=\"hljs-keyword\">return</span> jsonify({<span class=\"hljs-string\">&quot;error&quot;</span>: <span class=\"hljs-string\">f&quot;Errore parsing YAML: <span class=\"hljs-subst\">{e}</span>&quot;</span>}), <span class=\"hljs-number\">400</span>\n\n    <span class=\"hljs-keyword\">with</span> tempfile.TemporaryDirectory() <span class=\"hljs-keyword\">as</span> tmpdir:\n        dsl_path = Path(tmpdir) / <span class=\"hljs-string\">&quot;input.task.yml&quot;</span>\n        pb_path = Path(tmpdir) / <span class=\"hljs-string\">&quot;generated_playbook.yml&quot;</span>\n        dsl_path.write_text(dsl_content)\n        <span class=\"hljs-keyword\">try</span>:\n            playbook = convert_dsl_to_ansible(dsl_path)\n            save_playbook(playbook, pb_path)\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-keyword\">return</span> jsonify({<span class=\"hljs-string\">&quot;error&quot;</span>: <span class=\"hljs-built_in\">str</span>(e)}), <span class=\"hljs-number\">400</span>\n\n        result = subprocess.run(\n            [<span class=\"hljs-string\">&quot;ansible-playbook&quot;</span>, <span class=\"hljs-string\">&quot;-i&quot;</span>, <span class=\"hljs-string\">&quot;inventory.yml&quot;</span>, <span class=\"hljs-built_in\">str</span>(pb_path)],\n            stdout=subprocess.PIPE,\n            stderr=subprocess.STDOUT,\n            text=<span class=\"hljs-literal\">True</span>\n        )\n        <span class=\"hljs-keyword\">return</span> jsonify({<span class=\"hljs-string\">&quot;output&quot;</span>: result.stdout})\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/download&apos;</span>, methods=[<span class=\"hljs-string\">&apos;POST&apos;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">download_playbook</span>():\n    dsl_content = request.json[<span class=\"hljs-string\">&apos;dsl&apos;</span>]\n    <span class=\"hljs-keyword\">with</span> tempfile.TemporaryDirectory() <span class=\"hljs-keyword\">as</span> tmpdir:\n        dsl_path = Path(tmpdir) / <span class=\"hljs-string\">&quot;input.task.yml&quot;</span>\n        pb_path = dsl_path.with_suffix(<span class=\"hljs-string\">&apos;.playbook.yml&apos;</span>)\n        dsl_path.write_text(dsl_content)\n        dsl = yaml.safe_load(dsl_content)\n        playbook = convert_dsl_to_ansible(dsl_path)\n        save_playbook(playbook, pb_path)\n        <span class=\"hljs-keyword\">return</span> send_file(pb_path, as_attachment=<span class=\"hljs-literal\">True</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    app.run(debug=<span class=\"hljs-literal\">True</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"921,978"}}],"payload":{"tag":"h2","lines":"920,921"}},{"content":"&#x1f310; <code>templates/index.html</code> (con Bootstrap + Monaco)","children":[{"content":"<pre data-lines=\"979,1076\"><code class=\"language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">charset</span>=<span class=\"hljs-string\">&quot;UTF-8&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>TaskLang Web Editor<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">meta</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;viewport&quot;</span> <span class=\"hljs-attr\">content</span>=<span class=\"hljs-string\">&quot;width=device-width, initial-scale=1&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">link</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css&quot;</span> <span class=\"hljs-attr\">rel</span>=<span class=\"hljs-string\">&quot;stylesheet&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span> <span class=\"hljs-attr\">src</span>=<span class=\"hljs-string\">&quot;https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs/loader.min.js&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">style</span>&gt;</span><span class=\"language-css\">\n    <span class=\"hljs-selector-tag\">html</span>, <span class=\"hljs-selector-tag\">body</span> {\n      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">100%</span>;\n      <span class=\"hljs-attribute\">margin</span>: <span class=\"hljs-number\">0</span>;\n    }\n    <span class=\"hljs-selector-id\">#editor</span> {\n      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">60vh</span>;\n      <span class=\"hljs-attribute\">width</span>: <span class=\"hljs-number\">100%</span>;\n    }\n    <span class=\"hljs-selector-id\">#output</span> {\n      <span class=\"hljs-attribute\">height</span>: <span class=\"hljs-number\">25vh</span>;\n      <span class=\"hljs-attribute\">background</span>: <span class=\"hljs-number\">#1e1e1e</span>;\n      <span class=\"hljs-attribute\">color</span>: <span class=\"hljs-number\">#0f0</span>;\n      <span class=\"hljs-attribute\">padding</span>: <span class=\"hljs-number\">1em</span>;\n      <span class=\"hljs-attribute\">font-family</span>: monospace;\n      <span class=\"hljs-attribute\">overflow-y</span>: auto;\n      <span class=\"hljs-attribute\">border-radius</span>: <span class=\"hljs-number\">5px</span>;\n    }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">style</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;container mt-4&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mb-4&quot;</span>&gt;</span>&#x1f6e0;&#xfe0f; TaskLang Web Editor<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mb-3&quot;</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-success me-2&quot;</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;runDSL()&quot;</span>&gt;</span>&#x25b6;&#xfe0f; Esegui<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;btn btn-primary me-2&quot;</span> <span class=\"hljs-attr\">onclick</span>=<span class=\"hljs-string\">&quot;downloadPlaybook()&quot;</span>&gt;</span>&#x1f4be; Scarica Playbook<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">div</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;editor&quot;</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;border rounded&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h5</span> <span class=\"hljs-attr\">class</span>=<span class=\"hljs-string\">&quot;mt-4&quot;</span>&gt;</span>Output Ansible:<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h5</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">pre</span> <span class=\"hljs-attr\">id</span>=<span class=\"hljs-string\">&quot;output&quot;</span>&gt;</span>&#x1f504; Output in attesa...<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">pre</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">div</span>&gt;</span>\n\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">script</span>&gt;</span><span class=\"language-javascript\">\n    <span class=\"hljs-keyword\">let</span> editor;\n\n    <span class=\"hljs-built_in\">require</span>.<span class=\"hljs-title function_\">config</span>({ <span class=\"hljs-attr\">paths</span>: { <span class=\"hljs-string\">&apos;vs&apos;</span>: <span class=\"hljs-string\">&apos;https://cdnjs.cloudflare.com/ajax/libs/monaco-editor/0.44.0/min/vs&apos;</span> }});\n    <span class=\"hljs-built_in\">require</span>([<span class=\"hljs-string\">&apos;vs/editor/editor.main&apos;</span>], <span class=\"hljs-keyword\">function</span> (<span class=\"hljs-params\"></span>) {\n      editor = monaco.<span class=\"hljs-property\">editor</span>.<span class=\"hljs-title function_\">create</span>(<span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;editor&apos;</span>), {\n        <span class=\"hljs-attr\">value</span>: <span class=\"hljs-string\">`{{ default_dsl | safe }}`</span>,\n        <span class=\"hljs-attr\">language</span>: <span class=\"hljs-string\">&apos;yaml&apos;</span>,\n        <span class=\"hljs-attr\">theme</span>: <span class=\"hljs-string\">&apos;vs-dark&apos;</span>,\n        <span class=\"hljs-attr\">automaticLayout</span>: <span class=\"hljs-literal\">true</span>,\n      });\n    });\n\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">runDSL</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&apos;/run&apos;</span>, {\n        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&apos;POST&apos;</span>,\n        <span class=\"hljs-attr\">headers</span>: { <span class=\"hljs-string\">&apos;Content-Type&apos;</span>: <span class=\"hljs-string\">&apos;application/json&apos;</span> },\n        <span class=\"hljs-attr\">body</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>({ <span class=\"hljs-attr\">dsl</span>: editor.<span class=\"hljs-title function_\">getValue</span>() })\n      })\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">res</span> =&gt;</span> res.<span class=\"hljs-title function_\">json</span>())\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">data</span> =&gt;</span> {\n        <span class=\"hljs-keyword\">if</span> (data.<span class=\"hljs-property\">error</span>) {\n          <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;output&apos;</span>).<span class=\"hljs-property\">textContent</span> = <span class=\"hljs-string\">&quot;&#x274c; Errore: &quot;</span> + data.<span class=\"hljs-property\">error</span>;\n        } <span class=\"hljs-keyword\">else</span> {\n          <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;output&apos;</span>).<span class=\"hljs-property\">textContent</span> = data.<span class=\"hljs-property\">output</span>;\n        }\n      })\n      .<span class=\"hljs-title function_\">catch</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">err</span> =&gt;</span> {\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">getElementById</span>(<span class=\"hljs-string\">&apos;output&apos;</span>).<span class=\"hljs-property\">textContent</span> = <span class=\"hljs-string\">&quot;&#x274c; Errore imprevisto: &quot;</span> + err;\n      });\n    }\n\n    <span class=\"hljs-keyword\">function</span> <span class=\"hljs-title function_\">downloadPlaybook</span>(<span class=\"hljs-params\"></span>) {\n      <span class=\"hljs-title function_\">fetch</span>(<span class=\"hljs-string\">&apos;/download&apos;</span>, {\n        <span class=\"hljs-attr\">method</span>: <span class=\"hljs-string\">&apos;POST&apos;</span>,\n        <span class=\"hljs-attr\">headers</span>: { <span class=\"hljs-string\">&apos;Content-Type&apos;</span>: <span class=\"hljs-string\">&apos;application/json&apos;</span> },\n        <span class=\"hljs-attr\">body</span>: <span class=\"hljs-title class_\">JSON</span>.<span class=\"hljs-title function_\">stringify</span>({ <span class=\"hljs-attr\">dsl</span>: editor.<span class=\"hljs-title function_\">getValue</span>() })\n      })\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">res</span> =&gt;</span> res.<span class=\"hljs-title function_\">blob</span>())\n      .<span class=\"hljs-title function_\">then</span>(<span class=\"hljs-function\"><span class=\"hljs-params\">blob</span> =&gt;</span> {\n        <span class=\"hljs-keyword\">const</span> url = <span class=\"hljs-variable language_\">window</span>.<span class=\"hljs-property\">URL</span>.<span class=\"hljs-title function_\">createObjectURL</span>(blob);\n        <span class=\"hljs-keyword\">const</span> a = <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-title function_\">createElement</span>(<span class=\"hljs-string\">&apos;a&apos;</span>);\n        a.<span class=\"hljs-property\">href</span> = url;\n        a.<span class=\"hljs-property\">download</span> = <span class=\"hljs-string\">&quot;generated_playbook.yml&quot;</span>;\n        <span class=\"hljs-variable language_\">document</span>.<span class=\"hljs-property\">body</span>.<span class=\"hljs-title function_\">appendChild</span>(a);\n        a.<span class=\"hljs-title function_\">click</span>();\n        a.<span class=\"hljs-title function_\">remove</span>();\n      });\n    }\n  </span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">script</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"979,1076"}}],"payload":{"tag":"h2","lines":"978,979"}},{"content":"&#x1f4c1; <code>examples/default.task.yml</code>","children":[{"content":"<pre data-lines=\"1077,1095\"><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;Setup Web Server&quot;</span>\n<span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">web</span>\n<span class=\"hljs-attr\">packages:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">php</span>\n<span class=\"hljs-attr\">service:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n  <span class=\"hljs-attr\">enabled:</span> <span class=\"hljs-literal\">true</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n<span class=\"hljs-attr\">user:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">deploy</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n<span class=\"hljs-attr\">file:</span>\n  <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">/tmp/hello.txt</span>\n  <span class=\"hljs-attr\">content:</span> <span class=\"hljs-string\">&quot;Ciao dal TaskLang!&quot;</span>\n  <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1077,1095"}}],"payload":{"tag":"h2","lines":"1076,1077"}},{"content":"&#x1f4c4; <code>inventory.yml</code>","children":[{"content":"<pre data-lines=\"1096,1100\"><code class=\"language-ini\">[web]\nlocalhost ansible_connection=local\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1096,1100"}}],"payload":{"tag":"h2","lines":"1095,1096"}},{"content":"&#x1f40b; <code>Dockerfile</code>","children":[{"content":"<pre data-lines=\"1101,1114\"><code class=\"language-dockerfile\"><span class=\"hljs-keyword\">FROM</span> python:<span class=\"hljs-number\">3.10</span>-slim\n\n<span class=\"hljs-keyword\">WORKDIR</span><span class=\"language-bash\"> /app</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> . /app</span>\n\n<span class=\"hljs-keyword\">RUN</span><span class=\"language-bash\"> pip install --no-cache-dir -r requirements.txt</span>\n\n<span class=\"hljs-keyword\">EXPOSE</span> <span class=\"hljs-number\">5000</span>\n\n<span class=\"hljs-keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"hljs-string\">&quot;python&quot;</span>, <span class=\"hljs-string\">&quot;app.py&quot;</span>]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1101,1114"}}],"payload":{"tag":"h2","lines":"1100,1101"}},{"content":"&#x1f4c4; <code>docker-compose.yml</code>","children":[{"content":"<pre data-lines=\"1115,1125\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&apos;3&apos;</span>\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">tasklang:</span>\n    <span class=\"hljs-attr\">build:</span> <span class=\"hljs-string\">.</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;5000:5000&quot;</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">.:/app</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1115,1125"}}],"payload":{"tag":"h2","lines":"1114,1115"}},{"content":"&#x1f4c4; <code>.gitignore</code>","children":[{"content":"<pre data-lines=\"1126,1142\"><code data-lines=\"1126,1142\">__pycache__/\n*<span class=\"hljs-string\">.pyc</span>\n*<span class=\"hljs-string\">.pyo</span>\n*<span class=\"hljs-string\">.pyd</span>\n*<span class=\"hljs-string\">.log</span>\n*<span class=\"hljs-string\">.db</span>\n<span class=\"hljs-string\">.venv/</span>\n<span class=\"hljs-string\">.env</span>\n*<span class=\"hljs-string\">.swp</span>\n*<span class=\"hljs-string\">.bak</span>\n*<span class=\"hljs-string\">.tmp</span>\n*<span class=\"hljs-string\">.yml</span>~\n*<span class=\"hljs-string\">.retry</span>\n*<span class=\"hljs-string\">.orig</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1126,1142"}}],"payload":{"tag":"h2","lines":"1125,1126"}},{"content":"&#x1f4c4; <code>LICENSE</code> (MIT)","children":[{"content":"&#x2705; Il progetto &#xe8; ora completo e pronto per essere:","children":[{"content":"<strong>Pubblicato su GitHub</strong>","children":[],"payload":{"tag":"li","lines":"1156,1157"}},{"content":"<strong>Eseguito in locale o in container</strong>","children":[],"payload":{"tag":"li","lines":"1157,1158"}},{"content":"<strong>Esteso con nuove feature o moduli</strong>","children":[],"payload":{"tag":"li","lines":"1158,1159"}}],"payload":{"tag":"h3","lines":"1155,1156"}},{"content":"&#x1f3f7;&#xfe0f; <strong>Titolo della repository</strong>","children":[{"content":"<pre data-lines=\"1160,1163\"><code data-lines=\"1160,1163\"><span class=\"hljs-attribute\">tasklang-web</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1160,1163"}}],"payload":{"tag":"h3","lines":"1159,1160"}},{"content":"&#x1f4dd; <strong>Descrizione (breve per GitHub)</strong>","children":[],"payload":{"tag":"h3","lines":"1163,1164"}},{"content":"&#x1f4cc; <strong>Descrizione lunga (per la sezione About del repo o README)</strong>","children":[],"payload":{"tag":"h3","lines":"1164,1165"}},{"content":"&#x1f4a1; Suggerimento GitHub Topics","children":[{"content":"<pre data-lines=\"1168,1171\"><code data-lines=\"1168,1171\">ansible, yaml, dsl, flask, web-editor, devops, automation, declarative, infrastructure-<span class=\"hljs-keyword\">as</span>-<span class=\"hljs-keyword\">code</span>, monaco-editor\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1168,1171"}}],"payload":{"tag":"h3","lines":"1166,1167"}}],"payload":{"tag":"h2","lines":"1142,1143"}}]},null)</script>
</body>
</html>
