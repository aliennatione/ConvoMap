<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>((r) => {
          setTimeout(r);
        })(() => {
  const { markmap, mm } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute("style", "position:absolute;bottom:20px;right:20px");
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"Manuale base di programmazione dichiarativa con Ansible","children":[{"content":"1. Variabili e assegnazione","children":[{"content":"In Python (imperativo)","children":[{"content":"<pre data-lines=\"4,10\"><code class=\"language-python\">x = <span class=\"hljs-number\">10</span>\ny = <span class=\"hljs-number\">20</span>\nz = x + y\n<span class=\"hljs-built_in\">print</span>(z)  <span class=\"hljs-comment\"># Output: 30</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4,10"}}],"payload":{"tag":"h3","lines":"3,4"}},{"content":"In Ansible (dichiarativo)","children":[{"content":"<pre data-lines=\"12,18\"><code class=\"language-yaml\"><span class=\"hljs-attr\">vars:</span>\n  <span class=\"hljs-attr\">x:</span> <span class=\"hljs-number\">10</span>\n  <span class=\"hljs-attr\">y:</span> <span class=\"hljs-number\">20</span>\n  <span class=\"hljs-attr\">z:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ x + y }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"12,18"}}],"payload":{"tag":"h3","lines":"11,12"}}],"payload":{"tag":"h2","lines":"2,3"}},{"content":"2. Condizioni (if/else)","children":[{"content":"In Python (imperativo)","children":[{"content":"<pre data-lines=\"24,31\"><code class=\"language-python\">x = <span class=\"hljs-number\">10</span>\n<span class=\"hljs-keyword\">if</span> x &gt; <span class=\"hljs-number\">5</span>:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Maggiore di 5&quot;</span>)\n<span class=\"hljs-keyword\">else</span>:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Minore o uguale a 5&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"24,31"}}],"payload":{"tag":"h3","lines":"23,24"}},{"content":"In Ansible (dichiarativo)","children":[{"content":"<pre data-lines=\"32,44\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Verifica</span> <span class=\"hljs-string\">valore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">x</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Maggiore di 5&quot;</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">5</span>\n\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Altrimenti</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Minore o uguale a 5&quot;</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&lt;=</span> <span class=\"hljs-number\">5</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"32,44"}}],"payload":{"tag":"h3","lines":"31,32"}}],"payload":{"tag":"h2","lines":"22,23"}},{"content":"3. Cicli / iterazioni (loop)","children":[{"content":"In Python (imperativo)","children":[{"content":"<pre data-lines=\"50,54\"><code class=\"language-python\"><span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">3</span>):\n    <span class=\"hljs-built_in\">print</span>(i)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"50,54"}}],"payload":{"tag":"h3","lines":"49,50"}},{"content":"In Ansible (dichiarativo)","children":[{"content":"<pre data-lines=\"55,65\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Loop</span> <span class=\"hljs-string\">da</span> <span class=\"hljs-number\">0</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-number\">2</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Indice: <span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n    <span class=\"hljs-attr\">loop:</span> \n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">0</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">1</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-number\">2</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"55,65"}}],"payload":{"tag":"h3","lines":"54,55"}}],"payload":{"tag":"h2","lines":"48,49"}},{"content":"4. Modularit&#xe0; e riusabilit&#xe0;","children":[{"content":"In Python","children":[{"content":"<pre data-lines=\"71,78\"><code class=\"language-python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">saluta</span>(<span class=\"hljs-params\">nome</span>):\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Ciao <span class=\"hljs-subst\">{nome}</span>&quot;</span>)\n\nsaluta(<span class=\"hljs-string\">&quot;Mario&quot;</span>)\nsaluta(<span class=\"hljs-string\">&quot;Luca&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"71,78"}}],"payload":{"tag":"h3","lines":"70,71"}},{"content":"In Ansible (ruoli e include)","children":[{"content":"<pre data-lines=\"79,90\"><code class=\"language-yaml\"><span class=\"hljs-comment\"># playbook.yml</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">all</span>\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">saluto</span>\n\n<span class=\"hljs-comment\"># roles/saluto/tasks/main.yml</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">l&apos;utente</span>\n  <span class=\"hljs-attr\">debug:</span>\n    <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ nome }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"79,90"}}],"payload":{"tag":"h3","lines":"78,79"}}],"payload":{"tag":"h2","lines":"69,70"}},{"content":"5. Esempio completo: condizione + ciclo + variabili","children":[{"content":"<pre data-lines=\"95,109\"><code class=\"language-yaml\"><span class=\"hljs-attr\">vars:</span>\n  <span class=\"hljs-attr\">utenti:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mario</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">luca</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">anna</span>\n\n<span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">solo</span> <span class=\"hljs-string\">se</span> <span class=\"hljs-string\">nome</span> <span class=\"hljs-string\">ha</span> <span class=\"hljs-string\">pi&#xf9;</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-number\">3</span> <span class=\"hljs-string\">lettere</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n    <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ utenti }}</span>&quot;</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">length</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">3</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"95,109"}}],"payload":{"tag":"h2","lines":"94,95"}},{"content":"6. Confronto rapido: Imperativo vs Dichiarativo per il caso saluto","children":[{"content":"<table data-lines=\"114,121\">\n<thead data-lines=\"114,115\">\n<tr data-lines=\"114,115\">\n<th>Aspetto</th>\n<th>Python Imperativo</th>\n<th>Ansible Dichiarativo</th>\n</tr>\n</thead>\n<tbody data-lines=\"116,121\">\n<tr data-lines=\"116,117\">\n<td>Definizione flusso</td>\n<td>Scrivi esattamente <em>come</em> iterare e controllare</td>\n<td>Descrivi <em>cosa</em> fare e quando (loop e when)</td>\n</tr>\n<tr data-lines=\"117,118\">\n<td>Stato variabile</td>\n<td>Variabile <code>i</code> mutata nel ciclo</td>\n<td><code>item</code> fornito dal motore durante il loop</td>\n</tr>\n<tr data-lines=\"118,119\">\n<td>Controllo flusso</td>\n<td><code>if</code>/<code>else</code> esplicito</td>\n<td><code>when</code> su task, nessun blocco condizionale esplicito</td>\n</tr>\n<tr data-lines=\"119,120\">\n<td>Riusabilit&#xe0;</td>\n<td>Funzioni</td>\n<td>Ruoli e include</td>\n</tr>\n<tr data-lines=\"120,121\">\n<td>Idempotenza</td>\n<td>Nessuna garanzia, l&#x2019;esecuzione dipende dal codice</td>\n<td>Garantita tramite stato desiderato, ripetibile senza errori</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"114,121"}}],"payload":{"tag":"h2","lines":"113,114"}}],"payload":{"tag":"h1","lines":"1,2"}},{"content":"Conclusione","children":[{"content":"Usare Ansible per insegnare i concetti base di programmazione &#xe8; possibile ma richiede un cambio di mentalit&#xe0;, spostando il focus dal <em>come</em> al <em>cosa</em>.","children":[],"payload":{"tag":"li","lines":"122,123"}},{"content":"Il codice diventa pi&#xf9; descrittivo e meno &#x201c;istruzionale&#x201d;.","children":[],"payload":{"tag":"li","lines":"123,124"}},{"content":"Le strutture di controllo si traducono in condizioni associate a task pi&#xf9; che in blocchi di codice.","children":[],"payload":{"tag":"li","lines":"124,125"}},{"content":"Modularit&#xe0; e riusabilit&#xe0; sono gestite tramite ruoli e include.","children":[],"payload":{"tag":"li","lines":"125,126"}},{"content":"Puoi affiancare esempi in Python per chiarire i concetti e mostrare le differenze.","children":[],"payload":{"tag":"li","lines":"126,127"}}],"payload":{"tag":"h1","lines":"121,122"}},{"content":"&#x1f4da; Manuale di Programmazione Base con Ansible (dichiarativo)","children":[{"content":"Obiettivo","children":[{"content":"Insegnare i concetti base della programmazione (variabili, condizioni, cicli, modularit&#xe0;) in modo dichiarativo usando Ansible.","children":[],"payload":{"tag":"li","lines":"129,130"}},{"content":"Favorire il passaggio mentale dal paradigma imperativo a quello dichiarativo.","children":[],"payload":{"tag":"li","lines":"130,131"}},{"content":"Fornire esempi pratici con codice Ansible commentato e confronti con Python.","children":[],"payload":{"tag":"li","lines":"131,132"}},{"content":"Costruire un percorso di apprendimento con esempi progressivi e spiegazioni semplici.","children":[],"payload":{"tag":"li","lines":"132,133"}},{"content":"Preparare una base per un testo/manuale o corso didattico.","children":[],"payload":{"tag":"li","lines":"133,134"}}],"payload":{"tag":"h2","lines":"128,129"}}],"payload":{"tag":"h1","lines":"127,128"}},{"content":"Struttura del progetto","children":[{"content":"<pre data-lines=\"135,158\"><code data-lines=\"135,158\">ansible-declarative-tutorial/\n&#x251c;&#x2500;&#x2500; README<span class=\"hljs-selector-class\">.md</span>\n&#x251c;&#x2500;&#x2500; docs/\n&#x2502;   &#x251c;&#x2500;&#x2500; <span class=\"hljs-number\">01</span>_intro<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; <span class=\"hljs-number\">02</span>_variabili<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; <span class=\"hljs-number\">03</span>_condizioni<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; <span class=\"hljs-number\">04</span>_cicli<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; <span class=\"hljs-number\">05</span>_modularita<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; <span class=\"hljs-number\">06</span>_esempi_completi<span class=\"hljs-selector-class\">.md</span>\n&#x251c;&#x2500;&#x2500; examples/\n&#x2502;   &#x251c;&#x2500;&#x2500; variables<span class=\"hljs-selector-class\">.yml</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; conditions<span class=\"hljs-selector-class\">.yml</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; loops<span class=\"hljs-selector-class\">.yml</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; roles/\n&#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; saluto/\n&#x2502;   &#x2502;       &#x251c;&#x2500;&#x2500; tasks/\n&#x2502;   &#x2502;       &#x2502;   &#x2514;&#x2500;&#x2500; <span class=\"hljs-selector-tag\">main</span><span class=\"hljs-selector-class\">.yml</span>\n&#x2502;   &#x2502;       &#x2514;&#x2500;&#x2500; README<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; complete_example<span class=\"hljs-selector-class\">.yml</span>\n&#x251c;&#x2500;&#x2500; requirements<span class=\"hljs-selector-class\">.txt</span>\n&#x2514;&#x2500;&#x2500; LICENSE\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"135,158"}}],"payload":{"tag":"h1","lines":"134,135"}},{"content":"Contenuto chiave dei file","children":[{"content":"Esecuzione esempi","children":[{"content":"<pre data-lines=\"191,194\"><code class=\"language-bash\">ansible-playbook examples/variables.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"191,194"}}],"payload":{"tag":"h2","lines":"189,190"}},{"content":"Contributi","children":[],"payload":{"tag":"h2","lines":"195,196"}},{"content":"Licenza","children":[{"content":"examples/variables.yml","children":[{"content":"<pre data-lines=\"219,235\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-comment\"># Esempio di uso di variabili in Ansible</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">x:</span> <span class=\"hljs-number\">10</span>\n    <span class=\"hljs-attr\">y:</span> <span class=\"hljs-number\">20</span>\n    <span class=\"hljs-attr\">z:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ x + y }}</span>&quot;</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Mostra</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">valore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">z</span> <span class=\"hljs-string\">(x</span> <span class=\"hljs-string\">+</span> <span class=\"hljs-string\">y)</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Il valore di z &#xe8; <span class=\"hljs-template-variable\">{{ z }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"219,235"}}],"payload":{"tag":"h3","lines":"218,219"}},{"content":"examples/conditions.yml","children":[{"content":"<pre data-lines=\"236,256\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-comment\"># Esempio di condizioni in Ansible</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">x:</span> <span class=\"hljs-number\">10</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Messaggio</span> <span class=\"hljs-string\">se</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&#xe8;</span> <span class=\"hljs-string\">maggiore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-number\">5</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; maggiore di 5&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">5</span>\n\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Messaggio</span> <span class=\"hljs-string\">se</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&#xe8;</span> <span class=\"hljs-string\">minore</span> <span class=\"hljs-string\">o</span> <span class=\"hljs-string\">uguale</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-number\">5</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; minore o uguale a 5&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&lt;=</span> <span class=\"hljs-number\">5</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"236,256"}}],"payload":{"tag":"h3","lines":"235,236"}},{"content":"examples/loops.yml","children":[{"content":"<pre data-lines=\"257,275\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-comment\"># Esempio di ciclo (loop) in Ansible</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">users:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">luca</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">anna</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluto</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">ogni</span> <span class=\"hljs-string\">utente</span> <span class=\"hljs-string\">nella</span> <span class=\"hljs-string\">lista</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ users }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"257,275"}}],"payload":{"tag":"h3","lines":"256,257"}},{"content":"examples/roles/saluto/tasks/main.yml","children":[{"content":"<pre data-lines=\"276,284\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-comment\"># Ruolo Ansible per saluto personalizzato</span>\n\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">l&apos;utente</span>\n  <span class=\"hljs-attr\">debug:</span>\n    <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ nome }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"276,284"}}],"payload":{"tag":"h3","lines":"275,276"}},{"content":"examples/complete_example.yml","children":[{"content":"<pre data-lines=\"285,312\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-comment\"># Esempio completo con variabili, condizioni, cicli e ruolo</span>\n\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">utenti:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">luca</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">anna</span>\n\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">role:</span> <span class=\"hljs-string\">saluto</span>\n      <span class=\"hljs-attr\">vars:</span>\n        <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;default&quot;</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">solo</span> <span class=\"hljs-string\">utenti</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">nome</span> <span class=\"hljs-string\">lungo</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">3</span> <span class=\"hljs-string\">caratteri</span>\n      <span class=\"hljs-attr\">include_role:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">saluto</span>\n      <span class=\"hljs-attr\">vars:</span>\n        <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ utenti }}</span>&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">length</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">3</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"285,312"}}],"payload":{"tag":"h3","lines":"284,285"}},{"content":"requirements.txt","children":[{"content":"<pre data-lines=\"313,316\"><code data-lines=\"313,316\"><span class=\"hljs-attribute\">ansible</span>&gt;=<span class=\"hljs-number\">2</span>.<span class=\"hljs-number\">10</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"313,316"}}],"payload":{"tag":"h3","lines":"312,313"}},{"content":"LICENSE","children":[{"content":"<pre data-lines=\"317,325\"><code class=\"language-text\">MIT License\n\nCopyright (c) 2025 [Tuo Nome]\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\n...\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"317,325"}}],"payload":{"tag":"h3","lines":"316,317"}}],"payload":{"tag":"h2","lines":"201,202"}}],"payload":{"tag":"h1","lines":"158,159"}},{"content":"Prossimi passi","children":[{"content":"1. <code>README.md</code>","children":[{"content":"<pre data-lines=\"331,359\"><code class=\"language-markdown\"><span class=\"hljs-section\"># Manuale di Programmazione Base con Ansible (Dichiarativo)</span>\n\nQuesto progetto &#xe8; un tutorial/manuale per apprendere i fondamenti della programmazione usando Ansible, con un focus sul paradigma dichiarativo.\n\n<span class=\"hljs-section\">## Obiettivi</span>\n\n<span class=\"hljs-bullet\">-</span> Imparare variabili, condizioni, cicli, modularit&#xe0; usando Ansible.\n<span class=\"hljs-bullet\">-</span> Comprendere differenze tra programmazione imperativa e dichiarativa.\n<span class=\"hljs-bullet\">-</span> Esempi pratici e confronto con Python.\n<span class=\"hljs-bullet\">-</span> Preparare la base per corsi o testi didattici.\n\n<span class=\"hljs-section\">## Struttura</span>\n\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-code\">`docs/`</span>: capitoli del tutorial in Markdown.\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-code\">`examples/`</span>: playbook e ruoli Ansible esemplificativi.\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-code\">`requirements.txt`</span>: dipendenze (es. Ansible).\n\n<span class=\"hljs-section\">## Prerequisiti</span>\n\n<span class=\"hljs-bullet\">-</span> Python 3.8+\n<span class=\"hljs-bullet\">-</span> Ansible 2.10+\n\n<span class=\"hljs-section\">## Installazione</span>\n\n<span class=\"hljs-code\">```bash\npip install -r requirements.txt\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"331,359"}}],"payload":{"tag":"h2","lines":"330,331"}},{"content":"Esecuzione esempi","children":[{"content":"<pre data-lines=\"362,365\"><code class=\"language-bash\">ansible-playbook examples/variables.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"362,365"}}],"payload":{"tag":"h2","lines":"360,361"}},{"content":"Contributi","children":[],"payload":{"tag":"h2","lines":"366,367"}},{"content":"Licenza","children":[{"content":"<pre data-lines=\"376,379\"><code data-lines=\"376,379\">## <span class=\"hljs-number\">2</span>. `requirements.txt`\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"376,379"}},{"content":"<pre data-lines=\"382,395\"><code data-lines=\"382,395\"><span class=\"hljs-comment\">## 3. `docs/01_intro.md`</span>\n```markdown\n<span class=\"hljs-comment\"># Introduzione</span>\n\nQuesto tutorial usa Ansible per <span class=\"hljs-keyword\">insegnare </span>i concetti <span class=\"hljs-keyword\">base </span>della programmazione in modo <span class=\"hljs-keyword\">dichiarativo.\n</span>\nCos<span class=\"hljs-string\">&apos;&#xe8; la programmazione dichiarativa? Contrariamente alla programmazione imperativa, descrive il *cosa* fare, non il *come*.\n\nAnsible &#xe8; uno strumento di automazione dichiarativo che permette di definire lo stato desiderato.\n\nNei capitoli successivi vedremo come usare variabili, condizioni, cicli e modularit&#xe0;.\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"382,395"}}],"payload":{"tag":"h2","lines":"372,373"}},{"content":"4. <code>docs/02_variabili.md</code>","children":[{"content":"<pre data-lines=\"396,409\"><code class=\"language-markdown\"><span class=\"hljs-section\"># Variabili in Ansible</span>\n\nLe variabili sono contenitori di valori. In Ansible sono usate per parametrizzare i playbook.\n\nEsempio:\n\n<span class=\"hljs-code\">```yaml\nvars:\n  x: 10\n  y: 20\n  somma: &quot;{{ x + y }}&quot;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"396,409"}},{"content":"<pre data-lines=\"414,419\"><code class=\"language-python\">x = 10\ny = 20\nsomma = x + y\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"414,419"}},{"content":"<pre data-lines=\"420,436\"><code data-lines=\"420,436\"><span class=\"hljs-comment\">## 5. `docs/03_condizioni.md`</span>\n```markdown\n<span class=\"hljs-comment\"># Condizioni (when)</span>\n\nLe condizioni permettono di eseguire task solo se una condizione &#xe8; vera.\n\nEsempio <span class=\"hljs-params\">Ansible:</span>\n\n```yaml\n<span class=\"hljs-params\">tasks:</span>\n  <span class=\"hljs-operator\">-</span> <span class=\"hljs-params\">name:</span> Messaggio se x <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">5</span>\n    <span class=\"hljs-params\">debug:</span>\n      <span class=\"hljs-params\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; maggiore di 5&quot;</span>\n    <span class=\"hljs-params\">when:</span> x <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">5</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"420,436"}},{"content":"<pre data-lines=\"439,443\"><code class=\"language-python\"><span class=\"hljs-keyword\">if</span> x &gt; <span class=\"hljs-number\">5</span>:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;x &#xe8; maggiore di 5&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"439,443"}},{"content":"<pre data-lines=\"444,463\"><code data-lines=\"444,463\"><span class=\"hljs-comment\">## 6. `docs/04_cicli.md`</span>\n<span class=\"hljs-attribute\">```markdown\n# Cicli (loop)\n\nAnsible permette di iterare su liste con `loop`.\n\nEsempio</span><span class=\"hljs-punctuation\">:\n</span>\n<span class=\"hljs-attribute\">```yaml\ntasks</span><span class=\"hljs-punctuation\">:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">name: Saluta utenti</span>\n    <span class=\"hljs-attribute\">debug</span><span class=\"hljs-punctuation\">:</span>\n      <span class=\"hljs-attribute\">msg</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Ciao {{ item }}&quot;</span>\n    <span class=\"hljs-attribute\">loop</span><span class=\"hljs-punctuation\">:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Luca</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Anna</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"444,463"}},{"content":"<pre data-lines=\"466,470\"><code class=\"language-python\"><span class=\"hljs-keyword\">for</span> user <span class=\"hljs-keyword\">in</span> [<span class=\"hljs-string\">&quot;Mario&quot;</span>, <span class=\"hljs-string\">&quot;Luca&quot;</span>, <span class=\"hljs-string\">&quot;Anna&quot;</span>]:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Ciao <span class=\"hljs-subst\">{user}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"466,470"}},{"content":"<pre data-lines=\"471,481\"><code data-lines=\"471,481\"><span class=\"hljs-comment\">## 7. `docs/05_modularita.md`</span>\n```markdown\n<span class=\"hljs-comment\"># Modularit&#xe0; con Ruoli</span>\n\nI ruoli permettono <span class=\"hljs-keyword\">di </span><span class=\"hljs-keyword\">organizzare </span>playbook complessi in moduli riutilizzabili.\n\nStruttura tipica <span class=\"hljs-keyword\">di </span>un ruolo:\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"471,481"}},{"content":"<pre data-lines=\"486,495\"><code data-lines=\"486,495\">\nEsempio <span class=\"hljs-params\">task:</span>\n\n```yaml\n<span class=\"hljs-operator\">-</span> <span class=\"hljs-params\">name:</span> Saluto personalizzato\n  <span class=\"hljs-params\">debug:</span>\n    <span class=\"hljs-params\">msg:</span> <span class=\"hljs-string\">&quot;Ciao {{ nome }}&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"486,495"}},{"content":"<pre data-lines=\"498,504\"><code class=\"language-yaml\"><span class=\"hljs-attr\">roles:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">role:</span> <span class=\"hljs-string\">saluto</span>\n    <span class=\"hljs-attr\">vars:</span>\n      <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;Mario&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"498,504"}},{"content":"<pre data-lines=\"505,522\"><code data-lines=\"505,522\"><span class=\"hljs-comment\">## 8. `examples/variables.yml`</span>\n<span class=\"hljs-string\">```yaml</span>\n<span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">x:</span> <span class=\"hljs-number\">10</span>\n    <span class=\"hljs-attr\">y:</span> <span class=\"hljs-number\">20</span>\n    <span class=\"hljs-attr\">z:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ x + y }}</span>&quot;</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Mostra</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">valore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">z</span> <span class=\"hljs-string\">(x</span> <span class=\"hljs-string\">+</span> <span class=\"hljs-string\">y)</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Il valore di z &#xe8; <span class=\"hljs-template-variable\">{{ z }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"505,522"}}],"payload":{"tag":"h2","lines":"395,396"}},{"content":"9. <code>examples/conditions.yml</code>","children":[{"content":"<pre data-lines=\"523,542\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">x:</span> <span class=\"hljs-number\">10</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Messaggio</span> <span class=\"hljs-string\">se</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&#xe8;</span> <span class=\"hljs-string\">maggiore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-number\">5</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; maggiore di 5&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">5</span>\n\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Messaggio</span> <span class=\"hljs-string\">se</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&#xe8;</span> <span class=\"hljs-string\">minore</span> <span class=\"hljs-string\">o</span> <span class=\"hljs-string\">uguale</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-number\">5</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; minore o uguale a 5&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&lt;=</span> <span class=\"hljs-number\">5</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"523,542"}}],"payload":{"tag":"h2","lines":"522,523"}},{"content":"10. <code>examples/loops.yml</code>","children":[{"content":"<pre data-lines=\"543,560\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">users:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">luca</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">anna</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluto</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">ogni</span> <span class=\"hljs-string\">utente</span> <span class=\"hljs-string\">nella</span> <span class=\"hljs-string\">lista</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ users }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"543,560"}}],"payload":{"tag":"h2","lines":"542,543"}},{"content":"11. <code>examples/roles/saluto/tasks/main.yml</code>","children":[{"content":"<pre data-lines=\"561,567\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">l&apos;utente</span>\n  <span class=\"hljs-attr\">debug:</span>\n    <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ nome }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"561,567"}}],"payload":{"tag":"h2","lines":"560,561"}},{"content":"12. <code>examples/complete_example.yml</code>","children":[{"content":"<pre data-lines=\"568,593\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">false</span>\n\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">utenti:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">luca</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">anna</span>\n\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">role:</span> <span class=\"hljs-string\">saluto</span>\n      <span class=\"hljs-attr\">vars:</span>\n        <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;default&quot;</span>\n\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">solo</span> <span class=\"hljs-string\">utenti</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">nome</span> <span class=\"hljs-string\">lungo</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">3</span> <span class=\"hljs-string\">caratteri</span>\n      <span class=\"hljs-attr\">include_role:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">saluto</span>\n      <span class=\"hljs-attr\">vars:</span>\n        <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ utenti }}</span>&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">item</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">length</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">3</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"568,593"}}],"payload":{"tag":"h2","lines":"567,568"}},{"content":"13. <code>LICENSE</code>","children":[{"content":"<pre data-lines=\"594,608\"><code class=\"language-text\">MIT License\n\nCopyright (c) 2025 [Tuo Nome]\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &quot;Software&quot;), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\n[...standard MIT text...]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"594,608"}}],"payload":{"tag":"h2","lines":"593,594"}}],"payload":{"tag":"h1","lines":"325,326"}},{"content":"Conclusione","children":[],"payload":{"tag":"h1","lines":"608,609"}},{"content":"Capitolo 1: Introduzione","children":[{"content":"Perch&#xe9; imparare con Ansible?","children":[{"content":"&#xc8; un linguaggio dichiarativo, ampiamente usato in automazione.","children":[],"payload":{"tag":"li","lines":"646,647"}},{"content":"Permette di imparare concetti di programmazione in modo semplice.","children":[],"payload":{"tag":"li","lines":"647,648"}},{"content":"La sintassi YAML &#xe8; leggibile e pulita.","children":[],"payload":{"tag":"li","lines":"648,649"}},{"content":"Offre strumenti per variabili, condizioni, cicli e modularit&#xe0;.","children":[],"payload":{"tag":"li","lines":"649,651"}}],"payload":{"tag":"h2","lines":"644,645"}},{"content":"Struttura di un Playbook Ansible","children":[{"content":"<pre data-lines=\"661,668\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Stampa</span> <span class=\"hljs-string\">un</span> <span class=\"hljs-string\">messaggio</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao, mondo!&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"661,668"}}],"payload":{"tag":"h2","lines":"651,652"}},{"content":"Obiettivi del tutorial","children":[{"content":"<pre data-lines=\"680,701\"><code data-lines=\"680,701\"><span class=\"hljs-comment\"># Capitolo 2: Variabili</span>\n<span class=\"hljs-attribute\">```markdown\n# Capitolo 2</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">Variabili in Ansible</span>\n\n<span class=\"hljs-comment\">## Cos&apos;&#xe8; una Variabile?</span>\n\nUna variabile &#xe8; un contenitore che memorizza un valore (numero, testo, lista, ecc.) che pu&#xf2; cambiare.\n\n<span class=\"hljs-comment\">## Definire Variabili</span>\n\nIn Ansible, si definiscono usando la sezione `vars:`:\n\n<span class=\"hljs-attribute\">```yaml\nvars</span><span class=\"hljs-punctuation\">:</span>\n  <span class=\"hljs-attribute\">nome</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Mario&quot;</span>\n  <span class=\"hljs-attribute\">eta</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">30</span>\n  <span class=\"hljs-attribute\">hobbies</span><span class=\"hljs-punctuation\">:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">calcio</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">musica</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"680,701"}}],"payload":{"tag":"h2","lines":"671,672"}},{"content":"Usare Variabili","children":[{"content":"<pre data-lines=\"706,712\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluto</span> <span class=\"hljs-string\">personalizzato</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ nome }}</span>, hai <span class=\"hljs-template-variable\">{{ eta }}</span> anni.&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"706,712"}}],"payload":{"tag":"h2","lines":"702,703"}},{"content":"Tipi di Variabili","children":[{"content":"Numeri (interi, float)","children":[],"payload":{"tag":"li","lines":"715,716"}},{"content":"Stringhe","children":[],"payload":{"tag":"li","lines":"716,717"}},{"content":"Liste","children":[],"payload":{"tag":"li","lines":"717,718"}},{"content":"Dizionari","children":[],"payload":{"tag":"li","lines":"718,720"}}],"payload":{"tag":"h2","lines":"713,714"}},{"content":"Esempio Completo","children":[{"content":"<pre data-lines=\"722,742\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">no</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;Anna&quot;</span>\n    <span class=\"hljs-attr\">eta:</span> <span class=\"hljs-number\">25</span>\n    <span class=\"hljs-attr\">hobbies:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">lettura</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">viaggio</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Stampa</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">nome</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Nome: <span class=\"hljs-template-variable\">{{ nome }}</span>&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Conta</span> <span class=\"hljs-string\">hobby</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Hai <span class=\"hljs-template-variable\">{{ hobbies | length }}</span> hobby&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Primo</span> <span class=\"hljs-string\">hobby</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Il primo hobby &#xe8; <span class=\"hljs-template-variable\">{{ hobbies[0] }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"722,742"}}],"payload":{"tag":"h2","lines":"720,721"}},{"content":"Confronto con Python","children":[{"content":"<pre data-lines=\"745,753\"><code class=\"language-python\">nome = <span class=\"hljs-string\">&quot;Anna&quot;</span>\neta = <span class=\"hljs-number\">25</span>\nhobbies = [<span class=\"hljs-string\">&quot;lettura&quot;</span>, <span class=\"hljs-string\">&quot;viaggio&quot;</span>]\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Nome: <span class=\"hljs-subst\">{nome}</span>&quot;</span>)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Hai <span class=\"hljs-subst\">{<span class=\"hljs-built_in\">len</span>(hobbies)}</span> hobby&quot;</span>)\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Il primo hobby &#xe8; <span class=\"hljs-subst\">{hobbies[<span class=\"hljs-number\">0</span>]}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"745,753"}}],"payload":{"tag":"h2","lines":"743,744"}},{"content":"Note","children":[{"content":"<pre data-lines=\"763,781\"><code data-lines=\"763,781\"><span class=\"hljs-comment\"># Capitolo 3: Condizioni</span>\n```markdown\n<span class=\"hljs-comment\"># Capitolo 3: Condizioni con `when`</span>\n\n<span class=\"hljs-comment\">## Perch&#xe9; servono le condizioni?</span>\n\nLe condizioni permettono di eseguire certe azioni solo se una condizione &#xe8; vera.\n\n<span class=\"hljs-comment\">## Sintassi base</span>\n\n```yaml\n<span class=\"hljs-params\">tasks:</span>\n  <span class=\"hljs-operator\">-</span> <span class=\"hljs-params\">name:</span> Esegui solo se x &#xe8; maggiore di <span class=\"hljs-number\">10</span>\n    <span class=\"hljs-params\">debug:</span>\n      <span class=\"hljs-params\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; grande!&quot;</span>\n    <span class=\"hljs-params\">when:</span> x <span class=\"hljs-operator\">&gt;</span> <span class=\"hljs-number\">10</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"763,781"}}],"payload":{"tag":"h2","lines":"756,757"}},{"content":"Esempio completo","children":[{"content":"<pre data-lines=\"784,799\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">no</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">x:</span> <span class=\"hljs-number\">15</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Controlla</span> <span class=\"hljs-string\">valore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">x</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; pi&#xf9; grande di 10&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&gt;</span> <span class=\"hljs-number\">10</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Altrimenti</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;x &#xe8; 10 o meno&quot;</span>\n      <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">x</span> <span class=\"hljs-string\">&lt;=</span> <span class=\"hljs-number\">10</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"784,799"}}],"payload":{"tag":"h2","lines":"782,783"}},{"content":"Operatori supportati","children":[{"content":"<code>==</code>, <code>!=</code>, <code>&gt;</code>, <code>&lt;</code>, <code>&gt;=</code>, <code>&lt;=</code>","children":[],"payload":{"tag":"li","lines":"802,803"}},{"content":"operatori logici: <code>and</code>, <code>or</code>, <code>not</code>","children":[],"payload":{"tag":"li","lines":"803,805"}}],"payload":{"tag":"h2","lines":"800,801"}},{"content":"Confronto Python","children":[{"content":"<pre data-lines=\"807,814\"><code class=\"language-python\">x = <span class=\"hljs-number\">15</span>\n<span class=\"hljs-keyword\">if</span> x &gt; <span class=\"hljs-number\">10</span>:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;x &#xe8; pi&#xf9; grande di 10&quot;</span>)\n<span class=\"hljs-keyword\">else</span>:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;x &#xe8; 10 o meno&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"807,814"}}],"payload":{"tag":"h2","lines":"805,806"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"823,844\"><code data-lines=\"823,844\"><span class=\"hljs-comment\"># Capitolo 4: Cicli</span>\n<span class=\"hljs-attribute\">```markdown\n# Capitolo 4</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">Cicli con `loop`</span>\n\n<span class=\"hljs-comment\">## Cos&apos;&#xe8; un ciclo?</span>\n\n<span class=\"hljs-attribute\">Un ciclo ripete un&#x2019;azione pi&#xf9; volte, per ogni elemento di una lista o intervallo.\n\n## Sintassi base con `loop`\n\n```yaml\ntasks</span><span class=\"hljs-punctuation\">:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">name: Saluta utenti</span>\n    <span class=\"hljs-attribute\">debug</span><span class=\"hljs-punctuation\">:</span>\n      <span class=\"hljs-attribute\">msg</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;Ciao {{ item }}&quot;</span>\n    <span class=\"hljs-attribute\">loop</span><span class=\"hljs-punctuation\">:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Lucia</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Anna</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"823,844"}}],"payload":{"tag":"h2","lines":"817,818"}},{"content":"Variabili nella lista","children":[],"payload":{"tag":"h2","lines":"845,846"}},{"content":"Esempio completo","children":[{"content":"<pre data-lines=\"851,865\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">no</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">utenti:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mario</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">lucia</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">anna</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluta</span> <span class=\"hljs-string\">ogni</span> <span class=\"hljs-string\">utente</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ utenti }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"851,865"}}],"payload":{"tag":"h2","lines":"849,850"}},{"content":"Loop con indici","children":[{"content":"<pre data-lines=\"870,877\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Conta</span> <span class=\"hljs-string\">da</span> <span class=\"hljs-number\">1</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-number\">5</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Numero <span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n    <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ range(1,6) | list }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"870,877"}}],"payload":{"tag":"h2","lines":"866,867"}},{"content":"Confronto Python","children":[{"content":"<pre data-lines=\"880,887\"><code class=\"language-python\">utenti = [<span class=\"hljs-string\">&quot;mario&quot;</span>, <span class=\"hljs-string\">&quot;lucia&quot;</span>, <span class=\"hljs-string\">&quot;anna&quot;</span>]\n<span class=\"hljs-keyword\">for</span> utente <span class=\"hljs-keyword\">in</span> utenti:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Ciao <span class=\"hljs-subst\">{utente}</span>&quot;</span>)\n<span class=\"hljs-keyword\">for</span> i <span class=\"hljs-keyword\">in</span> <span class=\"hljs-built_in\">range</span>(<span class=\"hljs-number\">1</span>,<span class=\"hljs-number\">6</span>):\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Numero <span class=\"hljs-subst\">{i}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"880,887"}}],"payload":{"tag":"h2","lines":"878,879"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"897,909\"><code data-lines=\"897,909\"># Capitolo <span class=\"hljs-number\">5</span>: Modularit&#xe0;\n```markdown\n# Capitolo <span class=\"hljs-number\">5</span>: Modularit&#xe0; con Ruoli\n\n## Perch&#xe9; modularizzare?\n\nI ruoli aiutano a organizzare playbook complessi <span class=\"hljs-keyword\">in</span> parti riutilizzabili.\n\n## Struttura di un ruolo\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"897,909"}},{"content":"<pre data-lines=\"916,927\"><code data-lines=\"916,927\">\n<span class=\"hljs-comment\">## Come usare un ruolo</span>\n\n<span class=\"hljs-attribute\">Nel playbook</span><span class=\"hljs-punctuation\">:\n</span>\n<span class=\"hljs-attribute\">```yaml\n- hosts</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attribute\">roles</span><span class=\"hljs-punctuation\">:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">mio_ruolo</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"916,927"}}],"payload":{"tag":"h2","lines":"890,891"}},{"content":"Esempio ruolo <code>saluto</code>","children":[{"content":"<pre data-lines=\"932,937\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Saluto</span> <span class=\"hljs-string\">personalizzato</span>\n  <span class=\"hljs-attr\">debug:</span>\n    <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Ciao <span class=\"hljs-template-variable\">{{ nome }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"932,937"}},{"content":"<pre data-lines=\"940,948\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">no</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;Luca&quot;</span>\n  <span class=\"hljs-attr\">roles:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">saluto</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"940,948"}}],"payload":{"tag":"h2","lines":"928,929"}},{"content":"Vantaggi","children":[{"content":"Riutilizzo","children":[],"payload":{"tag":"li","lines":"951,952"}},{"content":"Separazione di responsabilit&#xe0;","children":[],"payload":{"tag":"li","lines":"952,953"}},{"content":"Facilit&#xe0; di manutenzione","children":[],"payload":{"tag":"li","lines":"953,955"}}],"payload":{"tag":"h2","lines":"949,950"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"963,965\"><code data-lines=\"963,965\"></code></pre>","children":[],"payload":{"tag":"pre","lines":"963,965"}}],"payload":{"tag":"h2","lines":"957,958"}}],"payload":{"tag":"h1","lines":"610,611"}},{"content":"Capitolo 6: Gestione Errori e Controllo del Flusso","children":[{"content":"Condizione di successo con <code>failed_when</code> e <code>changed_when</code>","children":[{"content":"<pre data-lines=\"999,1005\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Esempio</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">controllo</span> <span class=\"hljs-string\">personalizzato</span>\n    <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">/usr/bin/exit</span> <span class=\"hljs-number\">1</span>\n    <span class=\"hljs-attr\">failed_when:</span> <span class=\"hljs-literal\">false</span>   <span class=\"hljs-comment\"># Non fallisce mai, anche se exit code &#xe8; diverso da 0</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"999,1005"}}],"payload":{"tag":"h2","lines":"997,998"}},{"content":"Blocchi e <code>rescue</code>","children":[{"content":"<pre data-lines=\"1007,1022\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">block:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Task</span> <span class=\"hljs-string\">che</span> <span class=\"hljs-string\">potrebbe</span> <span class=\"hljs-string\">fallire</span>\n        <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">/bin/false</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Task</span> <span class=\"hljs-string\">successivo</span>\n        <span class=\"hljs-attr\">debug:</span>\n          <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Non eseguito se il precedente fallisce&quot;</span>\n\n    <span class=\"hljs-attr\">rescue:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Gestione</span> <span class=\"hljs-string\">errore</span>\n        <span class=\"hljs-attr\">debug:</span>\n          <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Errore catturato, eseguo recupero&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1007,1022"}}],"payload":{"tag":"h2","lines":"1005,1006"}},{"content":"Condizione <code>when</code> per controllare flussi","children":[{"content":"<pre data-lines=\"1024,1035\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Esegue</span> <span class=\"hljs-string\">comando</span>\n    <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">/bin/false</span>\n    <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">risultato</span>\n\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Esegue</span> <span class=\"hljs-string\">solo</span> <span class=\"hljs-string\">se</span> <span class=\"hljs-string\">il</span> <span class=\"hljs-string\">task</span> <span class=\"hljs-string\">precedente</span> <span class=\"hljs-string\">ha</span> <span class=\"hljs-string\">avuto</span> <span class=\"hljs-string\">successo</span>\n    <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Successo!&quot;</span>\n    <span class=\"hljs-attr\">when:</span> <span class=\"hljs-string\">risultato.rc</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-number\">0</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1024,1035"}}],"payload":{"tag":"h2","lines":"1022,1023"}},{"content":"Confronto Python (try/except)","children":[{"content":"<pre data-lines=\"1036,1043\"><code class=\"language-python\"><span class=\"hljs-keyword\">try</span>:\n    <span class=\"hljs-comment\"># codice che pu&#xf2; generare errore</span>\n    result = <span class=\"hljs-number\">1</span> / <span class=\"hljs-number\">0</span>\n<span class=\"hljs-keyword\">except</span> ZeroDivisionError:\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Gestisco l&apos;errore&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1036,1043"}}],"payload":{"tag":"h2","lines":"1035,1036"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"1046,1060\"><code data-lines=\"1046,1060\">\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-comment\"># Capitolo 7: Template Jinja2 in Ansible</span>\n\n<span class=\"hljs-string\">```markdown</span>\n<span class=\"hljs-comment\"># Capitolo 7: Template Jinja2 in Ansible</span>\n<span class=\"hljs-comment\">## Cos&apos;&#xe8; Jinja2?</span>\n<span class=\"hljs-string\">&#xc8;</span> <span class=\"hljs-string\">un</span> <span class=\"hljs-string\">motore</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">template</span> <span class=\"hljs-string\">che</span> <span class=\"hljs-string\">permette</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">generare</span> <span class=\"hljs-string\">contenuti</span> <span class=\"hljs-string\">dinamici</span> <span class=\"hljs-string\">tramite</span> <span class=\"hljs-string\">variabili,</span> <span class=\"hljs-string\">espressioni</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">filtri.</span>\n<span class=\"hljs-comment\">## Uso nei file template `.j2`</span>\n<span class=\"hljs-string\">Puoi</span> <span class=\"hljs-string\">creare</span> <span class=\"hljs-string\">file</span> <span class=\"hljs-string\">template</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">variabili</span> <span class=\"hljs-string\">da</span> <span class=\"hljs-string\">sostituire</span> <span class=\"hljs-string\">durante</span> <span class=\"hljs-string\">l&#x2019;esecuzione.</span>\n<span class=\"hljs-string\">Esempio</span> <span class=\"hljs-string\">`template.conf.j2`:</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1046,1060"}},{"content":"<pre data-lines=\"1065,1070\"><code data-lines=\"1065,1070\"><span class=\"language-xml\">location / {\n    proxy_pass http://</span><span class=\"hljs-template-variable\">{{ <span class=\"hljs-name\">backend_ip</span> }}</span><span class=\"language-xml\">:</span><span class=\"hljs-template-variable\">{{ <span class=\"hljs-name\">backend_port</span> }}</span><span class=\"language-xml\">;\n}\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1065,1070"}},{"content":"<pre data-lines=\"1073,1082\"><code data-lines=\"1073,1082\"><span class=\"hljs-meta\">## Uso nel playbook</span>\n```yaml\n<span class=\"hljs-symbol\">tasks:</span>\n  - name: Copia file template\n<span class=\"hljs-symbol\">    template:</span>\n<span class=\"hljs-symbol\">      src:</span> template.conf.j2\n<span class=\"hljs-symbol\">      dest:</span> <span class=\"hljs-keyword\">/etc/</span>nginx<span class=\"hljs-keyword\">/sites-enabled/</span>default\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1073,1082"}}],"payload":{"tag":"h2","lines":"1043,1044"}},{"content":"Variabili, filtri e controllo flusso","children":[{"content":"<pre data-lines=\"1088,1096\"><code class=\"language-yaml\"><span class=\"hljs-attr\">vars:</span>\n  <span class=\"hljs-attr\">nome:</span> <span class=\"hljs-string\">&quot;Mario Rossi&quot;</span>\n\n<span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">debug:</span>\n      <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Nome minuscolo: <span class=\"hljs-template-variable\">{{ nome | lower }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1088,1096"}},{"content":"<pre data-lines=\"1097,1104\"><code class=\"language-jinja\"><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span> app_debug %}</span><span class=\"language-xml\">\ndebug_mode = true\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">else</span></span> %}</span><span class=\"language-xml\">\ndebug_mode = false\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span> %}</span><span class=\"language-xml\">\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1097,1104"}}],"payload":{"tag":"h2","lines":"1082,1083"}},{"content":"Confronto con Python","children":[{"content":"<pre data-lines=\"1106,1110\"><code class=\"language-python\">nome = <span class=\"hljs-string\">&quot;Mario&quot;</span>\n<span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Ciao <span class=\"hljs-subst\">{nome.lower()}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1106,1110"}}],"payload":{"tag":"h2","lines":"1104,1105"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"1113,1130\"><code data-lines=\"1113,1130\">\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-comment\"># Capitolo 8: Callback Plugin e Personalizzazioni</span>\n\n<span class=\"hljs-string\">```markdown</span>\n<span class=\"hljs-comment\"># Capitolo 8: Callback Plugin e Personalizzazioni</span>\n<span class=\"hljs-comment\">## Cosa sono i callback plugin?</span>\n<span class=\"hljs-string\">Sono</span> <span class=\"hljs-string\">plugin</span> <span class=\"hljs-string\">che</span> <span class=\"hljs-string\">consentono</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">eseguire</span> <span class=\"hljs-string\">azioni</span> <span class=\"hljs-string\">personalizzate</span> <span class=\"hljs-string\">durante</span> <span class=\"hljs-string\">o</span> <span class=\"hljs-string\">dopo</span> <span class=\"hljs-string\">l&#x2019;esecuzione</span> <span class=\"hljs-string\">dei</span> <span class=\"hljs-string\">playbook</span> <span class=\"hljs-string\">(ad</span> <span class=\"hljs-string\">es.</span> <span class=\"hljs-string\">log,</span> <span class=\"hljs-string\">notifiche).</span>\n<span class=\"hljs-comment\">## Uso base</span>\n<span class=\"hljs-string\">Ansible</span> <span class=\"hljs-string\">include</span> <span class=\"hljs-string\">diversi</span> <span class=\"hljs-string\">callback</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">default</span> <span class=\"hljs-string\">(json,</span> <span class=\"hljs-string\">yaml,</span> <span class=\"hljs-string\">minimal).</span>\n<span class=\"hljs-attr\">Per abilitarli:</span>\n<span class=\"hljs-string\">```bash</span>\n<span class=\"hljs-string\">export</span> <span class=\"hljs-string\">ANSIBLE_CALLBACK_WHITELIST=&apos;json&apos;</span>\n<span class=\"hljs-string\">ansible-playbook</span> <span class=\"hljs-string\">playbook.yml</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1113,1130"}}],"payload":{"tag":"h2","lines":"1110,1111"}},{"content":"Scrivere un callback personalizzato","children":[{"content":"<pre data-lines=\"1133,1141\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;TASK OK su <span class=\"hljs-subst\">{host.name}</span>: <span class=\"hljs-subst\">{result.task_name}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1133,1141"}}],"payload":{"tag":"h2","lines":"1130,1131"}},{"content":"Perch&#xe9; usarlo?","children":[{"content":"Monitoraggio personalizzato","children":[],"payload":{"tag":"li","lines":"1143,1144"}},{"content":"Integrazione con sistemi esterni (Slack, email)","children":[],"payload":{"tag":"li","lines":"1144,1145"}},{"content":"Logging avanzato","children":[],"payload":{"tag":"li","lines":"1145,1146"}}],"payload":{"tag":"h2","lines":"1142,1143"}},{"content":"Alternative: Moduli di output","children":[],"payload":{"tag":"h2","lines":"1146,1147"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"1151,1159\"><code data-lines=\"1151,1159\">\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-string\">Se</span> <span class=\"hljs-string\">vuoi,</span> <span class=\"hljs-string\">posso</span> <span class=\"hljs-string\">proseguire</span> <span class=\"hljs-string\">creando</span> <span class=\"hljs-string\">esempi</span> <span class=\"hljs-string\">pratici,</span> <span class=\"hljs-string\">esercizi</span> <span class=\"hljs-string\">o</span> <span class=\"hljs-string\">capitoli</span> <span class=\"hljs-string\">avanzati</span> <span class=\"hljs-string\">(es.</span> <span class=\"hljs-string\">gestione</span> <span class=\"hljs-string\">inventario</span> <span class=\"hljs-string\">dinamico,</span> <span class=\"hljs-string\">sviluppo</span> <span class=\"hljs-string\">moduli</span> <span class=\"hljs-string\">personalizzati,</span> <span class=\"hljs-string\">ecc.).</span>\n\n<span class=\"hljs-string\">Fammi</span> <span class=\"hljs-string\">sapere!</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1151,1159"}}],"payload":{"tag":"h2","lines":"1148,1149"}}],"payload":{"tag":"h1","lines":"978,979"}},{"content":"Esempi Pratici e Esercizi","children":[{"content":"Esempio pratico 1: Installare e configurare Nginx con template","children":[{"content":"<pre data-lines=\"1161,1186\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Setup</span> <span class=\"hljs-string\">Nginx</span> <span class=\"hljs-string\">with</span> <span class=\"hljs-string\">template</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">webservers</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">server_name:</span> <span class=\"hljs-string\">example.com</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">Nginx</span>\n      <span class=\"hljs-attr\">apt:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n      <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copy</span> <span class=\"hljs-string\">Nginx</span> <span class=\"hljs-string\">config</span> <span class=\"hljs-string\">template</span>\n      <span class=\"hljs-attr\">template:</span>\n        <span class=\"hljs-attr\">src:</span> <span class=\"hljs-string\">nginx.conf.j2</span>\n        <span class=\"hljs-attr\">dest:</span> <span class=\"hljs-string\">/etc/nginx/sites-available/default</span>\n      <span class=\"hljs-attr\">notify:</span> <span class=\"hljs-string\">restart</span> <span class=\"hljs-string\">nginx</span>\n\n  <span class=\"hljs-attr\">handlers:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">restart</span> <span class=\"hljs-string\">nginx</span>\n      <span class=\"hljs-attr\">service:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">restarted</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1161,1186"}},{"content":"<pre data-lines=\"1187,1196\"><code class=\"language-jinja\"><span class=\"language-xml\">server {\n    listen 80;\n    server_name </span><span class=\"hljs-template-variable\">{{ server_name }}</span><span class=\"language-xml\">;\n    location / {\n        proxy_pass http://localhost:3000;\n    }\n}\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1187,1196"}}],"payload":{"tag":"h2","lines":"1160,1161"}},{"content":"Esercizio 1: Scrivi un playbook che crea un utente con un gruppo specifico, usando variabili e condizioni.","children":[],"payload":{"tag":"h2","lines":"1196,1197"}},{"content":"Esempio pratico 2: Gestione errori con block e rescue","children":[{"content":"<pre data-lines=\"1198,1214\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Example</span> <span class=\"hljs-string\">error</span> <span class=\"hljs-string\">handling</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">block:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Command</span> <span class=\"hljs-string\">that</span> <span class=\"hljs-string\">fails</span>\n          <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">/bin/false</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Should</span> <span class=\"hljs-string\">not</span> <span class=\"hljs-string\">run</span> <span class=\"hljs-string\">if</span> <span class=\"hljs-string\">above</span> <span class=\"hljs-string\">fails</span>\n          <span class=\"hljs-attr\">debug:</span>\n            <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;This won&apos;t run&quot;</span>\n      <span class=\"hljs-attr\">rescue:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Handle</span> <span class=\"hljs-string\">failure</span>\n          <span class=\"hljs-attr\">debug:</span>\n            <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Something went wrong, handling it&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1198,1214"}}],"payload":{"tag":"h2","lines":"1197,1198"}},{"content":"Esercizio 2: Modifica l&#x2019;esempio sopra per registrare l&#x2019;output del comando fallito e usarlo nel rescue.","children":[],"payload":{"tag":"h2","lines":"1214,1215"}}],"payload":{"tag":"h1","lines":"1159,1160"}},{"content":"Capitoli Avanzati","children":[{"content":"Capitolo 9: Gestione Inventario Dinamico","children":[{"content":"<pre data-lines=\"1217,1237\"><code class=\"language-markdown\"><span class=\"hljs-section\"># Capitolo 9: Gestione Inventario Dinamico</span>\n\n<span class=\"hljs-section\">## Cos&#x2019;&#xe8; l&#x2019;inventario dinamico?</span>\n\nInvece di una lista statica di host, l&#x2019;inventario pu&#xf2; essere generato al volo da script, API o cloud provider.\n\n<span class=\"hljs-section\">## Esempio: Script inventario JSON</span>\n\n<span class=\"hljs-code\">```bash\n#!/bin/bash\ncat &lt;&lt;EOF\n{\n  &quot;all&quot;: {\n    &quot;hosts&quot;: [&quot;host1.example.com&quot;, &quot;host2.example.com&quot;],\n    &quot;vars&quot;: {&quot;ansible_user&quot;: &quot;admin&quot;}\n  }\n}\nEOF\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1217,1237"}},{"content":"<pre data-lines=\"1240,1243\"><code class=\"language-bash\">ansible-inventory -i dynamic_inventory.sh --list\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1240,1243"}}],"payload":{"tag":"h2","lines":"1216,1217"}},{"content":"Cloud provider","children":[],"payload":{"tag":"h2","lines":"1244,1245"}},{"content":"Vantaggi","children":[{"content":"Automatizza il reperimento degli host","children":[],"payload":{"tag":"li","lines":"1252,1253"}},{"content":"Sempre aggiornato","children":[],"payload":{"tag":"li","lines":"1253,1254"}},{"content":"Si integra con ambienti cloud e container","children":[],"payload":{"tag":"li","lines":"1254,1256"}}],"payload":{"tag":"h2","lines":"1250,1251"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"1265,1300\"><code data-lines=\"1265,1300\"><span class=\"hljs-comment\">## Capitolo 10: Sviluppo di Moduli Personalizzati</span>\n```markdown\n<span class=\"hljs-comment\"># Capitolo 10: Sviluppo di Moduli Personalizzati</span>\n\n<span class=\"hljs-comment\">## Perch&#xe9; sviluppare moduli?</span>\n\nQuando i moduli ufficiali non soddisfano i requisiti, si pu&#xf2; estendere Ansible con moduli custom.\n\n<span class=\"hljs-comment\">## Struttura base di un modulo in Python</span>\n\n```python\n<span class=\"hljs-comment\">#!/usr/bin/python</span>\n<span class=\"hljs-keyword\">from</span> ansible.module_utils.basic <span class=\"hljs-keyword\">import</span> AnsibleModule\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">main</span>():\n    module_args = <span class=\"hljs-built_in\">dict</span>(\n        name=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, required=<span class=\"hljs-literal\">True</span>),\n        state=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, choices=[<span class=\"hljs-string\">&apos;present&apos;</span>, <span class=\"hljs-string\">&apos;absent&apos;</span>], default=<span class=\"hljs-string\">&apos;present&apos;</span>)\n    )\n    module = AnsibleModule(argument_spec=module_args, supports_check_mode=<span class=\"hljs-literal\">True</span>)\n    name = module.params[<span class=\"hljs-string\">&apos;name&apos;</span>]\n    state = module.params[<span class=\"hljs-string\">&apos;state&apos;</span>]\n    result = <span class=\"hljs-built_in\">dict</span>(changed=<span class=\"hljs-literal\">False</span>, original_name=name)\n    <span class=\"hljs-keyword\">if</span> state == <span class=\"hljs-string\">&apos;present&apos;</span>:\n        <span class=\"hljs-comment\"># Logica per creare risorsa</span>\n        result[<span class=\"hljs-string\">&apos;changed&apos;</span>] = <span class=\"hljs-literal\">True</span>\n        result[<span class=\"hljs-string\">&apos;message&apos;</span>] = <span class=\"hljs-string\">f&quot;Resource <span class=\"hljs-subst\">{name}</span> created.&quot;</span>\n    <span class=\"hljs-keyword\">else</span>:\n        <span class=\"hljs-comment\"># Logica per rimuovere risorsa</span>\n        result[<span class=\"hljs-string\">&apos;changed&apos;</span>] = <span class=\"hljs-literal\">True</span>\n        result[<span class=\"hljs-string\">&apos;message&apos;</span>] = <span class=\"hljs-string\">f&quot;Resource <span class=\"hljs-subst\">{name}</span> removed.&quot;</span>\n    module.exit_json(**result)\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1265,1300"}}],"payload":{"tag":"h2","lines":"1258,1259"}},{"content":"Testare il modulo","children":[{"content":"<pre data-lines=\"1305,1313\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Test</span> <span class=\"hljs-string\">custom</span> <span class=\"hljs-string\">module</span>\n      <span class=\"hljs-attr\">my_module:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">test</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1305,1313"}}],"payload":{"tag":"h2","lines":"1301,1302"}},{"content":"Best Practice","children":[{"content":"Supportare <code>check_mode</code> per idempotenza","children":[],"payload":{"tag":"li","lines":"1316,1317"}},{"content":"Gestire errori con <code>module.fail_json()</code>","children":[],"payload":{"tag":"li","lines":"1317,1318"}},{"content":"Documentare i parametri","children":[],"payload":{"tag":"li","lines":"1318,1320"}}],"payload":{"tag":"h2","lines":"1314,1315"}},{"content":"Nota","children":[{"content":"<pre data-lines=\"1328,1335\"><code data-lines=\"1328,1335\"><span class=\"hljs-section\"># Posso proseguire con:</span>\n<span class=\"hljs-bullet\">-</span> Capitolo 11: Gestione avanzata variabili e facts\n<span class=\"hljs-bullet\">-</span> Capitolo 12: Strategie di deployment avanzate\n<span class=\"hljs-bullet\">-</span> Esempi di playbook reali\n<span class=\"hljs-bullet\">-</span> Laboratori pratici con soluzioni\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1328,1335"}}],"payload":{"tag":"h2","lines":"1322,1323"}}],"payload":{"tag":"h1","lines":"1215,1216"}},{"content":"Capitolo 11: Gestione avanzata variabili e facts","children":[{"content":"Accesso ai facts","children":[{"content":"<pre data-lines=\"1377,1381\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">debug:</span>\n    <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Hostname is <span class=\"hljs-template-variable\">{{ ansible_facts.ansible_hostname }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1377,1381"}}],"payload":{"tag":"h2","lines":"1375,1376"}},{"content":"Variabili complesse","children":[{"content":"<pre data-lines=\"1383,1391\"><code class=\"language-yaml\"><span class=\"hljs-attr\">vars:</span>\n  <span class=\"hljs-attr\">users:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">alice</span>\n      <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">/bin/bash</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">bob</span>\n      <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">/bin/zsh</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1383,1391"}},{"content":"<pre data-lines=\"1392,1399\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Create</span> <span class=\"hljs-string\">users</span>\n  <span class=\"hljs-attr\">user:</span>\n    <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.name }}</span>&quot;</span>\n    <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.shell }}</span>&quot;</span>\n  <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ users }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1392,1399"}}],"payload":{"tag":"h2","lines":"1381,1382"}},{"content":"Variabili dinamiche con <code>set_fact</code>","children":[{"content":"<pre data-lines=\"1401,1405\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">set_fact:</span>\n    <span class=\"hljs-attr\">my_dynamic_var:</span> <span class=\"hljs-string\">&quot;valore calcolato&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1401,1405"}}],"payload":{"tag":"h2","lines":"1399,1400"}},{"content":"Gestione scope variabili","children":[{"content":"Variabili definite in un ruolo sono isolate a quel ruolo","children":[],"payload":{"tag":"li","lines":"1406,1407"}},{"content":"Variabili di playbook sono visibili a tutto il play","children":[],"payload":{"tag":"li","lines":"1407,1408"}},{"content":"Evitare conflitti di nomi per mantenere pulito il contesto","children":[],"payload":{"tag":"li","lines":"1408,1409"}}],"payload":{"tag":"h2","lines":"1405,1406"}},{"content":"Esercizio","children":[{"content":"Blue/Green Deployment","children":[],"payload":{"tag":"h3","lines":"1432,1433"}}],"payload":{"tag":"h2","lines":"1409,1410"}},{"content":"Gestione rollback","children":[{"content":"<pre data-lines=\"1438,1446\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">block:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">applicazione</span>\n      <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">./deploy.sh</span>\n  <span class=\"hljs-attr\">rescue:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Rollback</span> <span class=\"hljs-string\">deploy</span>\n      <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">./rollback.sh</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1438,1446"}}],"payload":{"tag":"h2","lines":"1435,1436"}},{"content":"Uso di tags","children":[{"content":"<pre data-lines=\"1448,1451\"><code class=\"language-bash\">ansible-playbook playbook.yml --tags <span class=\"hljs-string\">&quot;deploy&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1448,1451"}}],"payload":{"tag":"h2","lines":"1446,1447"}},{"content":"Gestione segreti","children":[],"payload":{"tag":"h2","lines":"1451,1452"}},{"content":"Esercizio","children":[{"content":"<pre data-lines=\"1456,1496\"><code data-lines=\"1456,1496\">\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-comment\"># Esempi di Playbook Reali</span>\n\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-comment\">## Esempio: Setup di un server web completo</span>\n\n<span class=\"hljs-string\">```yaml</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Setup</span> <span class=\"hljs-string\">webserver</span> <span class=\"hljs-string\">completo</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">webservers</span>\n  <span class=\"hljs-attr\">vars_files:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">secrets.yml</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Installare</span> <span class=\"hljs-string\">Nginx</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">Git</span>\n      <span class=\"hljs-attr\">apt:</span>\n        <span class=\"hljs-attr\">name:</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">nginx</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">git</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n      <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Configurare</span> <span class=\"hljs-string\">sito</span> <span class=\"hljs-string\">web</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">template</span>\n      <span class=\"hljs-attr\">template:</span>\n        <span class=\"hljs-attr\">src:</span> <span class=\"hljs-string\">site.conf.j2</span>\n        <span class=\"hljs-attr\">dest:</span> <span class=\"hljs-string\">/etc/nginx/sites-available/site.conf</span>\n      <span class=\"hljs-attr\">notify:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">reload</span> <span class=\"hljs-string\">nginx</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Clonare</span> <span class=\"hljs-string\">repository</span> <span class=\"hljs-string\">sito</span>\n      <span class=\"hljs-attr\">git:</span>\n        <span class=\"hljs-attr\">repo:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ repo_url }}</span>&quot;</span>\n        <span class=\"hljs-attr\">dest:</span> <span class=\"hljs-string\">/var/www/html</span>\n        <span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">master</span>\n  <span class=\"hljs-attr\">handlers:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">reload</span> <span class=\"hljs-string\">nginx</span>\n      <span class=\"hljs-attr\">service:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">reloaded</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1456,1496"}}],"payload":{"tag":"h2","lines":"1453,1454"}}],"payload":{"tag":"h1","lines":"1349,1350"}},{"content":"Laboratori Pratici con Soluzioni","children":[{"content":"Laboratorio 1: Installare e configurare un servizio","children":[{"content":"Soluzione","children":[{"content":"<pre data-lines=\"1515,1550\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">Docker</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">nginx</span> <span class=\"hljs-string\">container</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">all</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Installare</span> <span class=\"hljs-string\">dipendenze</span>\n      <span class=\"hljs-attr\">apt:</span>\n        <span class=\"hljs-attr\">name:</span> [<span class=\"hljs-string\">&apos;apt-transport-https&apos;</span>, <span class=\"hljs-string\">&apos;ca-certificates&apos;</span>, <span class=\"hljs-string\">&apos;curl&apos;</span>, <span class=\"hljs-string\">&apos;software-properties-common&apos;</span>]\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Aggiungere</span> <span class=\"hljs-string\">chiave</span> <span class=\"hljs-string\">GPG</span> <span class=\"hljs-string\">Docker</span>\n      <span class=\"hljs-attr\">apt_key:</span>\n        <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">https://download.docker.com/linux/ubuntu/gpg</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Aggiungere</span> <span class=\"hljs-string\">repository</span> <span class=\"hljs-string\">Docker</span>\n      <span class=\"hljs-attr\">apt_repository:</span>\n        <span class=\"hljs-attr\">repo:</span> <span class=\"hljs-string\">deb</span> [<span class=\"hljs-string\">arch=amd64</span>] <span class=\"hljs-string\">https://download.docker.com/linux/ubuntu</span> <span class=\"hljs-string\">focal</span> <span class=\"hljs-string\">stable</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Installare</span> <span class=\"hljs-string\">Docker</span>\n      <span class=\"hljs-attr\">apt:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">docker-ce</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n        <span class=\"hljs-attr\">update_cache:</span> <span class=\"hljs-literal\">yes</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Aggiungere</span> <span class=\"hljs-string\">utente</span> <span class=\"hljs-string\">corrente</span> <span class=\"hljs-string\">al</span> <span class=\"hljs-string\">gruppo</span> <span class=\"hljs-string\">docker</span>\n      <span class=\"hljs-attr\">user:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ ansible_user }}</span>&quot;</span>\n        <span class=\"hljs-attr\">groups:</span> <span class=\"hljs-string\">docker</span>\n        <span class=\"hljs-attr\">append:</span> <span class=\"hljs-literal\">yes</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Avviare</span> <span class=\"hljs-string\">container</span> <span class=\"hljs-string\">nginx</span>\n      <span class=\"hljs-attr\">docker_container:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">nginx</span>\n        <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx:latest</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n        <span class=\"hljs-attr\">ports:</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;80:80&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1515,1550"}}],"payload":{"tag":"h3","lines":"1513,1514"}}],"payload":{"tag":"h2","lines":"1503,1504"}}],"payload":{"tag":"h1","lines":"1499,1500"}},{"content":"Laboratori Pratici Aggiuntivi","children":[{"content":"Laboratorio 2: Gestione utenti e gruppi","children":[{"content":"<pre data-lines=\"1571,1616\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Gestione</span> <span class=\"hljs-string\">utenti</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">gruppi</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">all</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">users:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">alice</span>\n        <span class=\"hljs-attr\">groups:</span> <span class=\"hljs-string\">sudo,developers</span>\n        <span class=\"hljs-attr\">ssh_key:</span> <span class=\"hljs-string\">&quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC...&quot;</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">bob</span>\n        <span class=\"hljs-attr\">groups:</span> <span class=\"hljs-string\">developers</span>\n        <span class=\"hljs-attr\">ssh_key:</span> <span class=\"hljs-string\">&quot;ssh-rsa AAAAB3NzaC1yc2EAAAADAQABAAABAQC...&quot;</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Creare</span> <span class=\"hljs-string\">gruppi</span>\n      <span class=\"hljs-attr\">group:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item }}</span>&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n      <span class=\"hljs-attr\">loop:</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">sudo</span>\n        <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">developers</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Creare</span> <span class=\"hljs-string\">utenti</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">gruppi</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">password</span>\n      <span class=\"hljs-attr\">user:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.name }}</span>&quot;</span>\n        <span class=\"hljs-attr\">groups:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.groups }}</span>&quot;</span>\n        <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ &apos;password123&apos; | password_hash(&apos;sha512&apos;) }}</span>&quot;</span>\n        <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">/bin/bash</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ users }}</span>&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Creare</span> <span class=\"hljs-string\">directory</span> <span class=\"hljs-string\">.ssh</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">ogni</span> <span class=\"hljs-string\">utente</span>\n      <span class=\"hljs-attr\">file:</span>\n        <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">&quot;/home/<span class=\"hljs-template-variable\">{{ item.name }}</span>/.ssh&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">directory</span>\n        <span class=\"hljs-attr\">mode:</span> <span class=\"hljs-string\">&quot;0700&quot;</span>\n        <span class=\"hljs-attr\">owner:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.name }}</span>&quot;</span>\n        <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.name }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ users }}</span>&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Aggiungere</span> <span class=\"hljs-string\">chiave</span> <span class=\"hljs-string\">pubblica</span> <span class=\"hljs-string\">ssh</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">ogni</span> <span class=\"hljs-string\">utente</span>\n      <span class=\"hljs-attr\">copy:</span>\n        <span class=\"hljs-attr\">content:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.ssh_key }}</span>&quot;</span>\n        <span class=\"hljs-attr\">dest:</span> <span class=\"hljs-string\">&quot;/home/<span class=\"hljs-template-variable\">{{ item.name }}</span>/.ssh/authorized_keys&quot;</span>\n        <span class=\"hljs-attr\">mode:</span> <span class=\"hljs-string\">&quot;0600&quot;</span>\n        <span class=\"hljs-attr\">owner:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.name }}</span>&quot;</span>\n        <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ item.name }}</span>&quot;</span>\n      <span class=\"hljs-attr\">loop:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ users }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1571,1616"}}],"payload":{"tag":"h2","lines":"1567,1568"}},{"content":"Laboratorio 3: Deploy di un&#x2019;applicazione Python con virtualenv","children":[{"content":"<pre data-lines=\"1623,1658\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">Python</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">virtualenv</span>\n  <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">all</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">app_dir:</span> <span class=\"hljs-string\">/opt/myapp</span>\n    <span class=\"hljs-attr\">venv_dir:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ app_dir }}</span>/venv&quot;</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Installare</span> <span class=\"hljs-string\">Python3</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">pip</span>\n      <span class=\"hljs-attr\">apt:</span>\n        <span class=\"hljs-attr\">name:</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">python3</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">python3-pip</span>\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">python3-venv</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n        <span class=\"hljs-attr\">update_cache:</span> <span class=\"hljs-literal\">yes</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Creare</span> <span class=\"hljs-string\">directory</span> <span class=\"hljs-string\">applicazione</span>\n      <span class=\"hljs-attr\">file:</span>\n        <span class=\"hljs-attr\">path:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ app_dir }}</span>&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">directory</span>\n        <span class=\"hljs-attr\">owner:</span> <span class=\"hljs-string\">www-data</span>\n        <span class=\"hljs-attr\">group:</span> <span class=\"hljs-string\">www-data</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Creare</span> <span class=\"hljs-string\">virtualenv</span>\n      <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">python3</span> <span class=\"hljs-string\">-m</span> <span class=\"hljs-string\">venv</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ venv_dir }}</span>&quot;</span>\n      <span class=\"hljs-attr\">args:</span>\n        <span class=\"hljs-attr\">creates:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ venv_dir }}</span>/bin/activate&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Installare</span> <span class=\"hljs-string\">dipendenze</span> <span class=\"hljs-string\">Python</span>\n      <span class=\"hljs-attr\">pip:</span>\n        <span class=\"hljs-attr\">requirements:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ app_dir }}</span>/requirements.txt&quot;</span>\n        <span class=\"hljs-attr\">virtualenv:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ venv_dir }}</span>&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Avviare</span> <span class=\"hljs-string\">app</span> <span class=\"hljs-string\">(esempio</span> <span class=\"hljs-string\">semplice)</span>\n      <span class=\"hljs-attr\">shell:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ venv_dir }}</span>/bin/python <span class=\"hljs-template-variable\">{{ app_dir }}</span>/app.py &amp;&quot;</span>\n      <span class=\"hljs-attr\">args:</span>\n        <span class=\"hljs-attr\">chdir:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ app_dir }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1623,1658"}}],"payload":{"tag":"h2","lines":"1619,1620"}}],"payload":{"tag":"h1","lines":"1563,1564"}},{"content":"Approfondimenti: Callback Plugin","children":[{"content":"Cosa sono i callback plugin?","children":[],"payload":{"tag":"h2","lines":"1665,1666"}},{"content":"Uso pratico","children":[{"content":"Inviare notifiche Slack al completamento di un playbook","children":[],"payload":{"tag":"li","lines":"1675,1676"}},{"content":"Salvare i log in un database esterno","children":[],"payload":{"tag":"li","lines":"1676,1677"}},{"content":"Visualizzare output personalizzato in tempo reale","children":[],"payload":{"tag":"li","lines":"1677,1679"}}],"payload":{"tag":"h2","lines":"1671,1672"}},{"content":"Esempio: Callback plugin base (in Python)","children":[{"content":"<pre data-lines=\"1683,1695\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;TASK OK on <span class=\"hljs-subst\">{host}</span>: <span class=\"hljs-subst\">{task}</span>&quot;</span>)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_failed</span>(<span class=\"hljs-params\">self, result, ignore_errors=<span class=\"hljs-literal\">False</span></span>):\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;TASK FAILED on <span class=\"hljs-subst\">{host}</span>: <span class=\"hljs-subst\">{task}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1683,1695"}}],"payload":{"tag":"h2","lines":"1681,1682"}},{"content":"Come usarlo?","children":[{"content":"Posiziona il file <code>.py</code> in una cartella <code>callback_plugins/</code> nel progetto","children":[],"payload":{"tag":"li","lines":"1700,1701"}},{"content":"Setta la variabile d&#x2019;ambiente <code>ANSIBLE_CALLBACK_PLUGINS</code> per puntare alla cartella","children":[],"payload":{"tag":"li","lines":"1701,1702"}},{"content":"Esegui il playbook, il plugin verr&#xe0; caricato automaticamente","children":[],"payload":{"tag":"li","lines":"1702,1704"}}],"payload":{"tag":"h2","lines":"1698,1699"}}],"payload":{"tag":"h1","lines":"1661,1662"}},{"content":"Approfondimenti: Template Jinja2 Avanzati","children":[{"content":"Uso base","children":[{"content":"<pre data-lines=\"1714,1719\"><code class=\"language-yaml\"><span class=\"hljs-attr\">template:</span>\n  <span class=\"hljs-attr\">src:</span> <span class=\"hljs-string\">nginx.conf.j2</span>\n  <span class=\"hljs-attr\">dest:</span> <span class=\"hljs-string\">/etc/nginx/nginx.conf</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1714,1719"}}],"payload":{"tag":"h2","lines":"1710,1711"}},{"content":"Filtri utili","children":[{"content":"<code>{{ var | default(&apos;valore&apos;) }}</code> &#x2014; valore di fallback","children":[],"payload":{"tag":"li","lines":"1724,1725"}},{"content":"<code>{{ lista | join(&apos;, &apos;) }}</code> &#x2014; unisce lista con separatore","children":[],"payload":{"tag":"li","lines":"1725,1726"}},{"content":"<code>{{ testo | upper }}</code> &#x2014; maiuscole","children":[],"payload":{"tag":"li","lines":"1726,1728"}}],"payload":{"tag":"h2","lines":"1722,1723"}},{"content":"Controlli di flusso","children":[{"content":"<pre data-lines=\"1732,1739\"><code class=\"language-jinja\"><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span> ansible_os_family == &quot;Debian&quot; %}</span><span class=\"language-xml\">\n  # Configurazione specifica Debian\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">else</span></span> %}</span><span class=\"language-xml\">\n  # Altri OS\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span> %}</span><span class=\"language-xml\">\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1732,1739"}}],"payload":{"tag":"h2","lines":"1730,1731"}},{"content":"Cicli","children":[{"content":"<pre data-lines=\"1744,1749\"><code class=\"language-jinja\"><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">for</span></span> utente <span class=\"hljs-keyword\">in</span> users %}</span><span class=\"language-xml\">\nuseradd </span><span class=\"hljs-template-variable\">{{ utente.name }}</span><span class=\"language-xml\">\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endfor</span></span> %}</span><span class=\"language-xml\">\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1744,1749"}}],"payload":{"tag":"h2","lines":"1742,1743"}},{"content":"Esempio avanzato: template nginx","children":[{"content":"<pre data-lines=\"1754,1768\"><code class=\"language-jinja\"><span class=\"language-xml\">server {\n  listen 80;\n  server_name </span><span class=\"hljs-template-variable\">{{ domain_name }}</span><span class=\"language-xml\">;\n  location / {\n    proxy_pass http://</span><span class=\"hljs-template-variable\">{{ backend_ip }}</span><span class=\"language-xml\">:</span><span class=\"hljs-template-variable\">{{ backend_port }}</span><span class=\"language-xml\">;\n  }\n  </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span> enable_ssl %}</span><span class=\"language-xml\">\n  listen 443 ssl;\n  ssl_certificate /etc/ssl/certs/</span><span class=\"hljs-template-variable\">{{ domain_name }}</span><span class=\"language-xml\">.crt;\n  ssl_certificate_key /etc/ssl/private/</span><span class=\"hljs-template-variable\">{{ domain_name }}</span><span class=\"language-xml\">.key;\n  </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span> %}</span><span class=\"language-xml\">\n}\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1754,1768"}}],"payload":{"tag":"h2","lines":"1752,1753"}},{"content":"Esercizio","children":[{"content":"Gestione inventario dinamico","children":[],"payload":{"tag":"li","lines":"1779,1780"}},{"content":"Scrittura moduli personalizzati","children":[],"payload":{"tag":"li","lines":"1780,1781"}},{"content":"Integrazione con sistemi esterni via plugin","children":[],"payload":{"tag":"li","lines":"1781,1783"}}],"payload":{"tag":"h2","lines":"1771,1772"}},{"content":"Prossimi laboratori/pratiche","children":[{"content":"1. \n<p data-lines=\"1795,1798\"><strong>Gestione inventario dinamico</strong><br>\n<em>Come usare script, plugin o API per popolare dinamicamente l&#x2019;inventario di Ansible</em><br>\n&#x2014; Con esempi su AWS EC2, DigitalOcean, o file JSON dinamici.</p>","children":[],"payload":{"tag":"li","lines":"1795,1799","listIndex":1}},{"content":"2. \n<p data-lines=\"1799,1802\"><strong>Scrittura moduli personalizzati</strong><br>\n<em>Come estendere Ansible con moduli Python custom</em><br>\n&#x2014; Spiegazione API moduli, gestione input/output, idempotenza.</p>","children":[],"payload":{"tag":"li","lines":"1799,1803","listIndex":2}},{"content":"3. \n<p data-lines=\"1803,1806\"><strong>Callback plugin avanzati</strong><br>\n<em>Notifiche, logging esteso, integrazione con sistemi esterni</em><br>\n&#x2014; Plugin per Slack, webhook, archiviazione DB.</p>","children":[],"payload":{"tag":"li","lines":"1803,1807","listIndex":3}},{"content":"4. \n<p data-lines=\"1807,1810\"><strong>Template avanzati e filtri Jinja2 personalizzati</strong><br>\n<em>Creazione di filtri personalizzati, macro e blocchi</em><br>\n&#x2014; Esempi pratici per gestire configurazioni complesse.</p>","children":[],"payload":{"tag":"li","lines":"1807,1811","listIndex":4}},{"content":"5. \n<p data-lines=\"1811,1814\"><strong>Gestione errori e strategie di retry</strong><br>\n<em>Come gestire errori e fallback senza introdurre logica imperativa</em><br>\n&#x2014; Uso di <code>ignore_errors</code>, <code>rescue</code>, <code>always</code>.</p>","children":[],"payload":{"tag":"li","lines":"1811,1815","listIndex":5}},{"content":"6. \n<p data-lines=\"1815,1818\"><strong>Integrazione con CI/CD (GitHub Actions, OpenTofu)</strong><br>\n<em>Come integrare playbook in pipeline di automazione</em><br>\n&#x2014; Esempi di workflow e best practice.</p>","children":[],"payload":{"tag":"li","lines":"1815,1819","listIndex":6}}],"payload":{"tag":"h2","lines":"1793,1794"}}],"payload":{"tag":"h1","lines":"1706,1707"}},{"content":"Introduzione ai moduli avanzati di Ansible con esempi pratici","children":[{"content":"1. Gestione inventario dinamico","children":[{"content":"<pre data-lines=\"1855,1858\"><code class=\"language-bash\">ansible-inventory -i ec2.py --list\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1855,1858"}},{"content":"<pre data-lines=\"1861,1868\"><code class=\"language-yaml\"><span class=\"hljs-attr\">plugin:</span> <span class=\"hljs-string\">aws_ec2</span>\n<span class=\"hljs-attr\">regions:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">us-east-1</span>\n<span class=\"hljs-attr\">filters:</span>\n  <span class=\"hljs-attr\">tag:Environment:</span> <span class=\"hljs-string\">production</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1861,1868"}}],"payload":{"tag":"h2","lines":"1843,1844"}},{"content":"2. Sviluppo moduli personalizzati","children":[{"content":"<pre data-lines=\"1878,1902\"><code class=\"language-python\"><span class=\"hljs-comment\">#!/usr/bin/python</span>\n<span class=\"hljs-keyword\">from</span> ansible.module_utils.basic <span class=\"hljs-keyword\">import</span> AnsibleModule\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">main</span>():\n    module = AnsibleModule(\n        argument_spec=<span class=\"hljs-built_in\">dict</span>(\n            name=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, required=<span class=\"hljs-literal\">True</span>),\n            state=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, choices=[<span class=\"hljs-string\">&apos;present&apos;</span>, <span class=\"hljs-string\">&apos;absent&apos;</span>], default=<span class=\"hljs-string\">&apos;present&apos;</span>)\n        )\n    )\n    name = module.params[<span class=\"hljs-string\">&apos;name&apos;</span>]\n    state = module.params[<span class=\"hljs-string\">&apos;state&apos;</span>]\n    <span class=\"hljs-comment\"># Logica idempotente simulata</span>\n    changed = <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-keyword\">if</span> state == <span class=\"hljs-string\">&apos;present&apos;</span>:\n        <span class=\"hljs-comment\"># implementa la creazione</span>\n        changed = <span class=\"hljs-literal\">True</span>\n    <span class=\"hljs-keyword\">else</span>:\n        <span class=\"hljs-comment\"># implementa la rimozione</span>\n        changed = <span class=\"hljs-literal\">True</span>\n    module.exit_json(changed=changed, msg=<span class=\"hljs-string\">f&quot;Resource <span class=\"hljs-subst\">{name}</span> is <span class=\"hljs-subst\">{state}</span>&quot;</span>)\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1878,1902"}}],"payload":{"tag":"h2","lines":"1871,1872"}},{"content":"3. Callback plugin avanzati","children":[{"content":"<pre data-lines=\"1912,1919\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        msg = <span class=\"hljs-string\">f&quot;Task <span class=\"hljs-subst\">{result.task_name}</span> eseguito con successo su <span class=\"hljs-subst\">{result._host}</span>&quot;</span>\n        <span class=\"hljs-comment\"># codice per inviare a Slack via webhook</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1912,1919"}}],"payload":{"tag":"h2","lines":"1905,1906"}},{"content":"4. Template avanzati e filtri Jinja2","children":[{"content":"<pre data-lines=\"1929,1936\"><code class=\"language-python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">reverse_string</span>(<span class=\"hljs-params\">value</span>):\n    <span class=\"hljs-keyword\">return</span> value[::-<span class=\"hljs-number\">1</span>]\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FilterModule</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">filters</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&apos;reverse&apos;</span>: reverse_string}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1929,1936"}},{"content":"<pre data-lines=\"1939,1942\"><code class=\"language-jinja\"><span class=\"hljs-template-variable\">{{ &quot;ciao&quot; | reverse }}</span><span class=\"language-xml\">  # &quot;oaic&quot;\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"1939,1942"}}],"payload":{"tag":"h2","lines":"1922,1923"}},{"content":"5. Gestione errori e retry","children":[{"content":"<pre data-lines=\"1952,1962\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Copia</span> <span class=\"hljs-string\">file</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">retry</span>\n  <span class=\"hljs-attr\">copy:</span>\n    <span class=\"hljs-attr\">src:</span> <span class=\"hljs-string\">file.txt</span>\n    <span class=\"hljs-attr\">dest:</span> <span class=\"hljs-string\">/tmp/file.txt</span>\n  <span class=\"hljs-attr\">retries:</span> <span class=\"hljs-number\">3</span>\n  <span class=\"hljs-attr\">delay:</span> <span class=\"hljs-number\">5</span>\n  <span class=\"hljs-attr\">until:</span> <span class=\"hljs-string\">result</span> <span class=\"hljs-string\">is</span> <span class=\"hljs-string\">succeeded</span>\n  <span class=\"hljs-attr\">register:</span> <span class=\"hljs-string\">result</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1952,1962"}},{"content":"<pre data-lines=\"1965,1975\"><code class=\"language-yaml\"><span class=\"hljs-attr\">tasks:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">block:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Comando</span> <span class=\"hljs-string\">che</span> <span class=\"hljs-string\">pu&#xf2;</span> <span class=\"hljs-string\">fallire</span>\n        <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">/bin/false</span>\n    <span class=\"hljs-attr\">rescue:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Task</span> <span class=\"hljs-string\">alternativo</span>\n        <span class=\"hljs-attr\">debug:</span>\n          <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;Comando fallito, eseguo azione di fallback&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1965,1975"}}],"payload":{"tag":"h2","lines":"1945,1946"}},{"content":"6. Integrazione CI/CD (GitHub Actions / OpenTofu)","children":[{"content":"<pre data-lines=\"1985,1996\"><code class=\"language-yaml\"><span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">deploy:</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v3</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Run</span> <span class=\"hljs-string\">Ansible</span> <span class=\"hljs-string\">Playbook</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">dawidd6/action-ansible-playbook@v2</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">playbook:</span> <span class=\"hljs-string\">deploy.yml</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1985,1996"}}],"payload":{"tag":"h2","lines":"1978,1979"}}],"payload":{"tag":"h1","lines":"1839,1840"}},{"content":"Prossimo step: contenuti dettagliati","children":[{"content":"Introduzione teorica","children":[],"payload":{"tag":"li","lines":"2005,2006"}},{"content":"Spiegazioni tecniche dettagliate","children":[],"payload":{"tag":"li","lines":"2006,2007"}},{"content":"Esempi pratici commentati","children":[],"payload":{"tag":"li","lines":"2007,2008"}},{"content":"Esercizi e suggerimenti di approfondimento","children":[],"payload":{"tag":"li","lines":"2008,2010"}}],"payload":{"tag":"h1","lines":"2001,2002"}},{"content":"Capitolo: Plugin in Ansible &#x2014; Focus su Callback Plugin e oltre","children":[{"content":"1. Introduzione ai Plugin in Ansible","children":[{"content":"Tipologie principali di plugin:","children":[{"content":"<table data-lines=\"2030,2038\">\n<thead data-lines=\"2030,2031\">\n<tr data-lines=\"2030,2031\">\n<th>Tipo plugin</th>\n<th>Descrizione</th>\n<th>Esempio uso</th>\n</tr>\n</thead>\n<tbody data-lines=\"2032,2038\">\n<tr data-lines=\"2032,2033\">\n<td><strong>Callback</strong></td>\n<td>Reagisce a eventi runtime (task started, finished, error) per logging, notifiche, statistiche.</td>\n<td>Notifica Slack, output personalizzato.</td>\n</tr>\n<tr data-lines=\"2033,2034\">\n<td><strong>Connection</strong></td>\n<td>Gestisce come Ansible si connette agli host (ssh, local, docker).</td>\n<td>Connessione SSH o connessione Docker.</td>\n</tr>\n<tr data-lines=\"2034,2035\">\n<td><strong>Lookup</strong></td>\n<td>Recupera dati da fonti esterne (file, database, API).</td>\n<td>Lettura variabili da file JSON.</td>\n</tr>\n<tr data-lines=\"2035,2036\">\n<td><strong>Filter</strong></td>\n<td>Funzioni per manipolare dati in Jinja2 templates.</td>\n<td>Custom filter per trasformazioni stringa.</td>\n</tr>\n<tr data-lines=\"2036,2037\">\n<td><strong>Strategy</strong></td>\n<td>Controlla come vengono eseguiti i task (parallelismo, serializzazione).</td>\n<td>Linear, Free strategy.</td>\n</tr>\n<tr data-lines=\"2037,2038\">\n<td><strong>Action</strong></td>\n<td>Definisce il comportamento di un modulo durante l&#x2019;esecuzione.</td>\n<td>Moduli personalizzati avanzati.</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"2030,2038"}}],"payload":{"tag":"h3","lines":"2028,2029"}}],"payload":{"tag":"h2","lines":"2024,2025"}},{"content":"2. Focus: Callback Plugin","children":[{"content":"2.1 Cosa sono i Callback Plugin?","children":[{"content":"L&#x2019;output a video o su file (logging)","children":[],"payload":{"tag":"li","lines":"2047,2048"}},{"content":"Invio notifiche (Slack, email)","children":[],"payload":{"tag":"li","lines":"2048,2049"}},{"content":"Invio metriche a sistemi di monitoring","children":[],"payload":{"tag":"li","lines":"2049,2050"}},{"content":"Azioni custom post-task o post-playbook","children":[],"payload":{"tag":"li","lines":"2050,2052"}}],"payload":{"tag":"h3","lines":"2043,2044"}},{"content":"2.2 Dove si trovano i callback plugin?","children":[{"content":"<pre data-lines=\"2058,2061\"><code data-lines=\"2058,2061\">.<span class=\"hljs-regexp\">/callback_plugins/</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2058,2061"}}],"payload":{"tag":"h3","lines":"2052,2053"}}],"payload":{"tag":"h2","lines":"2041,2042"}},{"content":"3. Come scrivere un Callback Plugin personalizzato","children":[{"content":"3.1 Struttura minima di un callback plugin","children":[{"content":"<pre data-lines=\"2068,2082\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        <span class=\"hljs-comment\"># Quando un task ha successo su un host</span>\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[OK] Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; completato su <span class=\"hljs-subst\">{host}</span>&quot;</span>)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_failed</span>(<span class=\"hljs-params\">self, result, ignore_errors=<span class=\"hljs-literal\">False</span></span>):\n        <span class=\"hljs-comment\"># Quando un task fallisce</span>\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[FAIL] Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; fallito su <span class=\"hljs-subst\">{host}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2068,2082"}}],"payload":{"tag":"h3","lines":"2066,2067"}},{"content":"3.2 Eventi utili da intercettare (metodi comuni)","children":[{"content":"<table data-lines=\"2085,2092\">\n<thead data-lines=\"2085,2086\">\n<tr data-lines=\"2085,2086\">\n<th>Metodo</th>\n<th>Descrizione</th>\n</tr>\n</thead>\n<tbody data-lines=\"2087,2092\">\n<tr data-lines=\"2087,2088\">\n<td><code>v2_playbook_on_start</code></td>\n<td>Quando inizia un playbook</td>\n</tr>\n<tr data-lines=\"2088,2089\">\n<td><code>v2_runner_on_ok</code></td>\n<td>Quando un task finisce con successo</td>\n</tr>\n<tr data-lines=\"2089,2090\">\n<td><code>v2_runner_on_failed</code></td>\n<td>Quando un task fallisce</td>\n</tr>\n<tr data-lines=\"2090,2091\">\n<td><code>v2_runner_on_skipped</code></td>\n<td>Quando un task &#xe8; saltato</td>\n</tr>\n<tr data-lines=\"2091,2092\">\n<td><code>v2_playbook_on_stats</code></td>\n<td>Quando il playbook termina</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"2085,2092"}}],"payload":{"tag":"h3","lines":"2083,2084"}}],"payload":{"tag":"h2","lines":"2064,2065"}},{"content":"4. Esempio pratico: Callback per inviare notifiche Slack","children":[{"content":"<pre data-lines=\"2097,2124\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    CALLBACK_VERSION = <span class=\"hljs-number\">2.0</span>\n    CALLBACK_TYPE = <span class=\"hljs-string\">&apos;notification&apos;</span>\n    CALLBACK_NAME = <span class=\"hljs-string\">&apos;slack_notify&apos;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-built_in\">super</span>(CallbackModule, <span class=\"hljs-variable language_\">self</span>).__init__()\n        <span class=\"hljs-variable language_\">self</span>.webhook_url = <span class=\"hljs-string\">&apos;https://hooks.slack.com/services/XXX/YYY/ZZZ&apos;</span>  <span class=\"hljs-comment\"># Sostituire con il vostro webhook</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host.get_name()\n        task = result.task_name\n        msg = <span class=\"hljs-string\">f&quot;:white_check_mark: Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; completato su <span class=\"hljs-subst\">{host}</span>&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.send_slack(msg)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_failed</span>(<span class=\"hljs-params\">self, result, ignore_errors=<span class=\"hljs-literal\">False</span></span>):\n        host = result._host.get_name()\n        task = result.task_name\n        msg = <span class=\"hljs-string\">f&quot;:x: Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; fallito su <span class=\"hljs-subst\">{host}</span>&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.send_slack(msg)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_slack</span>(<span class=\"hljs-params\">self, message</span>):\n        payload = {<span class=\"hljs-string\">&quot;text&quot;</span>: message}\n        <span class=\"hljs-keyword\">try</span>:\n            requests.post(<span class=\"hljs-variable language_\">self</span>.webhook_url, json=payload)\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-variable language_\">self</span>._display.warning(<span class=\"hljs-string\">f&quot;Errore invio Slack: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2097,2124"}}],"payload":{"tag":"h2","lines":"2095,2096"}},{"content":"5. Installazione e attivazione del plugin","children":[{"content":"<pre data-lines=\"2132,2137\"><code class=\"language-ini\"><span class=\"hljs-section\">[defaults]</span>\n<span class=\"hljs-attr\">callback_plugins</span> = ./callback_plugins\n<span class=\"hljs-attr\">stdout_callback</span> = slack_notify\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2132,2137"}}],"payload":{"tag":"h2","lines":"2127,2128"}},{"content":"6. Esempio avanzato: Callback plugin con logging su file","children":[{"content":"<pre data-lines=\"2142,2162\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">import</span> logging\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    CALLBACK_VERSION = <span class=\"hljs-number\">2.0</span>\n    CALLBACK_TYPE = <span class=\"hljs-string\">&apos;notification&apos;</span>\n    CALLBACK_NAME = <span class=\"hljs-string\">&apos;file_logger&apos;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-built_in\">super</span>().__init__()\n        logging.basicConfig(filename=<span class=\"hljs-string\">&apos;ansible.log&apos;</span>, level=logging.INFO,\n                            <span class=\"hljs-built_in\">format</span>=<span class=\"hljs-string\">&apos;%(asctime)s %(message)s&apos;</span>)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host.get_name()\n        task = result.task_name\n        logging.info(<span class=\"hljs-string\">f&quot;[OK] Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; eseguito su <span class=\"hljs-subst\">{host}</span>&quot;</span>)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_failed</span>(<span class=\"hljs-params\">self, result, ignore_errors=<span class=\"hljs-literal\">False</span></span>):\n        host = result._host.get_name()\n        task = result.task_name\n        logging.error(<span class=\"hljs-string\">f&quot;[FAIL] Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; fallito su <span class=\"hljs-subst\">{host}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2142,2162"}}],"payload":{"tag":"h2","lines":"2140,2141"}},{"content":"7. Altri plugin: brevi cenni","children":[{"content":"<strong>Filter plugin:</strong> si creano estensioni di filtri Jinja2 per manipolare dati.","children":[],"payload":{"tag":"li","lines":"2167,2168"}},{"content":"<strong>Lookup plugin:</strong> per caricare dati da fonti esterne.","children":[],"payload":{"tag":"li","lines":"2168,2169"}},{"content":"<strong>Connection plugin:</strong> per definire nuovi metodi di connessione, es. custom ssh o API.","children":[],"payload":{"tag":"li","lines":"2169,2171"}}],"payload":{"tag":"h2","lines":"2165,2166"}},{"content":"8. Esercizi consigliati","children":[{"content":"<pre data-lines=\"2193,2251\"><code class=\"language-python\"><span class=\"hljs-comment\"># callback_plugins/slack_notify.py</span>\n<span class=\"hljs-string\">&quot;&quot;&quot;\nCallback Plugin Ansible: Slack Notify\nQuesto plugin invia notifiche su Slack per ogni task eseguito da Ansible.\nIn particolare:\n- Invia un messaggio quando un task ha successo (OK)\n- Invia un messaggio quando un task fallisce (FAIL)\nPer usarlo:\n1. Metti questo file nella cartella &apos;callback_plugins&apos; nella root del progetto Ansible\n2. Configura ansible.cfg con:\n   [defaults]\n   callback_plugins = ./callback_plugins\n   stdout_callback = slack_notify\nSostituisci &apos;self.webhook_url&apos; con il tuo webhook Slack personale.\nAutore: ChatGPT\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-comment\"># Versione del callback API</span>\n    CALLBACK_VERSION = <span class=\"hljs-number\">2.0</span>\n    <span class=\"hljs-comment\"># Tipo di callback (notification, stdout, etc.)</span>\n    CALLBACK_TYPE = <span class=\"hljs-string\">&apos;notification&apos;</span>\n    <span class=\"hljs-comment\"># Nome del plugin (usato in ansible.cfg)</span>\n    CALLBACK_NAME = <span class=\"hljs-string\">&apos;slack_notify&apos;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-built_in\">super</span>(CallbackModule, <span class=\"hljs-variable language_\">self</span>).__init__()\n        <span class=\"hljs-comment\"># Inserisci qui il webhook Slack del tuo workspace</span>\n        <span class=\"hljs-variable language_\">self</span>.webhook_url = <span class=\"hljs-string\">&apos;https://hooks.slack.com/services/XXX/YYY/ZZZ&apos;</span>  <span class=\"hljs-comment\"># &lt;== MODIFICA QUI</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Metodo chiamato quando un task viene eseguito con successo.\n        &quot;&quot;&quot;</span>\n        host = result._host.get_name()           <span class=\"hljs-comment\"># Nome host target</span>\n        task = result.task_name                   <span class=\"hljs-comment\"># Nome task</span>\n        msg = <span class=\"hljs-string\">f&quot;:white_check_mark: Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; completato con successo su *<span class=\"hljs-subst\">{host}</span>*&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.send_slack(msg)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_failed</span>(<span class=\"hljs-params\">self, result, ignore_errors=<span class=\"hljs-literal\">False</span></span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Metodo chiamato quando un task fallisce.\n        &quot;&quot;&quot;</span>\n        host = result._host.get_name()\n        task = result.task_name\n        msg = <span class=\"hljs-string\">f&quot;:x: Task &apos;<span class=\"hljs-subst\">{task}</span>&apos; *fallito* su *<span class=\"hljs-subst\">{host}</span>*&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.send_slack(msg)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_slack</span>(<span class=\"hljs-params\">self, message</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Funzione helper per inviare un messaggio a Slack tramite webhook.\n        &quot;&quot;&quot;</span>\n        payload = {<span class=\"hljs-string\">&quot;text&quot;</span>: message}\n        <span class=\"hljs-keyword\">try</span>:\n            response = requests.post(<span class=\"hljs-variable language_\">self</span>.webhook_url, json=payload)\n            response.raise_for_status()\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-comment\"># Usa il display interno di Ansible per mostrare warning in caso di errori</span>\n            <span class=\"hljs-variable language_\">self</span>._display.warning(<span class=\"hljs-string\">f&quot;Errore nell&apos;invio notifica Slack: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2193,2251"}}],"payload":{"tag":"h2","lines":"2173,2174"}}],"payload":{"tag":"h1","lines":"2020,2021"}},{"content":"1. Filter Plugin","children":[{"content":"<pre data-lines=\"2278,2302\"><code class=\"language-python\"><span class=\"hljs-comment\"># filter_plugins/camelcase.py</span>\n<span class=\"hljs-string\">&quot;&quot;&quot;\nFilter Plugin Ansible: CamelCase\nFornisce un filtro Jinja2 chiamato &apos;camelcase&apos; che converte una stringa in camelCase.\nUso nel template/playbook:\n  {{ &quot;ciao mondo&quot; | camelcase }}  =&gt; &quot;ciaoMondo&quot;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FilterModule</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">filters</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-string\">&apos;camelcase&apos;</span>: <span class=\"hljs-variable language_\">self</span>.camelcase_filter\n        }\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">camelcase_filter</span>(<span class=\"hljs-params\">self, value</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Converte una stringa in camelCase.\n        &quot;&quot;&quot;</span>\n        words = value.split()\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> words:\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;&quot;</span>\n        first_word = words[<span class=\"hljs-number\">0</span>].lower()\n        capitalized = [w.capitalize() <span class=\"hljs-keyword\">for</span> w <span class=\"hljs-keyword\">in</span> words[<span class=\"hljs-number\">1</span>:]]\n        <span class=\"hljs-keyword\">return</span> first_word + <span class=\"hljs-string\">&apos;&apos;</span>.join(capitalized)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2278,2302"}}],"payload":{"tag":"h1","lines":"2273,2274"}},{"content":"2. Lookup Plugin","children":[{"content":"<pre data-lines=\"2310,2332\"><code class=\"language-python\"><span class=\"hljs-comment\"># lookup_plugins/httpjson.py</span>\n<span class=\"hljs-string\">&quot;&quot;&quot;\nLookup Plugin Ansible: HTTP JSON\nCarica dati JSON da una URL HTTP.\nUso:\n  - debug:\n      msg: &quot;{{ lookup(&apos;httpjson&apos;, &apos;https://api.example.com/data.json&apos;) }}&quot;\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> ansible.plugins.lookup <span class=\"hljs-keyword\">import</span> LookupBase\n<span class=\"hljs-keyword\">from</span> ansible.errors <span class=\"hljs-keyword\">import</span> AnsibleError\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LookupModule</span>(<span class=\"hljs-title class_ inherited__\">LookupBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self, terms, variables=<span class=\"hljs-literal\">None</span>, **kwargs</span>):\n        url = terms[<span class=\"hljs-number\">0</span>]\n        <span class=\"hljs-keyword\">try</span>:\n            r = requests.get(url)\n            r.raise_for_status()\n            <span class=\"hljs-keyword\">return</span> [r.json()]\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-keyword\">raise</span> AnsibleError(<span class=\"hljs-string\">f&quot;Errore nel caricamento JSON da <span class=\"hljs-subst\">{url}</span>: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2310,2332"}}],"payload":{"tag":"h1","lines":"2305,2306"}},{"content":"3. Connection Plugin","children":[{"content":"<pre data-lines=\"2340,2386\"><code class=\"language-python\"><span class=\"hljs-comment\"># connection_plugins/restapi.py</span>\n<span class=\"hljs-string\">&quot;&quot;&quot;\nConnection Plugin Ansible: REST API\nEsempio base di connessione ad un host tramite API REST.\nPer usare:\nansible_connection: restapi\n&quot;&quot;&quot;</span>\n<span class=\"hljs-keyword\">from</span> ansible.plugins.connection <span class=\"hljs-keyword\">import</span> ConnectionBase\n<span class=\"hljs-keyword\">from</span> ansible.errors <span class=\"hljs-keyword\">import</span> AnsibleConnectionFailure\n<span class=\"hljs-keyword\">import</span> requests\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Connection</span>(<span class=\"hljs-title class_ inherited__\">ConnectionBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, *args, **kwargs</span>):\n        <span class=\"hljs-built_in\">super</span>(Connection, <span class=\"hljs-variable language_\">self</span>).__init__(*args, **kwargs)\n        <span class=\"hljs-variable language_\">self</span>.base_url = <span class=\"hljs-literal\">None</span>\n        <span class=\"hljs-variable language_\">self</span>.session = <span class=\"hljs-literal\">None</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">_connect</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Stabilisce connessione (in questo caso solo inizializza sessione).\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-variable language_\">self</span>.base_url = <span class=\"hljs-variable language_\">self</span>.get_option(<span class=\"hljs-string\">&apos;remote_addr&apos;</span>)  <span class=\"hljs-comment\"># es: https://api.targethost.com</span>\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.base_url:\n            <span class=\"hljs-keyword\">raise</span> AnsibleConnectionFailure(<span class=\"hljs-string\">&quot;URL base mancante per connessione REST&quot;</span>)\n        <span class=\"hljs-variable language_\">self</span>.session = requests.Session()\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">exec_command</span>(<span class=\"hljs-params\">self, cmd, in_data=<span class=\"hljs-literal\">None</span>, sudoable=<span class=\"hljs-literal\">True</span></span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Esegue un comando sulla destinazione tramite API REST (ipotetico).\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable language_\">self</span>.session <span class=\"hljs-keyword\">is</span> <span class=\"hljs-literal\">None</span>:\n            <span class=\"hljs-variable language_\">self</span>._connect()\n        url = <span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{self.base_url}</span>/exec&quot;</span>\n        payload = {<span class=\"hljs-string\">&quot;command&quot;</span>: cmd}\n        <span class=\"hljs-keyword\">try</span>:\n            r = <span class=\"hljs-variable language_\">self</span>.session.post(url, json=payload)\n            r.raise_for_status()\n            <span class=\"hljs-keyword\">return</span> <span class=\"hljs-number\">0</span>, r.text, <span class=\"hljs-string\">&quot;&quot;</span>\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-keyword\">raise</span> AnsibleConnectionFailure(<span class=\"hljs-string\">f&quot;Errore esecuzione comando: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">close</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-string\">&quot;&quot;&quot;\n        Chiude la connessione (qui chiude sessione HTTP).\n        &quot;&quot;&quot;</span>\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-variable language_\">self</span>.session:\n            <span class=\"hljs-variable language_\">self</span>.session.close()\n            <span class=\"hljs-variable language_\">self</span>.session = <span class=\"hljs-literal\">None</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2340,2386"}}],"payload":{"tag":"h1","lines":"2335,2336"}},{"content":"Come usarli?","children":[{"content":"1. <strong>Moduli personalizzati</strong>","children":[{"content":"Cos&#x2019;&#xe8; un modulo?","children":[{"content":"&#xc8; <strong>l&#x2019;unit&#xe0; base di lavoro in Ansible</strong>: un piccolo script (in Python o altro) che esegue un&#x2019;azione specifica (es. installare un pacchetto, copiare un file, creare un utente).","children":[],"payload":{"tag":"li","lines":"2428,2429"}},{"content":"Viene <strong>invocato direttamente dal playbook</strong> come task.","children":[],"payload":{"tag":"li","lines":"2429,2430"}},{"content":"Il modulo prende in input parametri, esegue operazioni e restituisce uno stato (changed, failed, output, ecc.).","children":[],"payload":{"tag":"li","lines":"2430,2432"}}],"payload":{"tag":"h3","lines":"2426,2427"}},{"content":"Quando si usano?","children":[{"content":"Quando vuoi <strong>definire una nuova azione o gestione risorse</strong> che Ansible non supporta nativamente.","children":[],"payload":{"tag":"li","lines":"2434,2435"}},{"content":"Per esempio, se vuoi interagire con un&#x2019;API proprietaria, un servizio custom, o gestire risorse non standard.","children":[],"payload":{"tag":"li","lines":"2435,2437"}}],"payload":{"tag":"h3","lines":"2432,2433"}},{"content":"Caratteristiche","children":[{"content":"Autonomo e riutilizzabile.","children":[],"payload":{"tag":"li","lines":"2439,2440"}},{"content":"Funziona sia in locale che su host remoti.","children":[],"payload":{"tag":"li","lines":"2440,2441"}},{"content":"Deve essere idempotente: ripetere il modulo non deve creare effetti collaterali.","children":[],"payload":{"tag":"li","lines":"2441,2442"}},{"content":"Scrittura tipicamente in Python (ma pu&#xf2; essere anche in bash, powershell, ecc.).","children":[],"payload":{"tag":"li","lines":"2442,2444"}}],"payload":{"tag":"h3","lines":"2437,2438"}},{"content":"Esempio minimo di modulo Python","children":[{"content":"<pre data-lines=\"2446,2469\"><code class=\"language-python\"><span class=\"hljs-comment\">#!/usr/bin/python</span>\n<span class=\"hljs-keyword\">from</span> ansible.module_utils.basic <span class=\"hljs-keyword\">import</span> AnsibleModule\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">main</span>():\n    module_args = <span class=\"hljs-built_in\">dict</span>(\n        name=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, required=<span class=\"hljs-literal\">True</span>),\n        state=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, choices=[<span class=\"hljs-string\">&apos;present&apos;</span>, <span class=\"hljs-string\">&apos;absent&apos;</span>], default=<span class=\"hljs-string\">&apos;present&apos;</span>)\n    )\n    module = AnsibleModule(argument_spec=module_args)\n    name = module.params[<span class=\"hljs-string\">&apos;name&apos;</span>]\n    state = module.params[<span class=\"hljs-string\">&apos;state&apos;</span>]\n    <span class=\"hljs-comment\"># Logica fittizia: simuliamo la presenza di una risorsa</span>\n    changed = <span class=\"hljs-literal\">False</span>\n    <span class=\"hljs-keyword\">if</span> state == <span class=\"hljs-string\">&apos;present&apos;</span>:\n        <span class=\"hljs-comment\"># crea risorsa se non esiste</span>\n        changed = <span class=\"hljs-literal\">True</span>\n    <span class=\"hljs-keyword\">else</span>:\n        <span class=\"hljs-comment\"># elimina risorsa se esiste</span>\n        changed = <span class=\"hljs-literal\">True</span>\n    module.exit_json(changed=changed, msg=<span class=\"hljs-string\">f&quot;Risorsa <span class=\"hljs-subst\">{name}</span> &#xe8; ora <span class=\"hljs-subst\">{state}</span>&quot;</span>)\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2446,2469"}}],"payload":{"tag":"h3","lines":"2444,2445"}}],"payload":{"tag":"h2","lines":"2424,2425"}},{"content":"2. <strong>Plugin Ansible</strong>","children":[{"content":"Cos&#x2019;&#xe8; un plugin?","children":[{"content":"\n<p data-lines=\"2476,2477\">&#xc8; un <strong>componente estensibile</strong> che modifica o estende il comportamento interno di Ansible.</p>","children":[],"payload":{"tag":"li","lines":"2476,2477"}},{"content":"\n<p data-lines=\"2477,2478\">Non &#xe8; un task/azione, ma pi&#xf9; una <strong>funzionalit&#xe0; di supporto o hook</strong>.</p>","children":[],"payload":{"tag":"li","lines":"2477,2478"}},{"content":"\n<p data-lines=\"2478,2479\">Tipologie di plugin comuni:</p>","children":[{"content":"<strong>Callback plugin</strong> (es. logging, notifica eventi)","children":[],"payload":{"tag":"li","lines":"2480,2481"}},{"content":"<strong>Filter plugin</strong> (filtri Jinja2 personalizzati)","children":[],"payload":{"tag":"li","lines":"2481,2482"}},{"content":"<strong>Lookup plugin</strong> (caricamento dati esterni)","children":[],"payload":{"tag":"li","lines":"2482,2483"}},{"content":"<strong>Connection plugin</strong> (definisce il metodo di connessione)","children":[],"payload":{"tag":"li","lines":"2483,2484"}},{"content":"<strong>Strategy plugin</strong> (gestione esecuzione task)","children":[],"payload":{"tag":"li","lines":"2484,2485"}},{"content":"<strong>Inventory plugin</strong> (gestione inventari dinamici)","children":[],"payload":{"tag":"li","lines":"2485,2486"}},{"content":"<strong>Action plugin</strong> (modifica esecuzione moduli)","children":[],"payload":{"tag":"li","lines":"2486,2488"}}],"payload":{"tag":"li","lines":"2478,2488"}}],"payload":{"tag":"h3","lines":"2474,2475"}},{"content":"Quando si usano?","children":[{"content":"Per <strong>personalizzare l&#x2019;ambiente di esecuzione di Ansible</strong>, aggiungere funzionalit&#xe0; cross-cutting.","children":[],"payload":{"tag":"li","lines":"2490,2491"}},{"content":"Quando vuoi modificare il comportamento di Ansible a livello di esecuzione, gestione output, o estendere la sintassi.","children":[],"payload":{"tag":"li","lines":"2491,2493"}}],"payload":{"tag":"h3","lines":"2488,2489"}},{"content":"Caratteristiche","children":[{"content":"Integrati nel core Ansible.","children":[],"payload":{"tag":"li","lines":"2495,2496"}},{"content":"Pi&#xf9; specifici rispetto ai moduli.","children":[],"payload":{"tag":"li","lines":"2496,2497"}},{"content":"Scritti in Python.","children":[],"payload":{"tag":"li","lines":"2497,2498"}},{"content":"Possono influenzare il modo in cui Ansible interpreta i playbook o interagisce con gli host.","children":[],"payload":{"tag":"li","lines":"2498,2500"}}],"payload":{"tag":"h3","lines":"2493,2494"}},{"content":"Esempio semplice di callback plugin","children":[{"content":"<pre data-lines=\"2502,2511\"><code class=\"language-python\"><span class=\"hljs-comment\"># callback_plugins/simple_log.py</span>\n<span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;TASK OK - <span class=\"hljs-subst\">{host}</span>: <span class=\"hljs-subst\">{task}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2502,2511"}}],"payload":{"tag":"h3","lines":"2500,2501"}}],"payload":{"tag":"h2","lines":"2472,2473"}},{"content":"3. <strong>Confronto diretto</strong>","children":[{"content":"<table data-lines=\"2516,2525\">\n<thead data-lines=\"2516,2517\">\n<tr data-lines=\"2516,2517\">\n<th>Aspetto</th>\n<th>Moduli personalizzati</th>\n<th>Plugin Ansible</th>\n</tr>\n</thead>\n<tbody data-lines=\"2518,2525\">\n<tr data-lines=\"2518,2519\">\n<td>Scopo</td>\n<td>Eseguire task specifici</td>\n<td>Estendere o modificare il comportamento di Ansible</td>\n</tr>\n<tr data-lines=\"2519,2520\">\n<td>Invocazione</td>\n<td>Usati direttamente nei playbook come task</td>\n<td>Interni ad Ansible, non task diretti</td>\n</tr>\n<tr data-lines=\"2520,2521\">\n<td>Tipi</td>\n<td>Script/programma standalone</td>\n<td>Callback, lookup, filter, connection, strategy, ecc.</td>\n</tr>\n<tr data-lines=\"2521,2522\">\n<td>Livello di impatto</td>\n<td>Esecuzione azioni sulle risorse</td>\n<td>Modifica runtime, output, connessione, template, ecc.</td>\n</tr>\n<tr data-lines=\"2522,2523\">\n<td>Idempotenza</td>\n<td>Necessaria</td>\n<td>Non applicabile (dipende dal tipo)</td>\n</tr>\n<tr data-lines=\"2523,2524\">\n<td>Esempi</td>\n<td>Installare pacchetti, creare utenti</td>\n<td>Logger, filtri jinja, gestione connessioni</td>\n</tr>\n<tr data-lines=\"2524,2525\">\n<td>Linguaggio</td>\n<td>Python (o altri)</td>\n<td>Python</td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"2516,2525"}}],"payload":{"tag":"h2","lines":"2514,2515"}},{"content":"4. <strong>Sintesi</strong>","children":[{"content":"Se vuoi <strong>creare nuove azioni</strong> (come installare un software, modificare configurazioni, chiamare API) &#x2192; <strong>moduli personalizzati</strong>.","children":[],"payload":{"tag":"li","lines":"2530,2531"}},{"content":"Se vuoi <strong>estendere il motore Ansible</strong> (filtrare dati, personalizzare output, definire nuovi modi di connessione) &#x2192; <strong>plugin</strong>.","children":[],"payload":{"tag":"li","lines":"2531,2533"}}],"payload":{"tag":"h2","lines":"2528,2529"}}],"payload":{"tag":"h1","lines":"2389,2390"}},{"content":"1. Moduli personalizzati: esempio completo e commentato","children":[{"content":"File: <code>library/my_resource.py</code>","children":[{"content":"<pre data-lines=\"2553,2590\"><code class=\"language-python\"><span class=\"hljs-comment\">#!/usr/bin/python</span>\n<span class=\"hljs-keyword\">from</span> ansible.module_utils.basic <span class=\"hljs-keyword\">import</span> AnsibleModule\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">main</span>():\n    <span class=\"hljs-comment\"># Definizione degli argomenti accettati dal modulo</span>\n    module_args = <span class=\"hljs-built_in\">dict</span>(\n        name=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, required=<span class=\"hljs-literal\">True</span>),\n        state=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, choices=[<span class=\"hljs-string\">&apos;present&apos;</span>, <span class=\"hljs-string\">&apos;absent&apos;</span>], default=<span class=\"hljs-string\">&apos;present&apos;</span>)\n    )\n    module = AnsibleModule(\n        argument_spec=module_args,\n        supports_check_mode=<span class=\"hljs-literal\">True</span>  <span class=\"hljs-comment\"># Supporta modalit&#xe0; &quot;check&quot;</span>\n    )\n    name = module.params[<span class=\"hljs-string\">&apos;name&apos;</span>]\n    state = module.params[<span class=\"hljs-string\">&apos;state&apos;</span>]\n    <span class=\"hljs-comment\"># Simuliamo lo stato attuale (in un caso reale si farebbe controllo reale)</span>\n    current_state = <span class=\"hljs-string\">&apos;absent&apos;</span>  <span class=\"hljs-comment\"># Supponiamo la risorsa non esista</span>\n    changed = <span class=\"hljs-literal\">False</span>\n    msg = <span class=\"hljs-string\">&quot;&quot;</span>\n    <span class=\"hljs-keyword\">if</span> module.check_mode:\n        <span class=\"hljs-comment\"># Modalit&#xe0; check: solo simulazione, non si cambia nulla</span>\n        module.exit_json(changed=(current_state != state), msg=<span class=\"hljs-string\">&quot;Check mode: nessuna modifica eseguita&quot;</span>)\n    <span class=\"hljs-keyword\">if</span> state == <span class=\"hljs-string\">&apos;present&apos;</span> <span class=\"hljs-keyword\">and</span> current_state != <span class=\"hljs-string\">&apos;present&apos;</span>:\n        <span class=\"hljs-comment\"># Logica per creare la risorsa</span>\n        changed = <span class=\"hljs-literal\">True</span>\n        msg = <span class=\"hljs-string\">f&quot;Risorsa &apos;<span class=\"hljs-subst\">{name}</span>&apos; creata&quot;</span>\n    <span class=\"hljs-keyword\">elif</span> state == <span class=\"hljs-string\">&apos;absent&apos;</span> <span class=\"hljs-keyword\">and</span> current_state != <span class=\"hljs-string\">&apos;absent&apos;</span>:\n        <span class=\"hljs-comment\"># Logica per eliminare la risorsa</span>\n        changed = <span class=\"hljs-literal\">True</span>\n        msg = <span class=\"hljs-string\">f&quot;Risorsa &apos;<span class=\"hljs-subst\">{name}</span>&apos; rimossa&quot;</span>\n    <span class=\"hljs-keyword\">else</span>:\n        msg = <span class=\"hljs-string\">f&quot;Risorsa &apos;<span class=\"hljs-subst\">{name}</span>&apos; gi&#xe0; nello stato desiderato (<span class=\"hljs-subst\">{state}</span>)&quot;</span>\n    <span class=\"hljs-comment\"># Risposta di successo al motore Ansible</span>\n    module.exit_json(changed=changed, msg=msg)\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2553,2590"}}],"payload":{"tag":"h3","lines":"2551,2552"}},{"content":"Come usare il modulo nel playbook:","children":[{"content":"<pre data-lines=\"2595,2603\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Gestisci</span> <span class=\"hljs-string\">la</span> <span class=\"hljs-string\">risorsa</span> <span class=\"hljs-string\">fittizia</span>\n      <span class=\"hljs-attr\">my_resource:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;esempio1&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2595,2603"}}],"payload":{"tag":"h3","lines":"2593,2594"}}],"payload":{"tag":"h1","lines":"2545,2546"}},{"content":"2. Plugin callback: esempio base di logging task","children":[{"content":"File: <code>callback_plugins/simple_logger.py</code>","children":[{"content":"<pre data-lines=\"2612,2626\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Plugin callback che stampa a video quando un task termina con successo.\n    &quot;&quot;&quot;</span>\n    CALLBACK_VERSION = <span class=\"hljs-number\">2.0</span>\n    CALLBACK_TYPE = <span class=\"hljs-string\">&apos;notification&apos;</span>\n    CALLBACK_NAME = <span class=\"hljs-string\">&apos;simple_logger&apos;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[INFO] TASK OK su <span class=\"hljs-subst\">{host}</span>: <span class=\"hljs-subst\">{task}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2612,2626"}}],"payload":{"tag":"h3","lines":"2610,2611"}},{"content":"Come usarlo:","children":[{"content":"Posiziona il file nella cartella <code>callback_plugins/</code> del progetto.","children":[],"payload":{"tag":"li","lines":"2631,2632"}},{"content":"Esegui Ansible con il flag <code>-v</code> o imposta la variabile d&#x2019;ambiente <code>ANSIBLE_CALLBACK_PLUGINS</code> per includere la cartella.","children":[],"payload":{"tag":"li","lines":"2632,2633"}},{"content":"Vedrai messaggi personalizzati per ogni task completato con successo.","children":[],"payload":{"tag":"li","lines":"2633,2635"}}],"payload":{"tag":"h3","lines":"2629,2630"}}],"payload":{"tag":"h1","lines":"2606,2607"}},{"content":"3. Filter plugin: esempio di filtro personalizzato per manipolare stringhe","children":[{"content":"File: <code>filter_plugins/my_filters.py</code>","children":[{"content":"<pre data-lines=\"2643,2655\"><code class=\"language-python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">shout</span>(<span class=\"hljs-params\">text</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Filtro che trasforma un testo in maiuscolo con esclamazioni.\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">return</span> text.upper() + <span class=\"hljs-string\">&quot;!!!&quot;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FilterModule</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">filters</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-string\">&apos;shout&apos;</span>: shout\n        }\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2643,2655"}}],"payload":{"tag":"h3","lines":"2641,2642"}},{"content":"Esempio d&#x2019;uso in un template Jinja2","children":[{"content":"<pre data-lines=\"2660,2664\"><code class=\"language-jinja\"><span class=\"language-xml\">Messaggio: </span><span class=\"hljs-template-variable\">{{ &quot;ciao mondo&quot; | shout }}</span><span class=\"language-xml\">\n# Risultato: CIAO MONDO!!!\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"2660,2664"}}],"payload":{"tag":"h3","lines":"2658,2659"}}],"payload":{"tag":"h1","lines":"2637,2638"}},{"content":"4. Lookup plugin: esempio base per leggere dati da file esterno","children":[{"content":"File: <code>lookup_plugins/my_lookup.py</code>","children":[{"content":"<pre data-lines=\"2673,2682\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.lookup <span class=\"hljs-keyword\">import</span> LookupBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LookupModule</span>(<span class=\"hljs-title class_ inherited__\">LookupBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self, terms, variables=<span class=\"hljs-literal\">None</span>, **kwargs</span>):\n        filename = terms[<span class=\"hljs-number\">0</span>]\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(filename, <span class=\"hljs-string\">&apos;r&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            content = f.read()\n        <span class=\"hljs-keyword\">return</span> [content]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2673,2682"}}],"payload":{"tag":"h3","lines":"2671,2672"}},{"content":"Uso nel playbook","children":[{"content":"<pre data-lines=\"2687,2694\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Usa</span> <span class=\"hljs-string\">lookup</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">leggere</span> <span class=\"hljs-string\">file</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ lookup(&apos;my_lookup&apos;, &apos;file.txt&apos;) }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2687,2694"}}],"payload":{"tag":"h3","lines":"2685,2686"}}],"payload":{"tag":"h1","lines":"2667,2668"}},{"content":"5. Connection plugin: esempio base (pi&#xf9; avanzato, opzionale)","children":[],"payload":{"tag":"h1","lines":"2697,2698"}},{"content":"6. Sintesi e suggerimenti","children":[{"content":"","children":[{"content":"<strong>Moduli personalizzati</strong>: usali per azioni, manipolazioni o interazioni con sistemi/risorse.","children":[],"payload":{"tag":"li","lines":"2707,2708"}},{"content":"<strong>Plugin</strong>: servono per estendere il funzionamento di Ansible (logging, filtri, lookup dati, connessioni personalizzate).","children":[],"payload":{"tag":"li","lines":"2708,2709"}},{"content":"Mantieni sempre il principio di <strong>idempotenza</strong> e <strong>chiamata chiara</strong> da playbook.","children":[],"payload":{"tag":"li","lines":"2709,2710"}},{"content":"Usa la struttura di directory standard (es. <code>library/</code>, <code>callback_plugins/</code>, <code>filter_plugins/</code>, <code>lookup_plugins/</code>) per facilitare l&#x2019;organizzazione e il caricamento automatico.","children":[],"payload":{"tag":"li","lines":"2710,2712"}}],"payload":{"tag":"ul","lines":"2707,2712"}},{"content":"","children":[{"content":"<strong>Modulo personalizzato</strong> (<code>library/my_resource.py</code>)","children":[],"payload":{"tag":"li","lines":"2723,2724"}},{"content":"<strong>Plugin callback</strong> (<code>callback_plugins/simple_logger.py</code>)","children":[],"payload":{"tag":"li","lines":"2724,2725"}},{"content":"<strong>Plugin filtro</strong> (<code>filter_plugins/my_filters.py</code>)","children":[],"payload":{"tag":"li","lines":"2725,2726"}},{"content":"<strong>Plugin lookup</strong> (<code>lookup_plugins/my_lookup.py</code>)","children":[],"payload":{"tag":"li","lines":"2726,2728"}}],"payload":{"tag":"ul","lines":"2723,2728"}},{"content":"","children":[{"content":"Un <strong>playbook di esempio</strong> che usa tutte queste estensioni","children":[],"payload":{"tag":"li","lines":"2730,2731"}},{"content":"Una breve <strong>documentazione</strong> inline","children":[],"payload":{"tag":"li","lines":"2731,2732"}},{"content":"Struttura directory standard","children":[],"payload":{"tag":"li","lines":"2732,2734"}}],"payload":{"tag":"ul","lines":"2730,2734"}}],"payload":{"tag":"h1","lines":"2705,2706"}},{"content":"Struttura progetto","children":[{"content":"<pre data-lines=\"2738,2751\"><code data-lines=\"2738,2751\">ansible-declarative-demo/\n&#x251c;&#x2500;&#x2500; library/\n&#x2502;   &#x2514;&#x2500;&#x2500; my_resource<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; callback_plugins/\n&#x2502;   &#x2514;&#x2500;&#x2500; simple_logger<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; filter_plugins/\n&#x2502;   &#x2514;&#x2500;&#x2500; my_filters<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; lookup_plugins/\n&#x2502;   &#x2514;&#x2500;&#x2500; my_lookup<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; playbook<span class=\"hljs-selector-class\">.yml</span>\n&#x2514;&#x2500;&#x2500; README<span class=\"hljs-selector-class\">.md</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2738,2751"}}],"payload":{"tag":"h1","lines":"2736,2737"}},{"content":"1. <code>library/my_resource.py</code>","children":[{"content":"<pre data-lines=\"2756,2787\"><code class=\"language-python\"><span class=\"hljs-comment\">#!/usr/bin/python</span>\n<span class=\"hljs-keyword\">from</span> ansible.module_utils.basic <span class=\"hljs-keyword\">import</span> AnsibleModule\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">main</span>():\n    module_args = <span class=\"hljs-built_in\">dict</span>(\n        name=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, required=<span class=\"hljs-literal\">True</span>),\n        state=<span class=\"hljs-built_in\">dict</span>(<span class=\"hljs-built_in\">type</span>=<span class=\"hljs-string\">&apos;str&apos;</span>, choices=[<span class=\"hljs-string\">&apos;present&apos;</span>, <span class=\"hljs-string\">&apos;absent&apos;</span>], default=<span class=\"hljs-string\">&apos;present&apos;</span>)\n    )\n    module = AnsibleModule(\n        argument_spec=module_args,\n        supports_check_mode=<span class=\"hljs-literal\">True</span>\n    )\n    name = module.params[<span class=\"hljs-string\">&apos;name&apos;</span>]\n    state = module.params[<span class=\"hljs-string\">&apos;state&apos;</span>]\n    current_state = <span class=\"hljs-string\">&apos;absent&apos;</span>  <span class=\"hljs-comment\"># Simulazione: risorsa non esiste</span>\n    changed = <span class=\"hljs-literal\">False</span>\n    msg = <span class=\"hljs-string\">&quot;&quot;</span>\n    <span class=\"hljs-keyword\">if</span> module.check_mode:\n        module.exit_json(changed=(current_state != state), msg=<span class=\"hljs-string\">&quot;Check mode: nessuna modifica eseguita&quot;</span>)\n    <span class=\"hljs-keyword\">if</span> state == <span class=\"hljs-string\">&apos;present&apos;</span> <span class=\"hljs-keyword\">and</span> current_state != <span class=\"hljs-string\">&apos;present&apos;</span>:\n        changed = <span class=\"hljs-literal\">True</span>\n        msg = <span class=\"hljs-string\">f&quot;Risorsa &apos;<span class=\"hljs-subst\">{name}</span>&apos; creata&quot;</span>\n    <span class=\"hljs-keyword\">elif</span> state == <span class=\"hljs-string\">&apos;absent&apos;</span> <span class=\"hljs-keyword\">and</span> current_state != <span class=\"hljs-string\">&apos;absent&apos;</span>:\n        changed = <span class=\"hljs-literal\">True</span>\n        msg = <span class=\"hljs-string\">f&quot;Risorsa &apos;<span class=\"hljs-subst\">{name}</span>&apos; rimossa&quot;</span>\n    <span class=\"hljs-keyword\">else</span>:\n        msg = <span class=\"hljs-string\">f&quot;Risorsa &apos;<span class=\"hljs-subst\">{name}</span>&apos; gi&#xe0; nello stato desiderato (<span class=\"hljs-subst\">{state}</span>)&quot;</span>\n    module.exit_json(changed=changed, msg=msg)\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2756,2787"}}],"payload":{"tag":"h1","lines":"2754,2755"}},{"content":"2. <code>callback_plugins/simple_logger.py</code>","children":[{"content":"<pre data-lines=\"2792,2803\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.callback <span class=\"hljs-keyword\">import</span> CallbackBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">CallbackModule</span>(<span class=\"hljs-title class_ inherited__\">CallbackBase</span>):\n    CALLBACK_VERSION = <span class=\"hljs-number\">2.0</span>\n    CALLBACK_TYPE = <span class=\"hljs-string\">&apos;notification&apos;</span>\n    CALLBACK_NAME = <span class=\"hljs-string\">&apos;simple_logger&apos;</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">v2_runner_on_ok</span>(<span class=\"hljs-params\">self, result</span>):\n        host = result._host.get_name()\n        task = result.task_name\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[INFO] TASK OK su <span class=\"hljs-subst\">{host}</span>: <span class=\"hljs-subst\">{task}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2792,2803"}}],"payload":{"tag":"h1","lines":"2790,2791"}},{"content":"3. <code>filter_plugins/my_filters.py</code>","children":[{"content":"<pre data-lines=\"2808,2817\"><code class=\"language-python\"><span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">shout</span>(<span class=\"hljs-params\">text</span>):\n    <span class=\"hljs-keyword\">return</span> text.upper() + <span class=\"hljs-string\">&quot;!!!&quot;</span>\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FilterModule</span>(<span class=\"hljs-title class_ inherited__\">object</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">filters</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">return</span> {\n            <span class=\"hljs-string\">&apos;shout&apos;</span>: shout\n        }\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2808,2817"}}],"payload":{"tag":"h1","lines":"2806,2807"}},{"content":"4. <code>lookup_plugins/my_lookup.py</code>","children":[{"content":"<pre data-lines=\"2822,2831\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> ansible.plugins.lookup <span class=\"hljs-keyword\">import</span> LookupBase\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">LookupModule</span>(<span class=\"hljs-title class_ inherited__\">LookupBase</span>):\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">run</span>(<span class=\"hljs-params\">self, terms, variables=<span class=\"hljs-literal\">None</span>, **kwargs</span>):\n        filename = terms[<span class=\"hljs-number\">0</span>]\n        <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(filename, <span class=\"hljs-string\">&apos;r&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n            content = f.read()\n        <span class=\"hljs-keyword\">return</span> [content]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2822,2831"}}],"payload":{"tag":"h1","lines":"2820,2821"}},{"content":"5. <code>playbook.yml</code>","children":[{"content":"<pre data-lines=\"2836,2853\"><code class=\"language-yaml\"><span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">localhost</span>\n  <span class=\"hljs-attr\">gather_facts:</span> <span class=\"hljs-literal\">no</span>\n  <span class=\"hljs-attr\">vars:</span>\n    <span class=\"hljs-attr\">message:</span> <span class=\"hljs-string\">&quot;ciao mondo&quot;</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Usa</span> <span class=\"hljs-string\">modulo</span> <span class=\"hljs-string\">personalizzato</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">creare</span> <span class=\"hljs-string\">risorsa</span>\n      <span class=\"hljs-attr\">my_resource:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;demo_resource&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">present</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Usa</span> <span class=\"hljs-string\">filtro</span> <span class=\"hljs-string\">personalizzato</span> <span class=\"hljs-string\">shout</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ message | shout }}</span>&quot;</span>\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Usa</span> <span class=\"hljs-string\">lookup</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">leggere</span> <span class=\"hljs-string\">file</span> <span class=\"hljs-string\">demo.txt</span>\n      <span class=\"hljs-attr\">debug:</span>\n        <span class=\"hljs-attr\">msg:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ lookup(&apos;my_lookup&apos;, &apos;demo.txt&apos;) }}</span>&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2836,2853"}}],"payload":{"tag":"h1","lines":"2834,2835"}},{"content":"6. <code>README.md</code>","children":[{"content":"Requisiti","children":[{"content":"Ansible 2.9+","children":[],"payload":{"tag":"li","lines":"2879,2880"}},{"content":"Python 3.x","children":[],"payload":{"tag":"li","lines":"2880,2881"}},{"content":"Nessuna dipendenza esterna","children":[],"payload":{"tag":"li","lines":"2881,2882"}}],"payload":{"tag":"h2","lines":"2878,2879"}},{"content":"Note","children":[{"content":"<pre data-lines=\"2889,2896\"><code data-lines=\"2889,2896\">\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-string\">Se</span> <span class=\"hljs-string\">vuoi</span> <span class=\"hljs-string\">posso</span> <span class=\"hljs-string\">aiutarti</span> <span class=\"hljs-string\">a</span> <span class=\"hljs-string\">creare</span> <span class=\"hljs-string\">una</span> <span class=\"hljs-string\">serie</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">esercizi</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">spiegazioni</span> <span class=\"hljs-string\">dettagliate</span> <span class=\"hljs-string\">sul</span> <span class=\"hljs-string\">funzionamento</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">ciascuno</span> <span class=\"hljs-string\">di</span> <span class=\"hljs-string\">questi</span> <span class=\"hljs-string\">componenti,</span> <span class=\"hljs-string\">oppure</span> <span class=\"hljs-string\">estendere</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">plugin</span> <span class=\"hljs-string\">connection</span> <span class=\"hljs-string\">o</span> <span class=\"hljs-string\">moduli</span> <span class=\"hljs-string\">pi&#xf9;</span> <span class=\"hljs-string\">complessi.</span>  \n<span class=\"hljs-string\">Fammi</span> <span class=\"hljs-string\">sapere!</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2889,2896"}}],"payload":{"tag":"h2","lines":"2882,2883"}}],"payload":{"tag":"h1","lines":"2856,2857"}},{"content":"Guida didattica: Estendere Ansible con moduli e plugin personalizzati","children":[{"content":"Capitolo 1: Introduzione al progetto e setup","children":[{"content":"Obiettivo","children":[],"payload":{"tag":"h3","lines":"2898,2899"}},{"content":"Passi","children":[{"content":"<pre data-lines=\"2903,2906\"><code class=\"language-txt\">Questo &#xe8; un testo di esempio per il lookup plugin.\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2903,2906"}},{"content":"<pre data-lines=\"2907,2910\"><code class=\"language-bash\">ansible-playbook playbook.yml -v\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2907,2910"}}],"payload":{"tag":"h3","lines":"2900,2901"}}],"payload":{"tag":"h2","lines":"2897,2898"}},{"content":"Capitolo 2: Moduli personalizzati","children":[{"content":"Che cos&#x2019;&#xe8; un modulo personalizzato?","children":[],"payload":{"tag":"h3","lines":"2916,2917"}},{"content":"Come funziona <code>my_resource.py</code>?","children":[{"content":"Riceve parametri <code>name</code> e <code>state</code>","children":[],"payload":{"tag":"li","lines":"2919,2920"}},{"content":"Simula la verifica dello stato corrente","children":[],"payload":{"tag":"li","lines":"2920,2921"}},{"content":"Decide se cambiare stato o no","children":[],"payload":{"tag":"li","lines":"2921,2922"}},{"content":"Gestisce la modalit&#xe0; check (<code>--check</code>)","children":[],"payload":{"tag":"li","lines":"2922,2923"}},{"content":"Restituisce risultato con messaggio e flag <code>changed</code>","children":[],"payload":{"tag":"li","lines":"2923,2924"}}],"payload":{"tag":"h3","lines":"2918,2919"}},{"content":"Esercizio","children":[],"payload":{"tag":"h3","lines":"2924,2925"}}],"payload":{"tag":"h2","lines":"2915,2916"}},{"content":"Capitolo 3: Callback plugin","children":[{"content":"Che cos&#x2019;&#xe8; un callback plugin?","children":[],"payload":{"tag":"h3","lines":"2927,2928"}},{"content":"Come funziona <code>simple_logger.py</code>?","children":[],"payload":{"tag":"h3","lines":"2929,2930"}},{"content":"Esercizio","children":[],"payload":{"tag":"h3","lines":"2931,2932"}}],"payload":{"tag":"h2","lines":"2926,2927"}},{"content":"Capitolo 4: Filter plugin","children":[{"content":"Che cos&#x2019;&#xe8; un filtro Jinja?","children":[],"payload":{"tag":"h3","lines":"2934,2935"}},{"content":"Come funziona <code>my_filters.py</code>?","children":[],"payload":{"tag":"h3","lines":"2936,2937"}},{"content":"Esercizio","children":[],"payload":{"tag":"h3","lines":"2938,2939"}}],"payload":{"tag":"h2","lines":"2933,2934"}},{"content":"Capitolo 5: Lookup plugin","children":[{"content":"Che cos&#x2019;&#xe8; un lookup plugin?","children":[],"payload":{"tag":"h3","lines":"2941,2942"}},{"content":"Come funziona <code>my_lookup.py</code>?","children":[],"payload":{"tag":"h3","lines":"2943,2944"}},{"content":"Esercizio","children":[],"payload":{"tag":"h3","lines":"2945,2946"}}],"payload":{"tag":"h2","lines":"2940,2941"}},{"content":"Capitolo 6: Integrazione e test","children":[{"content":"Obiettivo","children":[{"content":"Usa il filtro <code>shout</code> con il testo letto dal lookup.","children":[],"payload":{"tag":"li","lines":"2950,2951"}},{"content":"Esegui il modulo in modalit&#xe0; check.","children":[],"payload":{"tag":"li","lines":"2951,2952"}},{"content":"Osserva i messaggi prodotti dal callback plugin.","children":[],"payload":{"tag":"li","lines":"2952,2953"}}],"payload":{"tag":"h3","lines":"2948,2949"}}],"payload":{"tag":"h2","lines":"2947,2948"}},{"content":"Capitolo 7: Esercizi avanzati","children":[{"content":"Esercizio 1","children":[],"payload":{"tag":"h3","lines":"2954,2955"}},{"content":"Esercizio 2","children":[],"payload":{"tag":"h3","lines":"2956,2957"}},{"content":"Esercizio 3","children":[],"payload":{"tag":"h3","lines":"2958,2959"}},{"content":"Esercizio 4","children":[],"payload":{"tag":"h3","lines":"2960,2961"}}],"payload":{"tag":"h2","lines":"2953,2954"}}],"payload":{"tag":"h1","lines":"2896,2897"}}]},null)</script>
</body>
</html>
