<!doctype html>
<html>
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<meta http-equiv="X-UA-Compatible" content="ie=edge" />
<title>Markmap</title>
<style>
* {
  margin: 0;
  padding: 0;
}
html {
  font-family: ui-sans-serif, system-ui, sans-serif, 'Apple Color Emoji',
    'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';
}
#mindmap {
  display: block;
  width: 100vw;
  height: 100vh;
}
.markmap-dark {
  background: #27272a;
  color: white;
}
</style>
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@highlightjs/cdn-assets@11.11.1/styles/default.min.css">
</head>
<body>
<svg id="mindmap"></svg>
<script src="https://cdn.jsdelivr.net/npm/d3@7.9.0/dist/d3.min.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-view@0.18.12/dist/browser/index.js"></script><script src="https://cdn.jsdelivr.net/npm/markmap-toolbar@0.18.12/dist/index.js"></script><script>((r) => {
          setTimeout(r);
        })(() => {
  const { markmap, mm } = window;
  const toolbar = new markmap.Toolbar();
  toolbar.attach(mm);
  const el = toolbar.render();
  el.setAttribute("style", "position:absolute;bottom:20px;right:20px");
  document.body.append(el);
})</script><script>((getMarkmap, getOptions, root2, jsonOptions) => {
              const markmap = getMarkmap();
              window.mm = markmap.Markmap.create(
                "svg#mindmap",
                (getOptions || markmap.deriveOptions)(jsonOptions),
                root2
              );
              if (window.matchMedia("(prefers-color-scheme: dark)").matches) {
                document.documentElement.classList.add("markmap-dark");
              }
            })(() => window.markmap,null,{"content":"","children":[{"content":"&#x1f4c1; Struttura cartelle e file del progetto","children":[{"content":"<pre data-lines=\"6,35\"><code data-lines=\"6,35\">auto-ansible-playbook<span class=\"hljs-symbol\">/</span>\n&#x251c;&#x2500;&#x2500; README.md\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x251c;&#x2500;&#x2500; .gitignore\n&#x251c;&#x2500;&#x2500; requirements.txt\n&#x251c;&#x2500;&#x2500; .env.example\n&#x251c;&#x2500;&#x2500; config.json\n&#x251c;&#x2500;&#x2500; docker-compose.yml\n&#x251c;&#x2500;&#x2500; src<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; __init__.py\n&#x2502;   &#x251c;&#x2500;&#x2500; discover.py             <span class=\"hljs-comment\"># Script per estrazione dati server e docker-compose</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; gemini_client.py       <span class=\"hljs-comment\"># Client API Gemini/OpenAI</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; ansible_generator.py   <span class=\"hljs-comment\"># Modulo generazione playbook Ansible da input JSON</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; notifier.py            <span class=\"hljs-comment\"># Modulo notifiche (Telegram, email)</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; utils.py               <span class=\"hljs-comment\"># Funzioni di utilit&#xe0; comuni</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; main.py                <span class=\"hljs-comment\"># Orchestratore generale</span>\n&#x251c;&#x2500;&#x2500; examples<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; sample_docker_compose.yml\n&#x2502;   &#x251c;&#x2500;&#x2500; sample_config.json\n&#x2502;   &#x2514;&#x2500;&#x2500; generated_playbook.yml\n&#x251c;&#x2500;&#x2500; tests<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; test_discover.py\n&#x2502;   &#x251c;&#x2500;&#x2500; test_gemini_client.py\n&#x2502;   &#x251c;&#x2500;&#x2500; test_ansible_generator.py\n&#x2502;   &#x2514;&#x2500;&#x2500; test_notifier.py\n&#x2514;&#x2500;&#x2500; scripts<span class=\"hljs-symbol\">/</span>\n    &#x2514;&#x2500;&#x2500; run_discovery.sh       <span class=\"hljs-comment\"># Script bash per lanciare discovery da VPS</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"6,35"}}],"payload":{"tag":"h1","lines":"4,5"}},{"content":"&#x1f4c4; README.md","children":[{"content":"Uso","children":[{"content":"Scansione e generazione playbook","children":[{"content":"<pre data-lines=\"109,112\"><code class=\"language-bash\">python src/main.py --scan --generate\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"109,112"}}],"payload":{"tag":"h3","lines":"107,108"}},{"content":"Parametri principali","children":[{"content":"<code>--scan</code>: avvia scansione automatica","children":[],"payload":{"tag":"li","lines":"123,124"}},{"content":"<code>--generate</code>: genera playbook da dati raccolti","children":[],"payload":{"tag":"li","lines":"124,125"}},{"content":"<code>--notify</code>: invia notifiche in caso di alert","children":[],"payload":{"tag":"li","lines":"125,127"}}],"payload":{"tag":"h3","lines":"121,122"}},{"content":"Esempio di output","children":[{"content":"<code>output/playbook.yml</code>: playbook Ansible generato","children":[],"payload":{"tag":"li","lines":"129,130"}},{"content":"<code>output/report.html</code>: report dettagliato","children":[],"payload":{"tag":"li","lines":"130,131"}},{"content":"<code>output/report.json</code>: dati strutturati per CI/CD","children":[],"payload":{"tag":"li","lines":"131,133"}}],"payload":{"tag":"h3","lines":"127,128"}}],"payload":{"tag":"h2","lines":"105,106"}},{"content":"Struttura file e cartelle","children":[{"content":"<code>src/</code>: codice sorgente Python modulare","children":[],"payload":{"tag":"li","lines":"137,138"}},{"content":"<code>examples/</code>: esempi di input/output","children":[],"payload":{"tag":"li","lines":"138,139"}},{"content":"<code>tests/</code>: test unitari e di integrazione","children":[],"payload":{"tag":"li","lines":"139,140"}},{"content":"<code>scripts/</code>: script bash di supporto","children":[],"payload":{"tag":"li","lines":"140,142"}}],"payload":{"tag":"h2","lines":"135,136"}},{"content":"Sviluppo e testing","children":[{"content":"\n<p data-lines=\"146,147\">Usa <code>pytest</code> per eseguire i test:</p>\n<pre data-lines=\"148,151\"><code class=\"language-bash\">pytest tests/\n</code></pre>","children":[],"payload":{"tag":"li","lines":"146,152"}},{"content":"\n<p data-lines=\"152,153\">Aggiungi nuove funzionalit&#xe0; modulari in <code>src/</code></p>","children":[],"payload":{"tag":"li","lines":"152,154"}}],"payload":{"tag":"h2","lines":"144,145"}},{"content":"Licenza","children":[],"payload":{"tag":"h2","lines":"156,157"}},{"content":"Contatti","children":[{"content":"<pre data-lines=\"168,194\"><code data-lines=\"168,194\">\n---\n\n<span class=\"hljs-comment\"># &#x2699;&#xfe0f; .env.example</span>\n\n```dotenv\n<span class=\"hljs-comment\"># API key per Gemini / OpenAI</span>\n<span class=\"hljs-attribute\">GEMINI_API_KEY</span>=<span class=\"hljs-string\">&quot;tuo_api_key_gemini&quot;</span>\n\n<span class=\"hljs-comment\"># Telegram bot token per notifiche (opzionale)</span>\n<span class=\"hljs-attribute\">TELEGRAM_BOT_TOKEN</span>=<span class=\"hljs-string\">&quot;&quot;</span>\n\n<span class=\"hljs-comment\"># Telegram chat ID (opzionale)</span>\n<span class=\"hljs-attribute\">TELEGRAM_CHAT_ID</span>=<span class=\"hljs-string\">&quot;&quot;</span>\n\n<span class=\"hljs-comment\"># SMTP email (opzionale)</span>\n<span class=\"hljs-attribute\">SMTP_SERVER</span>=<span class=\"hljs-string\">&quot;&quot;</span>\n<span class=\"hljs-attribute\">SMTP_PORT</span>=587\n<span class=\"hljs-attribute\">SMTP_USER</span>=<span class=\"hljs-string\">&quot;&quot;</span>\n<span class=\"hljs-attribute\">SMTP_PASSWORD</span>=<span class=\"hljs-string\">&quot;&quot;</span>\n\n<span class=\"hljs-comment\"># VPS SSH Config</span>\n<span class=\"hljs-attribute\">SSH_USER</span>=<span class=\"hljs-string\">&quot;root&quot;</span>\n<span class=\"hljs-attribute\">SSH_PORT</span>=22\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"168,194"}}],"payload":{"tag":"h2","lines":"162,163"}}],"payload":{"tag":"h1","lines":"38,39"}},{"content":"&#x1f4dc; requirements.txt","children":[{"content":"<pre data-lines=\"199,208\"><code data-lines=\"199,208\">requests\nparamiko\npyyaml\njinja2\nansible\npytest\n<span class=\"hljs-keyword\">python</span>-dotenv\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"199,208"}}],"payload":{"tag":"h1","lines":"197,198"}},{"content":"&#x1f4dd; .gitignore","children":[{"content":"<pre data-lines=\"213,223\"><code data-lines=\"213,223\">__pycache__/\n*<span class=\"hljs-string\">.pyc</span>\n<span class=\"hljs-string\">.env</span>\noutput/\n<span class=\"hljs-string\">.venv/</span>\n<span class=\"hljs-string\">.vscode/</span>\n<span class=\"hljs-string\">.idea/</span>\n*<span class=\"hljs-string\">.log</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"213,223"}}],"payload":{"tag":"h1","lines":"211,212"}},{"content":"&#x1f4dc; LICENSE (MIT)","children":[{"content":"<pre data-lines=\"228,241\"><code class=\"language-text\">MIT License\n\nCopyright (c) 2025 Tuo Nome\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &quot;Software&quot;), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software...\n\n[il testo completo MIT License pu&#xf2; essere trovato qui: https://opensource.org/licenses/MIT]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"228,241"}}],"payload":{"tag":"h1","lines":"226,227"}},{"content":"&#x1f9e9; Codice sorgente completo","children":[{"content":"PLAYBOOK_TEMPLATE = &quot;&quot;&quot;","children":[{"content":"\n<p data-lines=\"402,407\">name: Playbook generato automaticamente<br>\nhosts: all<br>\nbecome: yes<br>\nvars:<br>\nansible_python_interpreter: /usr/bin/python3</p>\n<p data-lines=\"408,410\">tasks:<br>\n{% for service_name, service in docker_compose.services.items() %}</p>","children":[{"content":"\n<p data-lines=\"411,419\">name: Assicura che il container {{ service_name }} sia presente<br>\ndocker_container:<br>\nname: {{ service_name }}<br>\nimage: {{ service.image }}<br>\nstate: started<br>\nrestart_policy: unless-stopped<br>\nvolumes:<br>\n{% for vol in service.volumes or [] %}</p>","children":[{"content":"&quot;{{ vol }}&quot;<br>\n{% endfor %}<br>\nports:<br>\n{% for port in service.ports or [] %}","children":[],"payload":{"tag":"li","lines":"419,423"}},{"content":"&quot;{{ port }}&quot;<br>\n{% endfor %}<br>\n{% endfor %}","children":[],"payload":{"tag":"li","lines":"423,427"}}],"payload":{"tag":"li","lines":"411,427"}},{"content":"\n<p data-lines=\"427,432\">name: Configura utenti server<br>\nuser:<br>\nname: &quot;{{ item }}&quot;<br>\nstate: present<br>\nloop: &quot;{{ server_info.users }}&quot;</p>","children":[],"payload":{"tag":"li","lines":"427,433"}},{"content":"\n<p data-lines=\"433,439\">name: Assicura che SSH sia configurato correttamente<br>\nlineinfile:<br>\npath: /etc/ssh/sshd_config<br>\nregexp: &apos;^PermitRootLogin&apos;<br>\nline: &apos;PermitRootLogin no&apos;<br>\nbackup: yes</p>","children":[],"payload":{"tag":"li","lines":"433,440"}},{"content":"\n<p data-lines=\"440,445\">name: Riavvia sshd se necessario<br>\nservice:<br>\nname: sshd<br>\nstate: restarted<br>\nwhen: sshd_config_changed is defined and sshd_config_changed</p>","children":[],"payload":{"tag":"li","lines":"440,446"}}],"payload":{"tag":"li","lines":"402,446"}}],"payload":{"tag":"h2","lines":"400,401"}}],"payload":{"tag":"h1","lines":"244,245"}},{"content":"Converte dict docker-compose in oggetto semplice","children":[{"content":"src/utils.py","children":[{"content":"<pre data-lines=\"517,540\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nutils.py\n\nFunzioni di utilit&#xe0; comuni al progetto\n&quot;&quot;&quot;</span>\n\n<span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">from</span> dotenv <span class=\"hljs-keyword\">import</span> load_dotenv\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_env</span>(<span class=\"hljs-params\">path: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;.env&quot;</span></span>) -&gt; <span class=\"hljs-literal\">None</span>:\n    load_dotenv(dotenv_path=path)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">save_json</span>(<span class=\"hljs-params\">path: <span class=\"hljs-built_in\">str</span>, data: <span class=\"hljs-built_in\">dict</span></span>) -&gt; <span class=\"hljs-literal\">None</span>:\n    <span class=\"hljs-keyword\">import</span> json\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;w&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        json.dump(data, f, indent=<span class=\"hljs-number\">2</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_json</span>(<span class=\"hljs-params\">path: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">dict</span>:\n    <span class=\"hljs-keyword\">import</span> json\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;r&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        <span class=\"hljs-keyword\">return</span> json.load(f)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"517,540"}}],"payload":{"tag":"h3","lines":"515,516"}},{"content":"src/main.py","children":[{"content":"<pre data-lines=\"545,629\"><code class=\"language-python\"><span class=\"hljs-string\">&quot;&quot;&quot;\nmain.py\n\nOrchestratore principale che esegue discovery, chiama Gemini API,\ngenera playbook Ansible, esporta report e invia notifiche.\n&quot;&quot;&quot;</span>\n\n<span class=\"hljs-keyword\">import</span> argparse\n<span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> src <span class=\"hljs-keyword\">import</span> discover, gemini_client, ansible_generator, notifier, utils\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">main</span>():\n    parser = argparse.ArgumentParser(description=<span class=\"hljs-string\">&quot;Auto Ansible Playbook Generator&quot;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&quot;--scan&quot;</span>, action=<span class=\"hljs-string\">&quot;store_true&quot;</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&quot;Esegui scansione configurazioni&quot;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&quot;--generate&quot;</span>, action=<span class=\"hljs-string\">&quot;store_true&quot;</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&quot;Genera playbook da dati&quot;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&quot;--notify&quot;</span>, action=<span class=\"hljs-string\">&quot;store_true&quot;</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&quot;Invia notifiche&quot;</span>)\n    args = parser.parse_args()\n\n    utils.load_env()\n\n    output_dir = <span class=\"hljs-string\">&quot;output&quot;</span>\n    os.makedirs(output_dir, exist_ok=<span class=\"hljs-literal\">True</span>)\n\n    data_path = os.path.join(output_dir, <span class=\"hljs-string\">&quot;data.json&quot;</span>)\n    playbook_path = os.path.join(output_dir, <span class=\"hljs-string\">&quot;playbook.yml&quot;</span>)\n\n    <span class=\"hljs-keyword\">if</span> args.scan:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Avvio scansione configurazioni...&quot;</span>)\n        dc = discover.discover_docker_compose(<span class=\"hljs-string\">&quot;docker-compose.yml&quot;</span>)\n        server_info = discover.discover_server_info()\n        data = {\n            <span class=\"hljs-string\">&quot;docker_compose&quot;</span>: dc,\n            <span class=\"hljs-string\">&quot;server_info&quot;</span>: server_info\n        }\n        utils.save_json(data_path, data)\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Dati salvati in <span class=\"hljs-subst\">{data_path}</span>&quot;</span>)\n\n    <span class=\"hljs-keyword\">if</span> args.generate:\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> os.path.exists(data_path):\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Errore: dati non trovati. Esegui prima --scan&quot;</span>)\n            <span class=\"hljs-keyword\">return</span>\n        data = utils.load_json(data_path)\n\n        api_key = os.getenv(<span class=\"hljs-string\">&quot;GEMINI_API_KEY&quot;</span>)\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> api_key:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Errore: GEMINI_API_KEY non impostata in .env&quot;</span>)\n            <span class=\"hljs-keyword\">return</span>\n\n        prompt = <span class=\"hljs-string\">f&quot;&quot;&quot;\n        Genera un playbook Ansible YAML sicuro e modulare a partire da questa configurazione Docker Compose e info server:\n        <span class=\"hljs-subst\">{json.dumps(data, indent=<span class=\"hljs-number\">2</span>)}</span>\n        &quot;&quot;&quot;</span>\n\n        client = gemini_client.GeminiClient(api_key)\n        response = client.call_api(prompt)\n\n        <span class=\"hljs-keyword\">if</span> response:\n            <span class=\"hljs-comment\"># Per semplicit&#xe0;: usiamo la generazione interna anche se API potrebbe generare playbook</span>\n            playbook = ansible_generator.generate_playbook(data)\n            <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(playbook_path, <span class=\"hljs-string\">&quot;w&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n                f.write(playbook)\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Playbook generato e salvato in <span class=\"hljs-subst\">{playbook_path}</span>&quot;</span>)\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Errore nella generazione tramite API Gemini&quot;</span>)\n\n    <span class=\"hljs-keyword\">if</span> args.notify:\n        bot_token = os.getenv(<span class=\"hljs-string\">&quot;TELEGRAM_BOT_TOKEN&quot;</span>)\n        chat_id = os.getenv(<span class=\"hljs-string\">&quot;TELEGRAM_CHAT_ID&quot;</span>)\n\n        <span class=\"hljs-keyword\">if</span> bot_token <span class=\"hljs-keyword\">and</span> chat_id:\n            message = <span class=\"hljs-string\">&quot;Playbook Ansible generato con successo.&quot;</span>\n            sent = notifier.send_telegram_message(bot_token, chat_id, message)\n            <span class=\"hljs-keyword\">if</span> sent:\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Notifica Telegram inviata.&quot;</span>)\n            <span class=\"hljs-keyword\">else</span>:\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Errore invio notifica Telegram.&quot;</span>)\n        <span class=\"hljs-keyword\">else</span>:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Parametri Telegram non configurati. Notifica saltata.&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"545,629"}}],"payload":{"tag":"h3","lines":"543,544"}},{"content":"docker-compose.yml","children":[{"content":"<pre data-lines=\"634,649\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&quot;3.8&quot;</span>\n\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">auto-ansible:</span>\n    <span class=\"hljs-attr\">build:</span> <span class=\"hljs-string\">.</span>\n    <span class=\"hljs-attr\">container_name:</span> <span class=\"hljs-string\">auto-ansible</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">./:/app</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">GEMINI_API_KEY=&#x24;{GEMINI_API_KEY}</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">TELEGRAM_BOT_TOKEN=&#x24;{TELEGRAM_BOT_TOKEN}</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">TELEGRAM_CHAT_ID=&#x24;{TELEGRAM_CHAT_ID}</span>\n    <span class=\"hljs-attr\">command:</span> <span class=\"hljs-string\">python</span> <span class=\"hljs-string\">src/main.py</span> <span class=\"hljs-string\">--scan</span> <span class=\"hljs-string\">--generate</span> <span class=\"hljs-string\">--notify</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"634,649"}}],"payload":{"tag":"h3","lines":"632,633"}},{"content":"scripts/run_discovery.sh","children":[{"content":"<pre data-lines=\"654,661\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n<span class=\"hljs-comment\"># Script semplice per eseguire la discovery su VPS</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Esecuzione discovery...&quot;</span>\npython3 src/discover.py --compose docker-compose.yml &gt; output/discovery.json\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Discovery completata.&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"654,661"}}],"payload":{"tag":"h3","lines":"652,653"}}],"payload":{"tag":"h1","lines":"452,453"}},{"content":"&#x1f9ea; Esempi","children":[{"content":"<code>examples/sample_docker_compose.yml</code>: esempio di docker-compose","children":[],"payload":{"tag":"li","lines":"666,667"}},{"content":"<code>examples/sample_config.json</code>: dati server simulati","children":[],"payload":{"tag":"li","lines":"667,668"}},{"content":"<code>examples/generated_playbook.yml</code>: playbook di esempio generato","children":[],"payload":{"tag":"li","lines":"668,670"}}],"payload":{"tag":"h1","lines":"664,665"}},{"content":"&#x1f4da; Testing","children":[{"content":"///","children":[],"payload":{"tag":"h2","lines":"703,705"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"712,714"}},{"content":"&#x1f4e6; Struttura del progetto","children":[{"content":"<pre data-lines=\"722,751\"><code data-lines=\"722,751\">auto-ansible-generator<span class=\"hljs-symbol\">/</span>\n&#x2502;\n&#x251c;&#x2500;&#x2500; cli.py                    <span class=\"hljs-comment\"># Interfaccia a riga di comando (Click)</span>\n&#x251c;&#x2500;&#x2500; app.py                    <span class=\"hljs-comment\"># Interfaccia web (Flask)</span>\n&#x251c;&#x2500;&#x2500; core<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; __init__.py\n&#x2502;   &#x251c;&#x2500;&#x2500; parser.py             <span class=\"hljs-comment\"># Analisi dei docker-compose e configurazioni</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; generator.py          <span class=\"hljs-comment\"># Generazione Playbook Ansible</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; notifier.py           <span class=\"hljs-comment\"># Notifiche Telegram/email</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; utils.py              <span class=\"hljs-comment\"># Funzioni di utilit&#xe0;</span>\n&#x2502;\n&#x251c;&#x2500;&#x2500; templates<span class=\"hljs-symbol\">/</span>                <span class=\"hljs-comment\"># HTML Flask (Jinja2)</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; index.html\n&#x2502;   &#x2514;&#x2500;&#x2500; result.html\n&#x2502;\n&#x251c;&#x2500;&#x2500; static<span class=\"hljs-symbol\">/</span>                   <span class=\"hljs-comment\"># Assets per frontend</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; style.css\n&#x2502;\n&#x251c;&#x2500;&#x2500; examples<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; docker-compose.yml    <span class=\"hljs-comment\"># Esempio reale</span>\n&#x2502;\n&#x251c;&#x2500;&#x2500; output<span class=\"hljs-symbol\">/</span>                   <span class=\"hljs-comment\"># Playbook e JSON generati</span>\n&#x2502;\n&#x251c;&#x2500;&#x2500; .env.example              <span class=\"hljs-comment\"># Variabili d&#x2019;ambiente</span>\n&#x251c;&#x2500;&#x2500; requirements.txt\n&#x251c;&#x2500;&#x2500; .gitignore\n&#x2514;&#x2500;&#x2500; README.md\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"722,751"}}],"payload":{"tag":"h2","lines":"720,721"}},{"content":"&#x1f539; <code>cli.py</code>","children":[{"content":"<pre data-lines=\"756,783\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> click\n<span class=\"hljs-keyword\">from</span> core <span class=\"hljs-keyword\">import</span> parser, generator\n\n<span class=\"hljs-meta\">@click.group()</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cli</span>():\n    <span class=\"hljs-string\">&quot;&quot;&quot;Auto-Ansible CLI&quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">pass</span>\n\n<span class=\"hljs-meta\">@cli.command()</span>\n<span class=\"hljs-meta\">@click.argument(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;compose_file&quot;</span>, <span class=\"hljs-built_in\">type</span>=click.Path(<span class=\"hljs-params\">exists=<span class=\"hljs-literal\">True</span></span>)</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">analyze</span>(<span class=\"hljs-params\">compose_file</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;Analizza un file docker-compose.yml&quot;&quot;&quot;</span>\n    data = parser.parse_compose(compose_file)\n    click.echo(<span class=\"hljs-string\">f&quot;Servizi trovati: <span class=\"hljs-subst\">{<span class=\"hljs-string\">&apos;, &apos;</span>.join(data[<span class=\"hljs-string\">&apos;services&apos;</span>])}</span>&quot;</span>)\n\n<span class=\"hljs-meta\">@cli.command()</span>\n<span class=\"hljs-meta\">@click.argument(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;compose_file&quot;</span>, <span class=\"hljs-built_in\">type</span>=click.Path(<span class=\"hljs-params\">exists=<span class=\"hljs-literal\">True</span></span>)</span>)</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;--format&quot;</span>, <span class=\"hljs-built_in\">type</span>=click.Choice(<span class=\"hljs-params\">[<span class=\"hljs-string\">&quot;json&quot;</span>, <span class=\"hljs-string\">&quot;yaml&quot;</span>, <span class=\"hljs-string\">&quot;html&quot;</span>]</span>), default=<span class=\"hljs-string\">&quot;yaml&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate</span>(<span class=\"hljs-params\">compose_file, <span class=\"hljs-built_in\">format</span></span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;Genera un playbook Ansible&quot;&quot;&quot;</span>\n    result = generator.generate_playbook(compose_file, <span class=\"hljs-built_in\">format</span>=<span class=\"hljs-built_in\">format</span>)\n    click.echo(<span class=\"hljs-string\">f&quot;Playbook creato: <span class=\"hljs-subst\">{result}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    cli()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"756,783"}}],"payload":{"tag":"h2","lines":"754,755"}},{"content":"&#x1f539; <code>app.py</code> (Flask)","children":[{"content":"<pre data-lines=\"788,811\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, request, render_template, redirect, url_for\n<span class=\"hljs-keyword\">from</span> core <span class=\"hljs-keyword\">import</span> generator\n<span class=\"hljs-keyword\">import</span> os\n\napp = Flask(__name__)\nUPLOAD_FOLDER = <span class=\"hljs-string\">&quot;./uploads&quot;</span>\nos.makedirs(UPLOAD_FOLDER, exist_ok=<span class=\"hljs-literal\">True</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/&quot;</span>, methods=[<span class=\"hljs-string\">&quot;GET&quot;</span>, <span class=\"hljs-string\">&quot;POST&quot;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>():\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&quot;POST&quot;</span>:\n        file = request.files[<span class=\"hljs-string\">&quot;compose&quot;</span>]\n        <span class=\"hljs-keyword\">if</span> file:\n            path = os.path.join(UPLOAD_FOLDER, file.filename)\n            file.save(path)\n            output = generator.generate_playbook(path, <span class=\"hljs-built_in\">format</span>=<span class=\"hljs-string\">&quot;html&quot;</span>)\n            <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&quot;result.html&quot;</span>, result=output)\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&quot;index.html&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    app.run(debug=<span class=\"hljs-literal\">True</span>, port=<span class=\"hljs-number\">5000</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"788,811"}}],"payload":{"tag":"h2","lines":"786,787"}},{"content":"&#x1f539; <code>core/parser.py</code>","children":[{"content":"<pre data-lines=\"816,828\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> yaml\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_compose</span>(<span class=\"hljs-params\">compose_file</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(compose_file, <span class=\"hljs-string\">&apos;r&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        data = yaml.safe_load(f)\n    services = data.get(<span class=\"hljs-string\">&quot;services&quot;</span>, {}).keys()\n    <span class=\"hljs-keyword\">return</span> {\n        <span class=\"hljs-string\">&quot;services&quot;</span>: <span class=\"hljs-built_in\">list</span>(services),\n        <span class=\"hljs-string\">&quot;raw&quot;</span>: data\n    }\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"816,828"}}],"payload":{"tag":"h2","lines":"814,815"}},{"content":"&#x1f539; <code>core/generator.py</code>","children":[{"content":"<pre data-lines=\"833,866\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> yaml, json, os\n<span class=\"hljs-keyword\">from</span> datetime <span class=\"hljs-keyword\">import</span> datetime\n<span class=\"hljs-keyword\">from</span> core.parser <span class=\"hljs-keyword\">import</span> parse_compose\n\nOUTPUT_DIR = <span class=\"hljs-string\">&quot;output&quot;</span>\nos.makedirs(OUTPUT_DIR, exist_ok=<span class=\"hljs-literal\">True</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_playbook</span>(<span class=\"hljs-params\">compose_file, <span class=\"hljs-built_in\">format</span>=<span class=\"hljs-string\">&quot;yaml&quot;</span></span>):\n    data = parse_compose(compose_file)\n    playbook = [{\n        <span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Deploy <span class=\"hljs-subst\">{s}</span>&quot;</span>,\n        <span class=\"hljs-string\">&quot;hosts&quot;</span>: <span class=\"hljs-string\">&quot;all&quot;</span>,\n        <span class=\"hljs-string\">&quot;become&quot;</span>: <span class=\"hljs-literal\">True</span>,\n        <span class=\"hljs-string\">&quot;tasks&quot;</span>: [\n            {<span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Ensure <span class=\"hljs-subst\">{s}</span> is running&quot;</span>, <span class=\"hljs-string\">&quot;docker_container&quot;</span>: {<span class=\"hljs-string\">&quot;name&quot;</span>: s, <span class=\"hljs-string\">&quot;image&quot;</span>: <span class=\"hljs-string\">&quot;PLACEHOLDER&quot;</span>}}\n        ]\n    } <span class=\"hljs-keyword\">for</span> s <span class=\"hljs-keyword\">in</span> data[<span class=\"hljs-string\">&quot;services&quot;</span>]]\n\n    timestamp = datetime.now().strftime(<span class=\"hljs-string\">&quot;%Y%m%d_%H%M%S&quot;</span>)\n    filename = <span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{OUTPUT_DIR}</span>/playbook_<span class=\"hljs-subst\">{timestamp}</span>.<span class=\"hljs-subst\">{<span class=\"hljs-built_in\">format</span>}</span>&quot;</span>\n\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(filename, <span class=\"hljs-string\">&quot;w&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">format</span> == <span class=\"hljs-string\">&quot;json&quot;</span>:\n            json.dump(playbook, f, indent=<span class=\"hljs-number\">2</span>)\n        <span class=\"hljs-keyword\">elif</span> <span class=\"hljs-built_in\">format</span> == <span class=\"hljs-string\">&quot;yaml&quot;</span>:\n            yaml.dump(playbook, f)\n        <span class=\"hljs-keyword\">elif</span> <span class=\"hljs-built_in\">format</span> == <span class=\"hljs-string\">&quot;html&quot;</span>:\n            html = <span class=\"hljs-string\">&quot;&lt;h1&gt;Playbook&lt;/h1&gt;&lt;pre&gt;&quot;</span> + yaml.dump(playbook) + <span class=\"hljs-string\">&quot;&lt;/pre&gt;&quot;</span>\n            f.write(html)\n\n    <span class=\"hljs-keyword\">return</span> filename\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"833,866"}}],"payload":{"tag":"h2","lines":"831,832"}},{"content":"&#x1f539; <code>templates/index.html</code>","children":[{"content":"<pre data-lines=\"871,884\"><code class=\"language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Auto Ansible<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Carica docker-compose.yml<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">method</span>=<span class=\"hljs-string\">&quot;post&quot;</span> <span class=\"hljs-attr\">enctype</span>=<span class=\"hljs-string\">&quot;multipart/form-data&quot;</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;file&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;compose&quot;</span> <span class=\"hljs-attr\">required</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;submit&quot;</span> <span class=\"hljs-attr\">value</span>=<span class=\"hljs-string\">&quot;Genera Playbook&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"871,884"}}],"payload":{"tag":"h2","lines":"869,870"}},{"content":"&#x1f539; <code>templates/result.html</code>","children":[{"content":"<pre data-lines=\"889,899\"><code class=\"language-html\"><span class=\"hljs-meta\">&lt;!DOCTYPE <span class=\"hljs-keyword\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">html</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">head</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">title</span>&gt;</span>Risultato<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">title</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">head</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">body</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h1</span>&gt;</span>Playbook Generato!<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h1</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;{{ result }}&quot;</span>&gt;</span>Scarica Output<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">body</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">html</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"889,899"}}],"payload":{"tag":"h2","lines":"887,888"}},{"content":"&#x1f539; <code>.env.example</code>","children":[{"content":"<pre data-lines=\"904,909\"><code class=\"language-dotenv\">GEMINI_API_KEY=your-gemini-key\nTELEGRAM_TOKEN=xxx\nTELEGRAM_CHAT_ID=xxx\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"904,909"}}],"payload":{"tag":"h2","lines":"902,903"}},{"content":"&#x1f539; <code>requirements.txt</code>","children":[{"content":"<pre data-lines=\"914,920\"><code data-lines=\"914,920\">flask\npyyaml\nclick\npython-dotenv\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"914,920"}}],"payload":{"tag":"h2","lines":"912,913"}},{"content":"&#x1f539; <code>.gitignore</code>","children":[{"content":"<pre data-lines=\"925,932\"><code data-lines=\"925,932\">__pycache__<span class=\"hljs-symbol\">/</span>\n<span class=\"hljs-operator\">*</span>.pyc\n.env\noutput<span class=\"hljs-symbol\">/</span>\nuploads<span class=\"hljs-symbol\">/</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"925,932"}}],"payload":{"tag":"h2","lines":"923,924"}},{"content":"&#x1f539; <code>README.md</code> (sintesi)","children":[{"content":"<pre data-lines=\"937,965\"><code class=\"language-markdown\"><span class=\"hljs-section\"># &#x1f6e0;&#xfe0f; Auto Ansible Generator</span>\n\nGenera playbook Ansible automaticamente dai tuoi file docker-compose.yml, via CLI o interfaccia web.\n\n<span class=\"hljs-section\">## &#x1f3af; Obiettivi</span>\n\n<span class=\"hljs-bullet\">-</span> Analisi sicura di container e configurazioni\n<span class=\"hljs-bullet\">-</span> Output YAML, JSON o HTML\n<span class=\"hljs-bullet\">-</span> Notifiche integrate (Telegram, email)\n<span class=\"hljs-bullet\">-</span> Interfaccia CLI e Web\n\n<span class=\"hljs-section\">## &#x1f9f0; Tecnologie</span>\n\n<span class=\"hljs-bullet\">-</span> Python 3.10+\n<span class=\"hljs-bullet\">-</span> Flask\n<span class=\"hljs-bullet\">-</span> Click\n<span class=\"hljs-bullet\">-</span> YAML, JSON\n<span class=\"hljs-bullet\">-</span> Gemini API (facoltativa)\n\n<span class=\"hljs-section\">## &#x1f680; Installazione</span>\n\n<span class=\"hljs-code\">```bash\ngit clone ...\ncd auto-ansible-generator\npip install -r requirements.txt\ncp .env.example .env\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"937,965"}}],"payload":{"tag":"h2","lines":"935,936"}},{"content":"&#x1f4e6; CLI","children":[{"content":"<pre data-lines=\"968,972\"><code class=\"language-bash\">python cli.py analyze examples/docker-compose.yml\npython cli.py generate examples/docker-compose.yml --format yaml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"968,972"}}],"payload":{"tag":"h2","lines":"966,967"}},{"content":"&#x1f30d; Web","children":[{"content":"<pre data-lines=\"975,978\"><code class=\"language-bash\">python app.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"975,978"}}],"payload":{"tag":"h2","lines":"973,974"}},{"content":"&#x1f4dc; Licenza","children":[{"content":"<pre data-lines=\"985,997\"><code data-lines=\"985,997\">\n<span class=\"hljs-meta\">---\n</span>\n<span class=\"hljs-string\">Posso</span> <span class=\"hljs-string\">anche</span> <span class=\"hljs-string\">prepararti</span> <span class=\"hljs-string\">un</span> <span class=\"hljs-string\">`.zip`</span> <span class=\"hljs-string\">o</span> <span class=\"hljs-string\">un</span> <span class=\"hljs-string\">comando</span> <span class=\"hljs-string\">`curl</span> <span class=\"hljs-string\">|</span> <span class=\"hljs-string\">sh`</span> <span class=\"hljs-attr\">per il bootstrap automatico. Vuoi anche:</span>\n\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">con</span> <span class=\"hljs-string\">`Dockerfile`?</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Supporto</span> <span class=\"hljs-string\">per</span> <span class=\"hljs-string\">autenticazione</span> <span class=\"hljs-string\">nella</span> <span class=\"hljs-string\">web</span> <span class=\"hljs-string\">UI?</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">Generazione</span> <span class=\"hljs-string\">automatica</span> <span class=\"hljs-string\">tramite</span> <span class=\"hljs-string\">hook</span> <span class=\"hljs-string\">Git?</span>\n\n<span class=\"hljs-string\">Fammi</span> <span class=\"hljs-string\">sapere!</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"985,997"}}],"payload":{"tag":"h2","lines":"981,982"}},{"content":"///","children":[{"content":"Comando <code>curl | sh</code> per il bootstrap automatico","children":[],"payload":{"tag":"li","lines":"1005,1006"}},{"content":"Deploy con <code>Dockerfile</code>","children":[],"payload":{"tag":"li","lines":"1006,1007"}},{"content":"Supporto per autenticazione nella web UI","children":[],"payload":{"tag":"li","lines":"1007,1008"}},{"content":"Generazione automatica tramite hook Git","children":[],"payload":{"tag":"li","lines":"1008,1010"}}],"payload":{"tag":"h2","lines":"1002,1004"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"1011,1013"}},{"content":"&#x2705; 1. Comando <code>curl | sh</code> per bootstrap automatico","children":[{"content":"&#x1f527; <code>install.sh</code> (bootstrap)","children":[{"content":"<pre data-lines=\"1022,1044\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n\n<span class=\"hljs-built_in\">set</span> -e\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x1f4e6; Clonazione del progetto Auto Ansible Generator...&quot;</span>\ngit <span class=\"hljs-built_in\">clone</span> https://github.com/tuo-utente/auto-ansible-generator.git\n<span class=\"hljs-built_in\">cd</span> auto-ansible-generator\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x1f40d; Creazione dell&apos;ambiente virtuale Python...&quot;</span>\npython3 -m venv .venv\n<span class=\"hljs-built_in\">source</span> .venv/bin/activate\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x1f4e6; Installazione delle dipendenze...&quot;</span>\npip install -r requirements.txt\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x2699;&#xfe0f; Copia del file .env.example...&quot;</span>\n<span class=\"hljs-built_in\">cp</span> .env.example .<span class=\"hljs-built_in\">env</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x2705; Installazione completata.&quot;</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x1f449; Per avviare l&apos;interfaccia web: source .venv/bin/activate &amp;&amp; python app.py&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1022,1044"}},{"content":"<pre data-lines=\"1047,1050\"><code class=\"language-bash\">curl -sSL https://raw.githubusercontent.com/tuo-utente/auto-ansible-generator/main/install.sh | bash\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1047,1050"}}],"payload":{"tag":"h3","lines":"1020,1021"}}],"payload":{"tag":"h2","lines":"1018,1019"}},{"content":"&#x1f433; 2. Dockerfile per deploy","children":[{"content":"&#x1f527; <code>Dockerfile</code>","children":[{"content":"<pre data-lines=\"1059,1077\"><code class=\"language-dockerfile\"><span class=\"hljs-keyword\">FROM</span> python:<span class=\"hljs-number\">3.11</span>-slim\n\n<span class=\"hljs-keyword\">WORKDIR</span><span class=\"language-bash\"> /app</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> . /app</span>\n\n<span class=\"hljs-keyword\">RUN</span><span class=\"language-bash\"> pip install --upgrade pip &amp;&amp; \\\n    pip install -r requirements.txt &amp;&amp; \\\n    <span class=\"hljs-built_in\">mkdir</span> -p uploads output</span>\n\n<span class=\"hljs-keyword\">ENV</span> FLASK_APP=app.py\n<span class=\"hljs-keyword\">ENV</span> FLASK_RUN_PORT=<span class=\"hljs-number\">5000</span>\n\n<span class=\"hljs-keyword\">EXPOSE</span> <span class=\"hljs-number\">5000</span>\n\n<span class=\"hljs-keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"hljs-string\">&quot;flask&quot;</span>, <span class=\"hljs-string\">&quot;run&quot;</span>, <span class=\"hljs-string\">&quot;--host=0.0.0.0&quot;</span>]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1059,1077"}}],"payload":{"tag":"h3","lines":"1057,1058"}},{"content":"&#x1f527; <code>docker-compose.yml</code>","children":[{"content":"<pre data-lines=\"1080,1095\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&quot;3.9&quot;</span>\n\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">auto-ansible:</span>\n    <span class=\"hljs-attr\">build:</span> <span class=\"hljs-string\">.</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;5000:5000&quot;</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">./output:/app/output</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">./uploads:/app/uploads</span>\n    <span class=\"hljs-attr\">environment:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">FLASK_ENV=production</span>\n    <span class=\"hljs-attr\">restart:</span> <span class=\"hljs-string\">unless-stopped</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1080,1095"}},{"content":"<pre data-lines=\"1098,1101\"><code class=\"language-bash\">docker-compose up --build\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1098,1101"}}],"payload":{"tag":"h3","lines":"1078,1079"}}],"payload":{"tag":"h2","lines":"1055,1056"}},{"content":"&#x1f510; 3. Autenticazione nella web UI","children":[{"content":"&#x1f527; Aggiunta nel <code>app.py</code>","children":[{"content":"<pre data-lines=\"1110,1144\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, request, render_template, redirect, url_for, session\n<span class=\"hljs-keyword\">from</span> functools <span class=\"hljs-keyword\">import</span> wraps\n\napp.secret_key = <span class=\"hljs-string\">&quot;SOSTITUISCI_QUESTO_CON_UNA_CHIAVE_FORTE&quot;</span>\nUSERNAME = <span class=\"hljs-string\">&quot;admin&quot;</span>\nPASSWORD = <span class=\"hljs-string\">&quot;password&quot;</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login_required</span>(<span class=\"hljs-params\">f</span>):\n<span class=\"hljs-meta\">    @wraps(<span class=\"hljs-params\">f</span>)</span>\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">decorated</span>(<span class=\"hljs-params\">*args, **kwargs</span>):\n        <span class=\"hljs-keyword\">if</span> session.get(<span class=\"hljs-string\">&quot;logged_in&quot;</span>):\n            <span class=\"hljs-keyword\">return</span> f(*args, **kwargs)\n        <span class=\"hljs-keyword\">return</span> redirect(url_for(<span class=\"hljs-string\">&quot;login&quot;</span>))\n    <span class=\"hljs-keyword\">return</span> decorated\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/login&quot;</span>, methods=[<span class=\"hljs-string\">&quot;GET&quot;</span>, <span class=\"hljs-string\">&quot;POST&quot;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&quot;POST&quot;</span>:\n        <span class=\"hljs-keyword\">if</span> request.form[<span class=\"hljs-string\">&quot;username&quot;</span>] == USERNAME <span class=\"hljs-keyword\">and</span> request.form[<span class=\"hljs-string\">&quot;password&quot;</span>] == PASSWORD:\n            session[<span class=\"hljs-string\">&quot;logged_in&quot;</span>] = <span class=\"hljs-literal\">True</span>\n            <span class=\"hljs-keyword\">return</span> redirect(url_for(<span class=\"hljs-string\">&quot;index&quot;</span>))\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&quot;login.html&quot;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/logout&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">logout</span>():\n    session.clear()\n    <span class=\"hljs-keyword\">return</span> redirect(url_for(<span class=\"hljs-string\">&quot;login&quot;</span>))\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/&quot;</span>, methods=[<span class=\"hljs-string\">&quot;GET&quot;</span>, <span class=\"hljs-string\">&quot;POST&quot;</span>]</span>)</span>\n<span class=\"hljs-meta\">@login_required</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>():\n    ...\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1110,1144"}}],"payload":{"tag":"h3","lines":"1106,1107"}},{"content":"&#x1f527; <code>templates/login.html</code>","children":[{"content":"<pre data-lines=\"1147,1155\"><code class=\"language-html\"><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">form</span> <span class=\"hljs-attr\">method</span>=<span class=\"hljs-string\">&quot;post&quot;</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">h2</span>&gt;</span>Login<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">h2</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;text&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;username&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">&quot;Username&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">input</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">name</span>=<span class=\"hljs-string\">&quot;password&quot;</span> <span class=\"hljs-attr\">placeholder</span>=<span class=\"hljs-string\">&quot;Password&quot;</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">br</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">button</span> <span class=\"hljs-attr\">type</span>=<span class=\"hljs-string\">&quot;submit&quot;</span>&gt;</span>Accedi<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">button</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">form</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1147,1155"}}],"payload":{"tag":"h3","lines":"1145,1146"}}],"payload":{"tag":"h2","lines":"1104,1105"}},{"content":"&#x1f504; 4. Hook Git per rigenerazione automatica","children":[{"content":"&#x1f527; <code>post-merge</code> (esempio hook Git)","children":[{"content":"<pre data-lines=\"1164,1170\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;&#x1f504; Modifiche rilevate, rigenero i playbook...&quot;</span>\n<span class=\"hljs-built_in\">source</span> .venv/bin/activate\npython cli.py generate examples/docker-compose.yml --format yaml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1164,1170"}},{"content":"<pre data-lines=\"1173,1176\"><code class=\"language-bash\"><span class=\"hljs-built_in\">chmod</span> +x .git/hooks/post-merge\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1173,1176"}}],"payload":{"tag":"h3","lines":"1160,1161"}}],"payload":{"tag":"h2","lines":"1158,1159"}},{"content":"&#x1f9ea; Verifica finale","children":[{"content":"<table data-lines=\"1181,1188\">\n<thead data-lines=\"1181,1182\">\n<tr data-lines=\"1181,1182\">\n<th>Componente</th>\n<th>Stato</th>\n<th></th>\n</tr>\n</thead>\n<tbody data-lines=\"1183,1188\">\n<tr data-lines=\"1183,1184\">\n<td>CLI estesa</td>\n<td>&#x2705;</td>\n<td></td>\n</tr>\n<tr data-lines=\"1184,1185\">\n<td>Interfaccia web con autenticazione</td>\n<td>&#x2705;</td>\n<td></td>\n</tr>\n<tr data-lines=\"1185,1186\">\n<td>Docker supportato</td>\n<td>&#x2705;</td>\n<td></td>\n</tr>\n<tr data-lines=\"1186,1187\">\n<td>Bootstrap `curl</td>\n<td>sh`</td>\n<td>&#x2705;</td>\n</tr>\n<tr data-lines=\"1187,1188\">\n<td>Hook Git per rigenerazione</td>\n<td>&#x2705;</td>\n<td></td>\n</tr>\n</tbody>\n</table>","children":[],"payload":{"tag":"table","lines":"1181,1188"}}],"payload":{"tag":"h2","lines":"1179,1180"}},{"content":"///","children":[{"content":"1. \n<p data-lines=\"1213,1214\">Una descrizione chiara e dettagliata nel file <code>README.md</code>, comprensiva di:</p>","children":[{"content":"Obiettivi del progetto","children":[],"payload":{"tag":"li","lines":"1215,1216"}},{"content":"Contesto e finalit&#xe0;","children":[],"payload":{"tag":"li","lines":"1216,1217"}},{"content":"Istruzioni per l&#x2019;installazione, l&#x2019;uso e l&#x2019;eventuale distribuzione","children":[],"payload":{"tag":"li","lines":"1217,1218"}},{"content":"Tecnologie utilizzate","children":[],"payload":{"tag":"li","lines":"1218,1220"}}],"payload":{"tag":"li","lines":"1213,1220","listIndex":1}},{"content":"2. \n<p data-lines=\"1220,1221\">La struttura completa delle cartelle e dei file del progetto, con un layout coerente e facilmente navigabile.</p>","children":[],"payload":{"tag":"li","lines":"1220,1222","listIndex":2}},{"content":"3. \n<p data-lines=\"1222,1223\">Il codice sorgente completo e funzionante, incluso:</p>","children":[{"content":"Tutti gli script o moduli principali","children":[],"payload":{"tag":"li","lines":"1224,1225"}},{"content":"Funzioni ben commentate e documentate","children":[],"payload":{"tag":"li","lines":"1225,1226"}},{"content":"Eventuali file di configurazione (<code>.env.example</code>, <code>config.json</code>, <code>settings.py</code>, ecc.)","children":[],"payload":{"tag":"li","lines":"1226,1228"}}],"payload":{"tag":"li","lines":"1222,1228","listIndex":3}},{"content":"4. \n<p data-lines=\"1228,1229\">Eventuali risorse accessorie:</p>","children":[{"content":"Esempi d&#x2019;uso (<code>examples/</code>)","children":[],"payload":{"tag":"li","lines":"1230,1231"}},{"content":"Script di test o automazione (<code>tests/</code>, <code>scripts/</code>)","children":[],"payload":{"tag":"li","lines":"1231,1232"}},{"content":"Dipendenze elencate (<code>requirements.txt</code>, <code>package.json</code>, ecc.)","children":[],"payload":{"tag":"li","lines":"1232,1234"}}],"payload":{"tag":"li","lines":"1228,1234","listIndex":4}},{"content":"5. \n<p data-lines=\"1234,1235\">Un file <code>.gitignore</code> coerente con il progetto</p>","children":[],"payload":{"tag":"li","lines":"1234,1236","listIndex":5}},{"content":"6. \n<p data-lines=\"1236,1237\">Licenza del progetto (<code>LICENSE</code>), preferibilmente una licenza open-source</p>","children":[],"payload":{"tag":"li","lines":"1236,1238","listIndex":6}}],"payload":{"tag":"h2","lines":"1208,1210"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"1241,1243"}}],"payload":{"tag":"h1","lines":"672,673"}},{"content":"&#x1f6e0;&#xfe0f; Progetto: Auto Ansible Generator","children":[{"content":"&#x1f4c1; Struttura del progetto","children":[{"content":"<pre data-lines=\"1256,1285\"><code class=\"language-plaintext\">auto-ansible-generator/\n&#x251c;&#x2500;&#x2500; app.py                         # Interfaccia web (Flask)\n&#x251c;&#x2500;&#x2500; cli.py                         # CLI principale\n&#x251c;&#x2500;&#x2500; parser/\n&#x2502;   &#x251c;&#x2500;&#x2500; __init__.py\n&#x2502;   &#x251c;&#x2500;&#x2500; docker_compose.py          # Parser YAML &#x2192; Ansible\n&#x2502;   &#x2514;&#x2500;&#x2500; system_inspector.py        # Estrazione info da sistema\n&#x251c;&#x2500;&#x2500; templates/\n&#x2502;   &#x251c;&#x2500;&#x2500; index.html                 # UI web principale\n&#x2502;   &#x2514;&#x2500;&#x2500; login.html                 # Login semplice\n&#x251c;&#x2500;&#x2500; static/\n&#x2502;   &#x2514;&#x2500;&#x2500; styles.css\n&#x251c;&#x2500;&#x2500; examples/\n&#x2502;   &#x2514;&#x2500;&#x2500; docker-compose.yml         # File di esempio\n&#x251c;&#x2500;&#x2500; output/\n&#x2502;   &#x2514;&#x2500;&#x2500; generated_playbook.yml     # Output Ansible\n&#x251c;&#x2500;&#x2500; uploads/                       # Upload file Docker Compose\n&#x251c;&#x2500;&#x2500; scripts/\n&#x2502;   &#x251c;&#x2500;&#x2500; install.sh                 # Installazione via curl | sh\n&#x2502;   &#x2514;&#x2500;&#x2500; post-merge                 # Hook Git (auto rigenera)\n&#x251c;&#x2500;&#x2500; Dockerfile                     # Deploy containerizzato\n&#x251c;&#x2500;&#x2500; docker-compose.yml             # Avvio rapido in locale\n&#x251c;&#x2500;&#x2500; .gitignore\n&#x251c;&#x2500;&#x2500; .env.example\n&#x251c;&#x2500;&#x2500; requirements.txt\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x2514;&#x2500;&#x2500; README.md\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1256,1285"}}],"payload":{"tag":"h2","lines":"1254,1255"}},{"content":"&#x1f4d6; README.md","children":[{"content":"&#x1f433; Metodo 2 &#x2013; Docker","children":[{"content":"<pre data-lines=\"1321,1326\"><code class=\"language-bash\">git <span class=\"hljs-built_in\">clone</span> https://github.com/tuo-user/auto-ansible-generator.git\n<span class=\"hljs-built_in\">cd</span> auto-ansible-generator\ndocker-compose up --build\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1321,1326"}}],"payload":{"tag":"h3","lines":"1319,1320"}}],"payload":{"tag":"h2","lines":"1288,1289"}},{"content":"&#x1f680; Utilizzo","children":[{"content":"&#x1f4cc; CLI","children":[{"content":"<pre data-lines=\"1331,1334\"><code class=\"language-bash\">python cli.py generate examples/docker-compose.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1331,1334"}}],"payload":{"tag":"h3","lines":"1329,1330"}},{"content":"&#x1f310; Web UI","children":[{"content":"Avvia con <code>python app.py</code>","children":[],"payload":{"tag":"li","lines":"1337,1338"}},{"content":"Vai su <code>http://localhost:5000</code>","children":[],"payload":{"tag":"li","lines":"1338,1339"}},{"content":"Login: <code>admin / password</code>","children":[],"payload":{"tag":"li","lines":"1339,1341"}}],"payload":{"tag":"h3","lines":"1335,1336"}}],"payload":{"tag":"h2","lines":"1327,1328"}},{"content":"&#x1f510; Sicurezza","children":[{"content":"Web UI protetta da login","children":[],"payload":{"tag":"li","lines":"1343,1344"}},{"content":"Nessun comando pericoloso eseguito lato server","children":[],"payload":{"tag":"li","lines":"1344,1345"}},{"content":"Estensioni future: 2FA, notifiche Telegram/email","children":[],"payload":{"tag":"li","lines":"1345,1347"}}],"payload":{"tag":"h2","lines":"1341,1342"}},{"content":"&#x1f9ea; Test","children":[{"content":"<pre data-lines=\"1349,1352\"><code class=\"language-bash\">pytest tests/\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1349,1352"}}],"payload":{"tag":"h2","lines":"1347,1348"}},{"content":"&#x1f4c4; Licenza","children":[{"content":"<pre data-lines=\"1357,1387\"><code data-lines=\"1357,1387\">\n---\n\n<span class=\"hljs-comment\">## &#x1f527; Codice principale</span>\n\n<span class=\"hljs-comment\">### `cli.py` &#x2013; CLI per generazione Ansible</span>\n\n```python\nimport argparse\n<span class=\"hljs-keyword\">from</span> parser.docker_compose import parse_compose\n<span class=\"hljs-keyword\">from</span> parser.system_inspector import inspect_system\n\ndef main():\n    parser = argparse.ArgumentParser(<span class=\"hljs-attribute\">description</span>=<span class=\"hljs-string\">&quot;Genera playbook Ansible da docker-compose.yml&quot;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&quot;file&quot;</span>, <span class=\"hljs-attribute\">help</span>=<span class=\"hljs-string\">&quot;Path al file docker-compose.yml&quot;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&quot;--output&quot;</span>, <span class=\"hljs-attribute\">default</span>=<span class=\"hljs-string\">&quot;output/generated_playbook.yml&quot;</span>, <span class=\"hljs-attribute\">help</span>=<span class=\"hljs-string\">&quot;File di output&quot;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&quot;--format&quot;</span>, choices=[<span class=\"hljs-string\">&quot;yaml&quot;</span>, <span class=\"hljs-string\">&quot;json&quot;</span>], <span class=\"hljs-attribute\">default</span>=<span class=\"hljs-string\">&quot;yaml&quot;</span>)\n\n    args = parser.parse_args()\n\n    result = parse_compose(args.file)\n    with open(args.output, <span class=\"hljs-string\">&quot;w&quot;</span>) as f:\n        f.write(result.to_yaml() <span class=\"hljs-keyword\">if</span> args.format == <span class=\"hljs-string\">&quot;yaml&quot;</span> <span class=\"hljs-keyword\">else</span> result.to_json())\n\n    <span class=\"hljs-built_in\">print</span>(f<span class=\"hljs-string\">&quot;&#x2705; Playbook generato: {args.output}&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    main()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1357,1387"}}],"payload":{"tag":"h2","lines":"1353,1354"}},{"content":"&#x1f310; Web UI &#x2013; <code>app.py</code> (Flask)","children":[{"content":"<pre data-lines=\"1392,1433\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, render_template, request, redirect, url_for, session\n<span class=\"hljs-keyword\">from</span> parser.docker_compose <span class=\"hljs-keyword\">import</span> parse_compose\n<span class=\"hljs-keyword\">import</span> os\n\napp = Flask(__name__)\napp.secret_key = os.getenv(<span class=\"hljs-string\">&quot;SECRET_KEY&quot;</span>, <span class=\"hljs-string\">&quot;default_secret&quot;</span>)\n\nUSERNAME = <span class=\"hljs-string\">&quot;admin&quot;</span>\nPASSWORD = <span class=\"hljs-string\">&quot;password&quot;</span>\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/login&quot;</span>, methods=[<span class=\"hljs-string\">&quot;GET&quot;</span>, <span class=\"hljs-string\">&quot;POST&quot;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">login</span>():\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&quot;POST&quot;</span>:\n        <span class=\"hljs-keyword\">if</span> request.form[<span class=\"hljs-string\">&quot;username&quot;</span>] == USERNAME <span class=\"hljs-keyword\">and</span> request.form[<span class=\"hljs-string\">&quot;password&quot;</span>] == PASSWORD:\n            session[<span class=\"hljs-string\">&quot;logged_in&quot;</span>] = <span class=\"hljs-literal\">True</span>\n            <span class=\"hljs-keyword\">return</span> redirect(url_for(<span class=\"hljs-string\">&quot;index&quot;</span>))\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&quot;login.html&quot;</span>)\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/logout&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">logout</span>():\n    session.clear()\n    <span class=\"hljs-keyword\">return</span> redirect(url_for(<span class=\"hljs-string\">&quot;login&quot;</span>))\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/&quot;</span>, methods=[<span class=\"hljs-string\">&quot;GET&quot;</span>, <span class=\"hljs-string\">&quot;POST&quot;</span>]</span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">index</span>():\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> session.get(<span class=\"hljs-string\">&quot;logged_in&quot;</span>):\n        <span class=\"hljs-keyword\">return</span> redirect(url_for(<span class=\"hljs-string\">&quot;login&quot;</span>))\n\n    result = <span class=\"hljs-literal\">None</span>\n    <span class=\"hljs-keyword\">if</span> request.method == <span class=\"hljs-string\">&quot;POST&quot;</span>:\n        file = request.files[<span class=\"hljs-string\">&quot;file&quot;</span>]\n        <span class=\"hljs-keyword\">if</span> file:\n            file_path = os.path.join(<span class=\"hljs-string\">&quot;uploads&quot;</span>, file.filename)\n            file.save(file_path)\n            result = parse_compose(file_path)\n    <span class=\"hljs-keyword\">return</span> render_template(<span class=\"hljs-string\">&quot;index.html&quot;</span>, result=result)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    app.run(debug=<span class=\"hljs-literal\">True</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1392,1433"}}],"payload":{"tag":"h2","lines":"1390,1391"}},{"content":"&#x1f9e9; <code>parser/docker_compose.py</code>","children":[{"content":"<pre data-lines=\"1438,1457\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> yaml\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">AnsiblePlaybook</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, services</span>):\n        <span class=\"hljs-variable language_\">self</span>.services = services\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">to_yaml</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-keyword\">return</span> yaml.dump({\n            <span class=\"hljs-string\">&quot;hosts&quot;</span>: <span class=\"hljs-string\">&quot;all&quot;</span>,\n            <span class=\"hljs-string\">&quot;tasks&quot;</span>: [{<span class=\"hljs-string\">&quot;name&quot;</span>: <span class=\"hljs-string\">f&quot;Deploy <span class=\"hljs-subst\">{name}</span>&quot;</span>, <span class=\"hljs-string\">&quot;docker_container&quot;</span>: conf}\n                      <span class=\"hljs-keyword\">for</span> name, conf <span class=\"hljs-keyword\">in</span> <span class=\"hljs-variable language_\">self</span>.services.items()]\n        })\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">parse_compose</span>(<span class=\"hljs-params\">file_path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(file_path) <span class=\"hljs-keyword\">as</span> f:\n        data = yaml.safe_load(f)\n    <span class=\"hljs-keyword\">return</span> AnsiblePlaybook(data.get(<span class=\"hljs-string\">&quot;services&quot;</span>, {}))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1438,1457"}}],"payload":{"tag":"h2","lines":"1436,1437"}},{"content":"&#x1f4e6; <code>requirements.txt</code>","children":[{"content":"<pre data-lines=\"1462,1466\"><code data-lines=\"1462,1466\"><span class=\"hljs-attribute\">Flask\nPyYAML</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1462,1466"}}],"payload":{"tag":"h2","lines":"1460,1461"}},{"content":"&#x2699;&#xfe0f; <code>.env.example</code>","children":[{"content":"<pre data-lines=\"1471,1474\"><code data-lines=\"1471,1474\"><span class=\"hljs-attr\">SECRET_KEY</span>=changeme\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1471,1474"}}],"payload":{"tag":"h2","lines":"1469,1470"}},{"content":"&#x1f5d1;&#xfe0f; <code>.gitignore</code>","children":[{"content":"<pre data-lines=\"1479,1487\"><code data-lines=\"1479,1487\">.venv<span class=\"hljs-symbol\">/</span>\n__pycache__<span class=\"hljs-symbol\">/</span>\n<span class=\"hljs-operator\">*</span>.pyc\n.env\noutput<span class=\"hljs-symbol\">/</span>\nuploads<span class=\"hljs-symbol\">/</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1479,1487"}}],"payload":{"tag":"h2","lines":"1477,1478"}},{"content":"&#x1f4dc; LICENSE","children":[{"content":"<pre data-lines=\"1492,1497\"><code class=\"language-text\">MIT License\nCopyright (c) 2025\nPermission is hereby granted...\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1492,1497"}}],"payload":{"tag":"h2","lines":"1490,1491"}},{"content":"&#x1f4da; Esempio <code>docker-compose.yml</code>","children":[{"content":"<pre data-lines=\"1502,1510\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&quot;3.8&quot;</span>\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">app:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;80:80&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1502,1510"}}],"payload":{"tag":"h2","lines":"1500,1501"}},{"content":"&#x2728; Estensioni possibili","children":[{"content":"<pre data-lines=\"1527,1534\"><code class=\"language-bash\">git init\ngit add .\ngit commit -m <span class=\"hljs-string\">&quot;Initial release&quot;</span>\ngit remote add origin git@github.com:tuo-utente/auto-ansible-generator.git\ngit push -u origin main\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1527,1534"}}],"payload":{"tag":"h2","lines":"1513,1514"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"1545,1547"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"1551,1553"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"1558,1560"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"1564,1566"}}],"payload":{"tag":"h1","lines":"1248,1249"}},{"content":"&#x1f680; Progetto: <strong>Docker Compose to Ansible Playbook + Security Auditor</strong>","children":[{"content":"1. <code>README.md</code>","children":[{"content":"Uso CLI","children":[{"content":"<pre data-lines=\"1621,1624\"><code class=\"language-bash\">python cli.py --analyze path/to/docker-compose.yml --inventory path/to/inventory.json --output report.json\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1621,1624"}}],"payload":{"tag":"h3","lines":"1619,1620"}},{"content":"Uso Web UI","children":[{"content":"Avvia il server FastAPI","children":[],"payload":{"tag":"li","lines":"1627,1628"}},{"content":"Apri browser su <code>http://localhost:8000</code>","children":[],"payload":{"tag":"li","lines":"1628,1629"}},{"content":"Carica file docker-compose, configura policy, genera playbook e report","children":[],"payload":{"tag":"li","lines":"1629,1631"}}],"payload":{"tag":"h3","lines":"1625,1626"}},{"content":"Deploy Docker","children":[{"content":"<pre data-lines=\"1633,1637\"><code class=\"language-bash\">docker build -t dc2ansible .\ndocker run -d -p 8000:8000 --env-file .<span class=\"hljs-built_in\">env</span> dc2ansible\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1633,1637"}}],"payload":{"tag":"h3","lines":"1631,1632"}},{"content":"Bootstrap automatico","children":[{"content":"<pre data-lines=\"1640,1643\"><code class=\"language-bash\">curl -fsSL https://raw.githubusercontent.com/tuoutente/docker-compose-to-ansible/main/bootstrap.sh | sh\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1640,1643"}}],"payload":{"tag":"h3","lines":"1638,1639"}}],"payload":{"tag":"h2","lines":"1575,1576"}},{"content":"Tecnologie utilizzate","children":[{"content":"Python 3.9+","children":[],"payload":{"tag":"li","lines":"1646,1647"}},{"content":"FastAPI (Web UI)","children":[],"payload":{"tag":"li","lines":"1647,1648"}},{"content":"Click (CLI)","children":[],"payload":{"tag":"li","lines":"1648,1649"}},{"content":"PyYAML (Parsing YAML)","children":[],"payload":{"tag":"li","lines":"1649,1650"}},{"content":"Jinja2 (Template Ansible)","children":[],"payload":{"tag":"li","lines":"1650,1651"}},{"content":"HTTPX (API client)","children":[],"payload":{"tag":"li","lines":"1651,1652"}},{"content":"Gemini API (AI assistance)","children":[],"payload":{"tag":"li","lines":"1652,1653"}},{"content":"Docker","children":[],"payload":{"tag":"li","lines":"1653,1654"}},{"content":"SMTP &amp; python-telegram-bot (Notifiche)","children":[],"payload":{"tag":"li","lines":"1654,1655"}},{"content":"pytest (Testing)","children":[],"payload":{"tag":"li","lines":"1655,1657"}}],"payload":{"tag":"h2","lines":"1644,1645"}},{"content":"2. Struttura cartelle e file","children":[{"content":"<pre data-lines=\"1661,1687\"><code data-lines=\"1661,1687\">docker-compose-to-ansible/\n&#x251c;&#x2500;&#x2500; app/\n&#x2502;   &#x251c;&#x2500;&#x2500; __init__<span class=\"hljs-selector-class\">.py</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; <span class=\"hljs-selector-tag\">main</span><span class=\"hljs-selector-class\">.py</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; ai_integration<span class=\"hljs-selector-class\">.py</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; analyzer<span class=\"hljs-selector-class\">.py</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; ansible_generator<span class=\"hljs-selector-class\">.py</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; notifier<span class=\"hljs-selector-class\">.py</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; templates/\n&#x2502;   &#x2502;   &#x2514;&#x2500;&#x2500; playbook<span class=\"hljs-selector-class\">.yml</span><span class=\"hljs-selector-class\">.j2</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; config<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; cli<span class=\"hljs-selector-class\">.py</span>\n&#x251c;&#x2500;&#x2500; bootstrap<span class=\"hljs-selector-class\">.sh</span>\n&#x251c;&#x2500;&#x2500; Dockerfile\n&#x251c;&#x2500;&#x2500; <span class=\"hljs-selector-class\">.env</span><span class=\"hljs-selector-class\">.example</span>\n&#x251c;&#x2500;&#x2500; requirements<span class=\"hljs-selector-class\">.txt</span>\n&#x251c;&#x2500;&#x2500; README<span class=\"hljs-selector-class\">.md</span>\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x251c;&#x2500;&#x2500; examples/\n&#x2502;   &#x251c;&#x2500;&#x2500; sample-docker-compose<span class=\"hljs-selector-class\">.yml</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; sample-inventory<span class=\"hljs-selector-class\">.json</span>\n&#x251c;&#x2500;&#x2500; scripts/\n&#x2502;   &#x2514;&#x2500;&#x2500; test_playbook_generation<span class=\"hljs-selector-class\">.py</span>\n&#x2514;&#x2500;&#x2500; <span class=\"hljs-selector-class\">.gitignore</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1661,1687"}}],"payload":{"tag":"h2","lines":"1659,1660"}},{"content":"3. Codice sorgente","children":[{"content":"3.1 <code>app/config.py</code>","children":[{"content":"<pre data-lines=\"1694,1712\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> pydantic <span class=\"hljs-keyword\">import</span> BaseSettings\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Settings</span>(<span class=\"hljs-title class_ inherited__\">BaseSettings</span>):\n    GEMINI_API_KEY: <span class=\"hljs-built_in\">str</span>\n    TELEGRAM_BOT_TOKEN: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;&quot;</span>\n    TELEGRAM_CHAT_ID: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;&quot;</span>\n    SMTP_SERVER: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;&quot;</span>\n    SMTP_PORT: <span class=\"hljs-built_in\">int</span> = <span class=\"hljs-number\">587</span>\n    SMTP_USERNAME: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;&quot;</span>\n    SMTP_PASSWORD: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;&quot;</span>\n    NOTIFY_LEVEL: <span class=\"hljs-built_in\">str</span> = <span class=\"hljs-string\">&quot;HIGH&quot;</span>  <span class=\"hljs-comment\"># HIGH, MEDIUM, LOW</span>\n\n    <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Config</span>:\n        env_file = <span class=\"hljs-string\">&quot;.env&quot;</span>\n\nsettings = Settings()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1694,1712"}}],"payload":{"tag":"h3","lines":"1692,1693"}},{"content":"3.2 <code>app/ai_integration.py</code>","children":[{"content":"<pre data-lines=\"1717,1734\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> httpx\n<span class=\"hljs-keyword\">from</span> app.config <span class=\"hljs-keyword\">import</span> settings\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GeminiAI</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, api_key: <span class=\"hljs-built_in\">str</span> = settings.GEMINI_API_KEY</span>):\n        <span class=\"hljs-variable language_\">self</span>.api_key = api_key\n        <span class=\"hljs-variable language_\">self</span>.endpoint = <span class=\"hljs-string\">&quot;https://api.gemini.ai/v1/generate&quot;</span>  <span class=\"hljs-comment\"># ipotetica endpoint</span>\n\n    <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">ask</span>(<span class=\"hljs-params\">self, prompt: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n        headers = {<span class=\"hljs-string\">&quot;Authorization&quot;</span>: <span class=\"hljs-string\">f&quot;Bearer <span class=\"hljs-subst\">{self.api_key}</span>&quot;</span>}\n        payload = {<span class=\"hljs-string\">&quot;prompt&quot;</span>: prompt, <span class=\"hljs-string\">&quot;max_tokens&quot;</span>: <span class=\"hljs-number\">300</span>}\n        <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">with</span> httpx.AsyncClient() <span class=\"hljs-keyword\">as</span> client:\n            resp = <span class=\"hljs-keyword\">await</span> client.post(<span class=\"hljs-variable language_\">self</span>.endpoint, headers=headers, json=payload)\n            resp.raise_for_status()\n            <span class=\"hljs-keyword\">return</span> resp.json().get(<span class=\"hljs-string\">&quot;text&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1717,1734"}}],"payload":{"tag":"h3","lines":"1715,1716"}},{"content":"3.3 <code>app/analyzer.py</code>","children":[{"content":"<pre data-lines=\"1739,1771\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> yaml\n<span class=\"hljs-keyword\">from</span> typing <span class=\"hljs-keyword\">import</span> <span class=\"hljs-type\">Dict</span>, <span class=\"hljs-type\">Any</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_docker_compose</span>(<span class=\"hljs-params\">file_path: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]:\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(file_path, <span class=\"hljs-string\">&quot;r&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        <span class=\"hljs-keyword\">return</span> yaml.safe_load(f)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">analyze_services</span>(<span class=\"hljs-params\">compose_data: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]</span>) -&gt; <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]:\n    services = compose_data.get(<span class=\"hljs-string\">&quot;services&quot;</span>, {})\n    analysis = {}\n    <span class=\"hljs-keyword\">for</span> svc_name, svc_cfg <span class=\"hljs-keyword\">in</span> services.items():\n        ports = svc_cfg.get(<span class=\"hljs-string\">&quot;ports&quot;</span>, [])\n        volumes = svc_cfg.get(<span class=\"hljs-string\">&quot;volumes&quot;</span>, [])\n        environment = svc_cfg.get(<span class=\"hljs-string\">&quot;environment&quot;</span>, {})\n        analysis[svc_name] = {\n            <span class=\"hljs-string\">&quot;ports&quot;</span>: ports,\n            <span class=\"hljs-string\">&quot;volumes&quot;</span>: volumes,\n            <span class=\"hljs-string\">&quot;environment_vars&quot;</span>: environment,\n            <span class=\"hljs-string\">&quot;security_issues&quot;</span>: detect_security_issues(svc_cfg)\n        }\n    <span class=\"hljs-keyword\">return</span> analysis\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">detect_security_issues</span>(<span class=\"hljs-params\">service_cfg: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]</span>) -&gt; <span class=\"hljs-built_in\">list</span>:\n    issues = []\n    ports = service_cfg.get(<span class=\"hljs-string\">&quot;ports&quot;</span>, [])\n    <span class=\"hljs-keyword\">for</span> p <span class=\"hljs-keyword\">in</span> ports:\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">isinstance</span>(p, <span class=\"hljs-built_in\">str</span>) <span class=\"hljs-keyword\">and</span> p.startswith(<span class=\"hljs-string\">&quot;0.0.0.0:&quot;</span>):\n            issues.append(<span class=\"hljs-string\">f&quot;Port <span class=\"hljs-subst\">{p}</span> esposta su tutte le interfacce (0.0.0.0) - Rischio sicurezza&quot;</span>)\n    <span class=\"hljs-comment\"># Altri controlli ...</span>\n    <span class=\"hljs-keyword\">return</span> issues\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1739,1771"}}],"payload":{"tag":"h3","lines":"1737,1738"}},{"content":"3.4 <code>app/ansible_generator.py</code>","children":[{"content":"<pre data-lines=\"1776,1789\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> jinja2 <span class=\"hljs-keyword\">import</span> Environment, FileSystemLoader\n<span class=\"hljs-keyword\">from</span> typing <span class=\"hljs-keyword\">import</span> <span class=\"hljs-type\">Dict</span>, <span class=\"hljs-type\">Any</span>\n<span class=\"hljs-keyword\">import</span> os\n\nTEMPLATE_DIR = os.path.join(os.path.dirname(__file__), <span class=\"hljs-string\">&quot;templates&quot;</span>)\n\nenv = Environment(loader=FileSystemLoader(TEMPLATE_DIR), trim_blocks=<span class=\"hljs-literal\">True</span>, lstrip_blocks=<span class=\"hljs-literal\">True</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_playbook</span>(<span class=\"hljs-params\">analysis: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>], inventory: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]</span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n    template = env.get_template(<span class=\"hljs-string\">&quot;playbook.yml.j2&quot;</span>)\n    <span class=\"hljs-keyword\">return</span> template.render(services=analysis, inventory=inventory)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1776,1789"}}],"payload":{"tag":"h3","lines":"1774,1775"}},{"content":"3.5 <code>app/templates/playbook.yml.j2</code>","children":[{"content":"<pre data-lines=\"1794,1820\"><code class=\"language-yaml\"><span class=\"hljs-meta\">---</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">hosts:</span> <span class=\"hljs-string\">all</span>\n  <span class=\"hljs-attr\">become:</span> <span class=\"hljs-literal\">yes</span>\n  <span class=\"hljs-attr\">tasks:</span>\n    {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">for</span> <span class=\"hljs-string\">svc</span>, <span class=\"hljs-string\">data</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">services.items()</span> <span class=\"hljs-string\">%</span>}\n    <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Deploy</span> <span class=\"hljs-string\">container</span> {{ <span class=\"hljs-string\">svc</span> }}\n      <span class=\"hljs-attr\">docker_container:</span>\n        <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ svc }}</span>&quot;</span>\n        <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ data.image if data.image else &apos;latest&apos; }}</span>&quot;</span>\n        <span class=\"hljs-attr\">state:</span> <span class=\"hljs-string\">started</span>\n        <span class=\"hljs-attr\">restart_policy:</span> <span class=\"hljs-string\">unless-stopped</span>\n        <span class=\"hljs-attr\">published_ports:</span>\n          {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">for</span> <span class=\"hljs-string\">port</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">data.ports</span> <span class=\"hljs-string\">%</span>}\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ port }}</span>&quot;</span>\n          {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endfor</span> <span class=\"hljs-string\">%</span>}\n        <span class=\"hljs-attr\">volumes:</span>\n          {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">for</span> <span class=\"hljs-string\">vol</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">data.volumes</span> <span class=\"hljs-string\">%</span>}\n          <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ vol }}</span>&quot;</span>\n          {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endfor</span> <span class=\"hljs-string\">%</span>}\n        <span class=\"hljs-attr\">env:</span>\n          {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">for</span> <span class=\"hljs-string\">key</span>, <span class=\"hljs-string\">val</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">data.environment_vars.items()</span> <span class=\"hljs-string\">%</span>}\n          {{ <span class=\"hljs-string\">key</span> }}<span class=\"hljs-string\">:</span> <span class=\"hljs-string\">&quot;<span class=\"hljs-template-variable\">{{ val }}</span>&quot;</span>\n          {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endfor</span> <span class=\"hljs-string\">%</span>}\n    {<span class=\"hljs-string\">%</span> <span class=\"hljs-string\">endfor</span> <span class=\"hljs-string\">%</span>}\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1794,1820"}}],"payload":{"tag":"h3","lines":"1792,1793"}},{"content":"3.6 <code>app/notifier.py</code>","children":[{"content":"<pre data-lines=\"1825,1863\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> smtplib\n<span class=\"hljs-keyword\">from</span> email.mime.text <span class=\"hljs-keyword\">import</span> MIMEText\n<span class=\"hljs-keyword\">from</span> app.config <span class=\"hljs-keyword\">import</span> settings\n<span class=\"hljs-keyword\">from</span> telegram <span class=\"hljs-keyword\">import</span> Bot, error <span class=\"hljs-keyword\">as</span> tg_error\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Notifier</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.smtp_server = settings.SMTP_SERVER\n        <span class=\"hljs-variable language_\">self</span>.smtp_port = settings.SMTP_PORT\n        <span class=\"hljs-variable language_\">self</span>.smtp_user = settings.SMTP_USERNAME\n        <span class=\"hljs-variable language_\">self</span>.smtp_pass = settings.SMTP_PASSWORD\n        <span class=\"hljs-variable language_\">self</span>.telegram_token = settings.TELEGRAM_BOT_TOKEN\n        <span class=\"hljs-variable language_\">self</span>.telegram_chat_id = settings.TELEGRAM_CHAT_ID\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_email</span>(<span class=\"hljs-params\">self, subject: <span class=\"hljs-built_in\">str</span>, body: <span class=\"hljs-built_in\">str</span>, to_addr: <span class=\"hljs-built_in\">str</span></span>):\n        msg = MIMEText(body)\n        msg[<span class=\"hljs-string\">&quot;Subject&quot;</span>] = subject\n        msg[<span class=\"hljs-string\">&quot;From&quot;</span>] = <span class=\"hljs-variable language_\">self</span>.smtp_user\n        msg[<span class=\"hljs-string\">&quot;To&quot;</span>] = to_addr\n        <span class=\"hljs-keyword\">try</span>:\n            <span class=\"hljs-keyword\">with</span> smtplib.SMTP(<span class=\"hljs-variable language_\">self</span>.smtp_server, <span class=\"hljs-variable language_\">self</span>.smtp_port) <span class=\"hljs-keyword\">as</span> server:\n                server.starttls()\n                server.login(<span class=\"hljs-variable language_\">self</span>.smtp_user, <span class=\"hljs-variable language_\">self</span>.smtp_pass)\n                server.send_message(msg)\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Errore invio email: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_telegram</span>(<span class=\"hljs-params\">self, message: <span class=\"hljs-built_in\">str</span></span>):\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.telegram_token <span class=\"hljs-keyword\">or</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.telegram_chat_id:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Telegram non configurato&quot;</span>)\n            <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-keyword\">try</span>:\n            bot = Bot(token=<span class=\"hljs-variable language_\">self</span>.telegram_token)\n            bot.send_message(chat_id=<span class=\"hljs-variable language_\">self</span>.telegram_chat_id, text=message)\n        <span class=\"hljs-keyword\">except</span> tg_error.TelegramError <span class=\"hljs-keyword\">as</span> e:\n           \n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1825,1863"}},{"content":"<pre data-lines=\"1867,1912\"><code data-lines=\"1867,1912\">\n---\n\n<span class=\"hljs-comment\">### 3.7 `app/main.py`</span>\n\n```python\n<span class=\"hljs-keyword\">from</span> fastapi <span class=\"hljs-keyword\">import</span> FastAPI, UploadFile, File, Form\n<span class=\"hljs-keyword\">from</span> fastapi.responses <span class=\"hljs-keyword\">import</span> JSONResponse, HTMLResponse\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n<span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n<span class=\"hljs-keyword\">from</span> app.ai_integration <span class=\"hljs-keyword\">import</span> GeminiAI\n<span class=\"hljs-keyword\">from</span> app.notifier <span class=\"hljs-keyword\">import</span> Notifier\n<span class=\"hljs-keyword\">from</span> app.config <span class=\"hljs-keyword\">import</span> settings\n<span class=\"hljs-keyword\">import</span> json\n\napp = FastAPI()\nai = GeminiAI()\nnotifier = Notifier()\n\n<span class=\"hljs-meta\">@app.post(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/analyze/&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">analyze_docker_compose</span>(<span class=\"hljs-params\">file: UploadFile = File(<span class=\"hljs-params\">...</span>)</span>):\n    content = <span class=\"hljs-keyword\">await</span> file.read()\n    compose_data = load_docker_compose(file.file)\n    analysis = analyze_services(compose_data)\n    \n    <span class=\"hljs-comment\"># AI enrichment (optional)</span>\n    prompt = <span class=\"hljs-string\">f&quot;Analizza e suggerisci miglioramenti per questi servizi: <span class=\"hljs-subst\">{json.dumps(analysis)}</span>&quot;</span>\n    ai_response = <span class=\"hljs-keyword\">await</span> ai.ask(prompt)\n\n    <span class=\"hljs-comment\"># Notifica se problemi gravi</span>\n    <span class=\"hljs-keyword\">for</span> svc, data <span class=\"hljs-keyword\">in</span> analysis.items():\n        <span class=\"hljs-keyword\">if</span> data[<span class=\"hljs-string\">&quot;security_issues&quot;</span>]:\n            notifier.send_telegram(<span class=\"hljs-string\">f&quot;Attenzione sicurezza in <span class=\"hljs-subst\">{svc}</span>: <span class=\"hljs-subst\">{data[<span class=\"hljs-string\">&apos;security_issues&apos;</span>]}</span>&quot;</span>)\n\n    <span class=\"hljs-keyword\">return</span> JSONResponse({<span class=\"hljs-string\">&quot;analysis&quot;</span>: analysis, <span class=\"hljs-string\">&quot;ai_suggestions&quot;</span>: ai_response})\n\n<span class=\"hljs-meta\">@app.post(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/generate_playbook/&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate</span>(<span class=\"hljs-params\">file: UploadFile = File(<span class=\"hljs-params\">...</span>), inventory_file: UploadFile = File(<span class=\"hljs-params\">...</span>)</span>):\n    compose_data = load_docker_compose(file.file)\n    inventory = json.load(inventory_file.file)\n    analysis = analyze_services(compose_data)\n    playbook = generate_playbook(analysis, inventory)\n    <span class=\"hljs-keyword\">return</span> HTMLResponse(content=playbook, media_type=<span class=\"hljs-string\">&quot;text/yaml&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1867,1912"}}],"payload":{"tag":"h3","lines":"1823,1824"}},{"content":"3.8 <code>cli.py</code>","children":[{"content":"<pre data-lines=\"1917,1947\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> click\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n<span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n<span class=\"hljs-keyword\">from</span> app.notifier <span class=\"hljs-keyword\">import</span> Notifier\n\n<span class=\"hljs-meta\">@click.group()</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cli</span>():\n    <span class=\"hljs-keyword\">pass</span>\n\n<span class=\"hljs-meta\">@click.command()</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;--compose&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Percorso file docker-compose.yml&apos;</span></span>)</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;--inventory&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Percorso file inventario JSON&apos;</span></span>)</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;--output&apos;</span>, default=<span class=\"hljs-string\">&apos;playbook.yml&apos;</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;File output playbook&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate</span>(<span class=\"hljs-params\">compose, inventory, output</span>):\n    compose_data = load_docker_compose(compose)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(inventory, <span class=\"hljs-string\">&apos;r&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        inventory_data = json.load(f)\n    analysis = analyze_services(compose_data)\n    playbook = generate_playbook(analysis, inventory_data)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(output, <span class=\"hljs-string\">&apos;w&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(playbook)\n    click.echo(<span class=\"hljs-string\">f&quot;Playbook generato e salvato in <span class=\"hljs-subst\">{output}</span>&quot;</span>)\n\ncli.add_command(generate)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    cli()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1917,1947"}}],"payload":{"tag":"h3","lines":"1915,1916"}},{"content":"3.9 <code>bootstrap.sh</code>","children":[{"content":"<pre data-lines=\"1952,1970\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n<span class=\"hljs-comment\"># Bootstrap install script</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Installazione ambiente virtuale...&quot;</span>\npython3 -m venv .venv\n<span class=\"hljs-built_in\">source</span> .venv/bin/activate\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Installazione dipendenze...&quot;</span>\npip install -r requirements.txt\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Creazione file .env...&quot;</span>\n<span class=\"hljs-built_in\">cp</span> .env.example .<span class=\"hljs-built_in\">env</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Modifica .env con la tua configurazione e API key Gemini.&quot;</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Avvio server web FastAPI...&quot;</span>\nuvicorn app.main:app --host 0.0.0.0 --port 8000\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1952,1970"}}],"payload":{"tag":"h3","lines":"1950,1951"}},{"content":"3.10 <code>Dockerfile</code>","children":[{"content":"<pre data-lines=\"1975,1997\"><code class=\"language-dockerfile\"><span class=\"hljs-keyword\">FROM</span> python:<span class=\"hljs-number\">3.10</span>-slim\n\n<span class=\"hljs-keyword\">WORKDIR</span><span class=\"language-bash\"> /app</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> requirements.txt .</span>\n<span class=\"hljs-keyword\">RUN</span><span class=\"language-bash\"> pip install --no-cache-dir -r requirements.txt</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> . .</span>\n\n<span class=\"hljs-keyword\">ENV</span> GEMINI_API_KEY=your_api_key_here\n<span class=\"hljs-keyword\">ENV</span> TELEGRAM_BOT_TOKEN=your_telegram_token\n<span class=\"hljs-keyword\">ENV</span> TELEGRAM_CHAT_ID=your_telegram_chat_id\n<span class=\"hljs-keyword\">ENV</span> SMTP_SERVER=smtp.example.com\n<span class=\"hljs-keyword\">ENV</span> SMTP_PORT=<span class=\"hljs-number\">587</span>\n<span class=\"hljs-keyword\">ENV</span> SMTP_USERNAME=<span class=\"hljs-keyword\">user</span>@example.com\n<span class=\"hljs-keyword\">ENV</span> SMTP_PASSWORD=secret\n\n<span class=\"hljs-keyword\">EXPOSE</span> <span class=\"hljs-number\">8000</span>\n\n<span class=\"hljs-keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"hljs-string\">&quot;uvicorn&quot;</span>, <span class=\"hljs-string\">&quot;app.main:app&quot;</span>, <span class=\"hljs-string\">&quot;--host&quot;</span>, <span class=\"hljs-string\">&quot;0.0.0.0&quot;</span>, <span class=\"hljs-string\">&quot;--port&quot;</span>, <span class=\"hljs-string\">&quot;8000&quot;</span>]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"1975,1997"}}],"payload":{"tag":"h3","lines":"1973,1974"}},{"content":"3.11 <code>.env.example</code>","children":[{"content":"<pre data-lines=\"2002,2012\"><code class=\"language-env\">GEMINI_API_KEY=your_gemini_api_key_here\nTELEGRAM_BOT_TOKEN=your_telegram_bot_token\nTELEGRAM_CHAT_ID=your_telegram_chat_id\nSMTP_SERVER=smtp.example.com\nSMTP_PORT=587\nSMTP_USERNAME=user@example.com\nSMTP_PASSWORD=your_smtp_password\nNOTIFY_LEVEL=HIGH\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2002,2012"}}],"payload":{"tag":"h3","lines":"2000,2001"}},{"content":"3.12 <code>requirements.txt</code>","children":[{"content":"<pre data-lines=\"2017,2028\"><code data-lines=\"2017,2028\">fastapi\nuvicorn\npyyaml\n<span class=\"hljs-keyword\">jinja2\n</span>httpx\nclick\npython-telegram-<span class=\"hljs-keyword\">bot\n</span>pydantic\npytest\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2017,2028"}}],"payload":{"tag":"h3","lines":"2015,2016"}}],"payload":{"tag":"h2","lines":"1690,1691"}},{"content":"4. Risorse accessorie","children":[{"content":"4.1 <code>examples/sample-docker-compose.yml</code>","children":[{"content":"<pre data-lines=\"2035,2045\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&apos;3.8&apos;</span>\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">web:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx:latest</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;80:80&quot;</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">./html:/usr/share/nginx/html</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2035,2045"}}],"payload":{"tag":"h3","lines":"2033,2034"}},{"content":"4.2 <code>examples/sample-inventory.json</code>","children":[{"content":"<pre data-lines=\"2048,2058\"><code class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;all&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;hosts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;192.168.1.10&quot;</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;vars&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;ansible_user&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;ubuntu&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2048,2058"}}],"payload":{"tag":"h3","lines":"2046,2047"}},{"content":"4.3 <code>scripts/test_playbook_generation.py</code>","children":[{"content":"<pre data-lines=\"2061,2077\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> pytest\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n<span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n<span class=\"hljs-keyword\">import</span> json\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_playbook_generation</span>():\n    compose_file = <span class=\"hljs-string\">&quot;examples/sample-docker-compose.yml&quot;</span>\n    inventory_file = <span class=\"hljs-string\">&quot;examples/sample-inventory.json&quot;</span>\n    compose_data = load_docker_compose(compose_file)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(inventory_file) <span class=\"hljs-keyword\">as</span> f:\n        inventory = json.load(f)\n    analysis = analyze_services(compose_data)\n    playbook = generate_playbook(analysis, inventory)\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-string\">&quot;docker_container&quot;</span> <span class=\"hljs-keyword\">in</span> playbook\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2061,2077"}}],"payload":{"tag":"h3","lines":"2059,2060"}}],"payload":{"tag":"h2","lines":"2031,2032"}},{"content":"5. <code>.gitignore</code>","children":[{"content":"<pre data-lines=\"2082,2089\"><code data-lines=\"2082,2089\"><span class=\"hljs-string\">.venv/</span>\n__pycache__/\n*<span class=\"hljs-string\">.pyc</span>\n<span class=\"hljs-string\">.env</span>\n*<span class=\"hljs-string\">.log</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2082,2089"}}],"payload":{"tag":"h2","lines":"2080,2081"}},{"content":"6. <code>LICENSE</code>","children":[{"content":"<pre data-lines=\"2094,2105\"><code class=\"language-text\">MIT License\n\nCopyright (c) 2025 Your Name\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &quot;Software&quot;), to deal\nin the Software without restriction...\n\n[omissis per brevit&#xe0;, usare MIT License completa standard]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2094,2105"}}],"payload":{"tag":"h2","lines":"2092,2093"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"2118,2120"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"2124,2126"}}],"payload":{"tag":"h1","lines":"1571,1572"}},{"content":"&#x1f680; Estensioni progetto: Deploy automatico + CI/CD + Test avanzati","children":[{"content":"1. Script di Deploy automatico","children":[{"content":"<code>deploy.sh</code>","children":[{"content":"<pre data-lines=\"2143,2177\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n<span class=\"hljs-built_in\">set</span> -e\n\n<span class=\"hljs-comment\"># Configurazione</span>\nIMAGE_NAME=<span class=\"hljs-string\">&quot;tuoutente/dc2ansible&quot;</span>\nTAG=<span class=\"hljs-string\">&quot;latest&quot;</span>\nREMOTE_USER=<span class=\"hljs-string\">&quot;ubuntu&quot;</span>\nREMOTE_HOST=<span class=\"hljs-string\">&quot;your.server.ip&quot;</span>\nREMOTE_PATH=<span class=\"hljs-string\">&quot;/home/ubuntu/docker-compose-to-ansible&quot;</span>\nSSH_KEY=<span class=\"hljs-string\">&quot;~/.ssh/id_rsa&quot;</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Building Docker image...&quot;</span>\ndocker build -t <span class=\"hljs-variable\">&#x24;{IMAGE_NAME}</span>:<span class=\"hljs-variable\">&#x24;{TAG}</span> .\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Pushing Docker image to Docker Hub...&quot;</span>\ndocker push <span class=\"hljs-variable\">&#x24;{IMAGE_NAME}</span>:<span class=\"hljs-variable\">&#x24;{TAG}</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Deploying on remote server <span class=\"hljs-variable\">&#x24;{REMOTE_HOST}</span>...&quot;</span>\n\nssh -i <span class=\"hljs-variable\">&#x24;{SSH_KEY}</span> <span class=\"hljs-variable\">&#x24;{REMOTE_USER}</span>@<span class=\"hljs-variable\">&#x24;{REMOTE_HOST}</span> &lt;&lt; <span class=\"hljs-string\">EOF\n  echo &quot;Pulling latest image...&quot;\n  docker pull &#x24;{IMAGE_NAME}:&#x24;{TAG}\n  \n  echo &quot;Stopping old container if exists...&quot;\n  docker stop dc2ansible || true\n  docker rm dc2ansible || true\n  \n  echo &quot;Starting container...&quot;\n  docker run -d --restart unless-stopped -p 8000:8000 --name dc2ansible &#x24;{IMAGE_NAME}:&#x24;{TAG}\nEOF</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Deployment completato con successo!&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2143,2177"}}],"payload":{"tag":"h3","lines":"2141,2142"}}],"payload":{"tag":"h2","lines":"2135,2136"}},{"content":"2. Integrazione CI/CD con GitHub Actions","children":[{"content":"<code>.github/workflows/ci-cd.yml</code>","children":[{"content":"<pre data-lines=\"2199,2265\"><code class=\"language-yaml\"><span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">CI/CD</span> <span class=\"hljs-string\">Pipeline</span>\n\n<span class=\"hljs-attr\">on:</span>\n  <span class=\"hljs-attr\">push:</span>\n    <span class=\"hljs-attr\">branches:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">main</span>\n  <span class=\"hljs-attr\">pull_request:</span>\n\n<span class=\"hljs-attr\">jobs:</span>\n  <span class=\"hljs-attr\">test:</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v3</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Set</span> <span class=\"hljs-string\">up</span> <span class=\"hljs-string\">Python</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/setup-python@v4</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">python-version:</span> <span class=\"hljs-number\">3.10</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Install</span> <span class=\"hljs-string\">dependencies</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|\n          python -m venv .venv\n          source .venv/bin/activate\n          pip install -r requirements.txt\n</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Run</span> <span class=\"hljs-string\">tests</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|\n          source .venv/bin/activate\n          pytest -v\n</span>\n  <span class=\"hljs-attr\">docker_build_push:</span>\n    <span class=\"hljs-attr\">needs:</span> <span class=\"hljs-string\">test</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\">if:</span> <span class=\"hljs-string\">github.ref</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-string\">&apos;refs/heads/main&apos;</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">actions/checkout@v3</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Log</span> <span class=\"hljs-string\">in</span> <span class=\"hljs-string\">to</span> <span class=\"hljs-string\">Docker</span> <span class=\"hljs-string\">Hub</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">docker/login-action@v2</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">&#x24;{{</span> <span class=\"hljs-string\">secrets.DOCKER_USERNAME</span> <span class=\"hljs-string\">}}</span>\n          <span class=\"hljs-attr\">password:</span> <span class=\"hljs-string\">&#x24;{{</span> <span class=\"hljs-string\">secrets.DOCKER_PASSWORD</span> <span class=\"hljs-string\">}}</span>\n\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">Build</span> <span class=\"hljs-string\">and</span> <span class=\"hljs-string\">push</span> <span class=\"hljs-string\">Docker</span> <span class=\"hljs-string\">image</span>\n        <span class=\"hljs-attr\">run:</span> <span class=\"hljs-string\">|\n          docker build -t tuoutente/dc2ansible:latest .\n          docker push tuoutente/dc2ansible:latest\n</span>\n  <span class=\"hljs-attr\">deploy:</span>\n    <span class=\"hljs-attr\">needs:</span> <span class=\"hljs-string\">docker_build_push</span>\n    <span class=\"hljs-attr\">runs-on:</span> <span class=\"hljs-string\">ubuntu-latest</span>\n    <span class=\"hljs-attr\">if:</span> <span class=\"hljs-string\">github.ref</span> <span class=\"hljs-string\">==</span> <span class=\"hljs-string\">&apos;refs/heads/main&apos;</span>\n    <span class=\"hljs-attr\">steps:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">SSH</span> <span class=\"hljs-string\">deploy</span>\n        <span class=\"hljs-attr\">uses:</span> <span class=\"hljs-string\">appleboy/ssh-action@v0.1.7</span>\n        <span class=\"hljs-attr\">with:</span>\n          <span class=\"hljs-attr\">host:</span> <span class=\"hljs-string\">&#x24;{{</span> <span class=\"hljs-string\">secrets.REMOTE_HOST</span> <span class=\"hljs-string\">}}</span>\n          <span class=\"hljs-attr\">username:</span> <span class=\"hljs-string\">&#x24;{{</span> <span class=\"hljs-string\">secrets.REMOTE_USER</span> <span class=\"hljs-string\">}}</span>\n          <span class=\"hljs-attr\">key:</span> <span class=\"hljs-string\">&#x24;{{</span> <span class=\"hljs-string\">secrets.SSH_PRIVATE_KEY</span> <span class=\"hljs-string\">}}</span>\n          <span class=\"hljs-attr\">script:</span> <span class=\"hljs-string\">|\n            docker pull tuoutente/dc2ansible:latest\n            docker stop dc2ansible || true\n            docker rm dc2ansible || true\n            docker run -d --restart unless-stopped -p 8000:8000 --name dc2ansible tuoutente/dc2ansible:latest\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"2199,2265"}}],"payload":{"tag":"h3","lines":"2197,2198"}}],"payload":{"tag":"h2","lines":"2187,2188"}},{"content":"3. Test avanzati con Pytest","children":[{"content":"<code>tests/test_analyzer.py</code>","children":[{"content":"<pre data-lines=\"2281,2309\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> pytest\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n\n<span class=\"hljs-meta\">@pytest.fixture</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">sample_compose</span>(<span class=\"hljs-params\">tmp_path</span>):\n    content = <span class=\"hljs-string\">&quot;&quot;&quot;\n    version: &apos;3.8&apos;\n    services:\n      web:\n        image: nginx:latest\n        ports:\n          - &quot;80:80&quot;\n        volumes:\n          - ./html:/usr/share/nginx/html\n    &quot;&quot;&quot;</span>\n    f = tmp_path / <span class=\"hljs-string\">&quot;docker-compose.yml&quot;</span>\n    f.write_text(content)\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">str</span>(f)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_load_and_analyze</span>(<span class=\"hljs-params\">sample_compose</span>):\n    data = load_docker_compose(sample_compose)\n    analysis = analyze_services(data)\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-string\">&quot;web&quot;</span> <span class=\"hljs-keyword\">in</span> analysis\n    <span class=\"hljs-keyword\">assert</span> analysis[<span class=\"hljs-string\">&quot;web&quot;</span>][<span class=\"hljs-string\">&quot;ports&quot;</span>] == [<span class=\"hljs-string\">&quot;80:80&quot;</span>]\n    <span class=\"hljs-keyword\">assert</span> analysis[<span class=\"hljs-string\">&quot;web&quot;</span>][<span class=\"hljs-string\">&quot;volumes&quot;</span>] == [<span class=\"hljs-string\">&quot;./html:/usr/share/nginx/html&quot;</span>]\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-built_in\">isinstance</span>(analysis[<span class=\"hljs-string\">&quot;web&quot;</span>][<span class=\"hljs-string\">&quot;security_issues&quot;</span>], <span class=\"hljs-built_in\">list</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2281,2309"}}],"payload":{"tag":"h3","lines":"2279,2280"}},{"content":"<code>tests/test_ansible_generator.py</code>","children":[{"content":"<pre data-lines=\"2314,2336\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_generate_playbook</span>(<span class=\"hljs-params\">tmp_path</span>):\n    analysis = {\n        <span class=\"hljs-string\">&quot;web&quot;</span>: {\n            <span class=\"hljs-string\">&quot;ports&quot;</span>: [<span class=\"hljs-string\">&quot;80:80&quot;</span>],\n            <span class=\"hljs-string\">&quot;volumes&quot;</span>: [<span class=\"hljs-string\">&quot;./html:/usr/share/nginx/html&quot;</span>],\n            <span class=\"hljs-string\">&quot;environment_vars&quot;</span>: {},\n            <span class=\"hljs-string\">&quot;image&quot;</span>: <span class=\"hljs-string\">&quot;nginx:latest&quot;</span>\n        }\n    }\n    inventory = {\n        <span class=\"hljs-string\">&quot;all&quot;</span>: {\n            <span class=\"hljs-string\">&quot;hosts&quot;</span>: [<span class=\"hljs-string\">&quot;192.168.1.10&quot;</span>],\n            <span class=\"hljs-string\">&quot;vars&quot;</span>: {<span class=\"hljs-string\">&quot;ansible_user&quot;</span>: <span class=\"hljs-string\">&quot;ubuntu&quot;</span>}\n        }\n    }\n    playbook = generate_playbook(analysis, inventory)\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-string\">&quot;docker_container&quot;</span> <span class=\"hljs-keyword\">in</span> playbook\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-string\">&quot;web&quot;</span> <span class=\"hljs-keyword\">in</span> playbook\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2314,2336"}}],"payload":{"tag":"h3","lines":"2312,2313"}},{"content":"<code>tests/test_ai_integration.py</code>","children":[{"content":"<pre data-lines=\"2341,2360\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> pytest\n<span class=\"hljs-keyword\">import</span> asyncio\n<span class=\"hljs-keyword\">from</span> app.ai_integration <span class=\"hljs-keyword\">import</span> GeminiAI\n\n<span class=\"hljs-meta\">@pytest.mark.asyncio</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_ai_ask</span>(<span class=\"hljs-params\">monkeypatch</span>):\n    <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">fake_post</span>(<span class=\"hljs-params\">*args, **kwargs</span>):\n        <span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">FakeResponse</span>:\n            <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">raise_for_status</span>(<span class=\"hljs-params\">self</span>): <span class=\"hljs-keyword\">pass</span>\n            <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">json</span>(<span class=\"hljs-params\">self</span>): <span class=\"hljs-keyword\">return</span> {<span class=\"hljs-string\">&quot;text&quot;</span>: <span class=\"hljs-string\">&quot;Test response&quot;</span>}\n        <span class=\"hljs-keyword\">return</span> FakeResponse()\n\n    monkeypatch.<span class=\"hljs-built_in\">setattr</span>(<span class=\"hljs-string\">&quot;httpx.AsyncClient.post&quot;</span>, fake_post)\n\n    ai = GeminiAI(api_key=<span class=\"hljs-string\">&quot;fake_key&quot;</span>)\n    response = <span class=\"hljs-keyword\">await</span> ai.ask(<span class=\"hljs-string\">&quot;Test prompt&quot;</span>)\n    <span class=\"hljs-keyword\">assert</span> response == <span class=\"hljs-string\">&quot;Test response&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2341,2360"}}],"payload":{"tag":"h3","lines":"2339,2340"}},{"content":"<code>tests/__init__.py</code>","children":[{"content":"<pre data-lines=\"2365,2368\"><code class=\"language-python\"><span class=\"hljs-comment\"># package marker</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2365,2368"}}],"payload":{"tag":"h3","lines":"2363,2364"}}],"payload":{"tag":"h2","lines":"2273,2274"}},{"content":"4. Aggiunta cartella <code>tests/</code> e aggiornamento <code>.gitignore</code>","children":[{"content":"Conclusione","children":[{"content":"Ora hai script di deploy automatico completo (<code>deploy.sh</code>)","children":[],"payload":{"tag":"li","lines":"2391,2392"}},{"content":"Pipeline GitHub Actions pronta con test, build e deploy","children":[],"payload":{"tag":"li","lines":"2392,2393"}},{"content":"Suite test con Pytest estesa e robusta","children":[],"payload":{"tag":"li","lines":"2393,2394"}},{"content":"Facile da estendere, integrare in CI/CD e usare in produzione","children":[],"payload":{"tag":"li","lines":"2394,2396"}}],"payload":{"tag":"h3","lines":"2389,2390"}}],"payload":{"tag":"h2","lines":"2371,2372"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"2401,2403"}},{"content":"Istruzioni per GitHub Secrets","children":[{"content":"<code>DOCKER_USERNAME</code> &#x2192; il tuo username Docker Hub","children":[],"payload":{"tag":"li","lines":"2416,2417"}},{"content":"<code>DOCKER_PASSWORD</code> &#x2192; la tua password Docker Hub (o token)","children":[],"payload":{"tag":"li","lines":"2417,2418"}},{"content":"<code>REMOTE_HOST</code> &#x2192; IP o hostname del server remoto","children":[],"payload":{"tag":"li","lines":"2418,2419"}},{"content":"<code>REMOTE_USER</code> &#x2192; utente SSH (es. ubuntu)","children":[],"payload":{"tag":"li","lines":"2419,2420"}},{"content":"<code>SSH_PRIVATE_KEY</code> &#x2192; la tua chiave privata SSH (contenuto intero del file <code>id_rsa</code>)","children":[],"payload":{"tag":"li","lines":"2420,2422"}}],"payload":{"tag":"h2","lines":"2408,2409"}},{"content":"Script bash per esportare i secrets localmente (per testare senza GitHub)","children":[{"content":"<pre data-lines=\"2426,2435\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n<span class=\"hljs-built_in\">export</span> DOCKER_USERNAME=<span class=\"hljs-string\">&quot;tuo_docker_username&quot;</span>\n<span class=\"hljs-built_in\">export</span> DOCKER_PASSWORD=<span class=\"hljs-string\">&quot;tua_password_o_token&quot;</span>\n<span class=\"hljs-built_in\">export</span> REMOTE_HOST=<span class=\"hljs-string\">&quot;192.168.1.100&quot;</span>\n<span class=\"hljs-built_in\">export</span> REMOTE_USER=<span class=\"hljs-string\">&quot;ubuntu&quot;</span>\n<span class=\"hljs-built_in\">export</span> SSH_PRIVATE_KEY=<span class=\"hljs-string\">&quot;<span class=\"hljs-subst\">&#x24;(cat ~/.ssh/id_rsa)</span>&quot;</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Variabili d&apos;ambiente impostate per testing locale&quot;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2426,2435"}},{"content":"<pre data-lines=\"2438,2441\"><code class=\"language-bash\"><span class=\"hljs-built_in\">source</span> export_secrets.sh\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2438,2441"}}],"payload":{"tag":"h2","lines":"2424,2425"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"2449,2451"}},{"content":"Nome repository","children":[],"payload":{"tag":"h2","lines":"2456,2457"}},{"content":"Breve descrizione (per GitHub)","children":[],"payload":{"tag":"h2","lines":"2462,2463"}},{"content":"Presentazione / Descrizione da podcast","children":[],"payload":{"tag":"h2","lines":"2468,2469"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"2482,2484"}}],"payload":{"tag":"h1","lines":"2131,2132"}},{"content":"Presentazione estesa e dettagliata per podcast o video divulgativo","children":[{"content":"///","children":[{"content":"Come usarla","children":[{"content":"1. Salva questo file come <code>index.html</code>.","children":[],"payload":{"tag":"li","lines":"2741,2742","listIndex":1}},{"content":"2. Mettilo nella cartella <code>docs/</code> nel repo (o nella root se preferisci).","children":[],"payload":{"tag":"li","lines":"2742,2743","listIndex":2}},{"content":"3. Vai su GitHub &gt; Settings &gt; Pages &gt; scegli la branch e la cartella <code>docs/</code> come sorgente.","children":[],"payload":{"tag":"li","lines":"2743,2744","listIndex":3}},{"content":"4. Pubblica. La tua pagina promo sar&#xe0; online in pochi minuti all&#x2019;URL <a href=\"https://tuoutente.github.io/docker-compose-to-ansible-ai/\">https://tuoutente.github.io/docker-compose-to-ansible-ai/</a>","children":[],"payload":{"tag":"li","lines":"2744,2746","listIndex":4}}],"payload":{"tag":"h3","lines":"2739,2740"}}],"payload":{"tag":"h2","lines":"2535,2537"}},{"content":"///","children":[{"content":"Come sfruttare i Markdown esistenti per la GitHub Page","children":[{"content":"1. <strong>Mantieni i tuoi file Markdown</strong> &#x2014; come <code>README.md</code>, <code>docs/overview.md</code>, <code>docs/usage.md</code>, ecc.","children":[],"payload":{"tag":"li","lines":"2760,2761","listIndex":1}},{"content":"2. <strong>Configura Jekyll</strong> con un file <code>_config.yml</code> base per personalizzare tema, navigazione, ecc.","children":[],"payload":{"tag":"li","lines":"2761,2762","listIndex":2}},{"content":"3. <strong>Aggiungi un tema Jekyll</strong>: GitHub Pages supporta temi ufficiali, ad esempio <code>minima</code> o <code>jekyll-theme-cayman</code>.","children":[],"payload":{"tag":"li","lines":"2762,2763","listIndex":3}},{"content":"4. <strong>Organizza la documentazione</strong> in cartelle e link interni, con un menu di navigazione.","children":[],"payload":{"tag":"li","lines":"2763,2764","listIndex":4}},{"content":"5. <strong>Personalizza il layout</strong> con header, footer e pagine extra usando file <code>.html</code> in <code>_layouts</code> o <code>_includes</code>.","children":[],"payload":{"tag":"li","lines":"2764,2765","listIndex":5}},{"content":"6. <strong>Pubblica direttamente su GitHub Pages</strong> senza bisogno di build manuali.","children":[],"payload":{"tag":"li","lines":"2765,2767","listIndex":6}}],"payload":{"tag":"h3","lines":"2758,2759"}},{"content":"Esempio minimo di setup GitHub Pages usando i Markdown esistenti","children":[{"content":"<pre data-lines=\"2775,2788\"><code data-lines=\"2775,2788\">.\n&#x251c;&#x2500;&#x2500; _config<span class=\"hljs-selector-class\">.yml</span>\n&#x251c;&#x2500;&#x2500; README<span class=\"hljs-selector-class\">.md</span>\n&#x251c;&#x2500;&#x2500; docs/\n&#x2502;   &#x251c;&#x2500;&#x2500; installation<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; usage<span class=\"hljs-selector-class\">.md</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; faq<span class=\"hljs-selector-class\">.md</span>\n&#x251c;&#x2500;&#x2500; assets/\n&#x2502;   &#x2514;&#x2500;&#x2500; css/\n&#x2502;       &#x2514;&#x2500;&#x2500; custom<span class=\"hljs-selector-class\">.css</span>\n&#x2514;&#x2500;&#x2500; index<span class=\"hljs-selector-class\">.md</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2775,2788"}},{"content":"<pre data-lines=\"2793,2810\"><code class=\"language-yaml\"><span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">docker-compose-to-ansible-ai</span>\n<span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">&quot;Trasforma automaticamente Docker Compose in playbook Ansible con AI, sicurezza e CI/CD.&quot;</span>\n<span class=\"hljs-attr\">theme:</span> <span class=\"hljs-string\">minima</span>\n<span class=\"hljs-attr\">markdown:</span> <span class=\"hljs-string\">kramdown</span>\n\n<span class=\"hljs-comment\"># Personalizza link e navigazione</span>\n<span class=\"hljs-attr\">navigation:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">Home</span>\n    <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">Installazione</span>\n    <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/docs/installation.html</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">Uso</span>\n    <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/docs/usage.html</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">FAQ</span>\n    <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/docs/faq.html</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2793,2810"}},{"content":"<pre data-lines=\"2815,2829\"><code class=\"language-markdown\">---\nlayout: home\n<span class=\"hljs-section\">title: &quot;docker-compose-to-ansible-ai&quot;\n---</span>\n\n<span class=\"hljs-section\"># Benvenuto su docker-compose-to-ansible-ai</span>\n\nQuesto progetto open source trasforma i tuoi file Docker Compose in playbook Ansible modulari e sicuri, con integrazione AI per analisi e ottimizzazione.\n\n\n\n[<span class=\"hljs-string\">Documentazione Completa</span>](<span class=\"hljs-link\">./docs/installation.md</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2815,2829"}}],"payload":{"tag":"h3","lines":"2769,2770"}},{"content":"Consiglio avanzato","children":[{"content":"Configurare il sito con Jekyll usando i tuoi Markdown attuali.","children":[],"payload":{"tag":"li","lines":"2850,2851"}},{"content":"Scrivere i file <code>_config.yml</code> completi e template.","children":[],"payload":{"tag":"li","lines":"2851,2852"}},{"content":"Preparare uno script per deploy automatico via GitHub Actions.","children":[],"payload":{"tag":"li","lines":"2852,2853"}},{"content":"Migrare la documentazione verso MkDocs o Docusaurus.","children":[],"payload":{"tag":"li","lines":"2853,2855"}}],"payload":{"tag":"h3","lines":"2842,2843"}}],"payload":{"tag":"h2","lines":"2751,2753"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"2859,2861"}}],"payload":{"tag":"h1","lines":"2489,2490"}},{"content":"1. File <code>_config.yml</code> (minimale e funzionante)","children":[{"content":"<pre data-lines=\"2868,2882\"><code class=\"language-yaml\"><span class=\"hljs-comment\"># _config.yml</span>\n<span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">NomeProgetto</span>\n<span class=\"hljs-attr\">description:</span> <span class=\"hljs-string\">Descrizione</span> <span class=\"hljs-string\">dettagliata</span> <span class=\"hljs-string\">del</span> <span class=\"hljs-string\">progetto</span> <span class=\"hljs-string\">e</span> <span class=\"hljs-string\">finalit&#xe0;</span>\n<span class=\"hljs-attr\">theme:</span> <span class=\"hljs-string\">minima</span>\n<span class=\"hljs-attr\">markdown:</span> <span class=\"hljs-string\">kramdown</span>\n\n<span class=\"hljs-comment\"># Personalizza la barra di navigazione</span>\n<span class=\"hljs-attr\">plugins:</span> [<span class=\"hljs-string\">jekyll-feed</span>]\n\n<span class=\"hljs-comment\"># Permette a GitHub Pages di usare il tema minima senza problemi</span>\n<span class=\"hljs-attr\">github:</span>\n  <span class=\"hljs-attr\">is_project_page:</span> <span class=\"hljs-literal\">true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2868,2882"}}],"payload":{"tag":"h1","lines":"2866,2867"}},{"content":"2. File opzionale di navigazione <code>_data/navigation.yml</code>","children":[{"content":"<pre data-lines=\"2889,2900\"><code class=\"language-yaml\"><span class=\"hljs-comment\"># _data/navigation.yml</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">Home</span>\n  <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">README</span>\n  <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/README</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">Overview</span>\n  <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/docs/overview</span>\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">title:</span> <span class=\"hljs-string\">Usage</span>\n  <span class=\"hljs-attr\">url:</span> <span class=\"hljs-string\">/docs/usage</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2889,2900"}}],"payload":{"tag":"h1","lines":"2885,2886"}},{"content":"3. Opzionale: file <code>_includes/header.html</code> per navigazione personalizzata","children":[{"content":"<pre data-lines=\"2907,2919\"><code class=\"language-html\"><span class=\"hljs-comment\">&lt;!-- _includes/header.html --&gt;</span>\n<span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">header</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">nav</span>&gt;</span>\n    <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">ul</span>&gt;</span>\n      {% for item in site.data.navigation %}\n      <span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">li</span>&gt;</span><span class=\"hljs-tag\">&lt;<span class=\"hljs-name\">a</span> <span class=\"hljs-attr\">href</span>=<span class=\"hljs-string\">&quot;{{ item.url }}&quot;</span>&gt;</span>{{ item.title }}<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">a</span>&gt;</span><span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">li</span>&gt;</span>\n      {% endfor %}\n    <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">ul</span>&gt;</span>\n  <span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">nav</span>&gt;</span>\n<span class=\"hljs-tag\">&lt;/<span class=\"hljs-name\">header</span>&gt;</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2907,2919"}}],"payload":{"tag":"h1","lines":"2903,2904"}},{"content":"4. Struttura esempio del progetto","children":[{"content":"<pre data-lines=\"2926,2939\"><code data-lines=\"2926,2939\">.\n&#x251c;&#x2500;&#x2500; _config.yml\n&#x251c;&#x2500;&#x2500; _data/\n&#x2502;   &#x2514;&#x2500;&#x2500; navigation.yml\n&#x251c;&#x2500;&#x2500; README.md               <span class=\"hljs-comment\"># Il tuo README originale</span>\n&#x251c;&#x2500;&#x2500; docs/\n&#x2502;   &#x251c;&#x2500;&#x2500; overview.md         <span class=\"hljs-comment\"># Altri tuoi file markdown</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; usage.md\n&#x251c;&#x2500;&#x2500; <span class=\"hljs-string\">.gitignore</span>\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x2514;&#x2500;&#x2500; <span class=\"hljs-string\">...</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2926,2939"}}],"payload":{"tag":"h1","lines":"2924,2925"}},{"content":"5. Istruzioni per attivare GitHub Pages","children":[{"content":"Committa i file sopra nel branch <code>main</code> o <code>gh-pages</code>","children":[],"payload":{"tag":"li","lines":"2944,2945"}},{"content":"Vai su <strong>Settings &gt; Pages</strong> del repo GitHub","children":[],"payload":{"tag":"li","lines":"2945,2946"}},{"content":"Scegli la branch da cui pubblicare (es. <code>main</code>) e la cartella <code>/</code> oppure <code>/docs</code> (a seconda dove sono i tuoi markdown)","children":[],"payload":{"tag":"li","lines":"2946,2947"}},{"content":"Salva e attendi qualche minuto","children":[],"payload":{"tag":"li","lines":"2947,2948"}},{"content":"Il sito sar&#xe0; disponibile su <code>https://&lt;username&gt;.github.io/&lt;repo&gt;/</code>","children":[],"payload":{"tag":"li","lines":"2948,2950"}}],"payload":{"tag":"h1","lines":"2942,2943"}},{"content":"6. Suggerimenti extra","children":[{"content":"///","children":[],"payload":{"tag":"h2","lines":"2969,2971"}},{"content":"1) Script per aggiungere frontmatter minimale","children":[{"content":"<pre data-lines=\"2980,3016\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> re\n\ndocs_dir = <span class=\"hljs-string\">&quot;docs&quot;</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">has_frontmatter</span>(<span class=\"hljs-params\">content</span>):\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-built_in\">bool</span>(re.<span class=\"hljs-keyword\">match</span>(<span class=\"hljs-string\">r&quot;^---\\n.*?\\n---\\n&quot;</span>, content, re.DOTALL))\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_frontmatter</span>(<span class=\"hljs-params\">title, url</span>):\n    fm = <span class=\"hljs-string\">f&quot;---\\ntitle: \\&quot;<span class=\"hljs-subst\">{title}</span>\\&quot;\\npermalink: \\&quot;<span class=\"hljs-subst\">{url}</span>\\&quot;\\n---\\n\\n&quot;</span>\n    <span class=\"hljs-keyword\">return</span> fm\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">slugify</span>(<span class=\"hljs-params\">filename</span>):\n    name = os.path.splitext(filename)[<span class=\"hljs-number\">0</span>]\n    <span class=\"hljs-keyword\">return</span> name.replace(<span class=\"hljs-string\">&quot; &quot;</span>, <span class=\"hljs-string\">&quot;-&quot;</span>).lower()\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_file</span>(<span class=\"hljs-params\">path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;r&quot;</span>, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        content = f.read()\n    <span class=\"hljs-keyword\">if</span> has_frontmatter(content):\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[SKIP] <span class=\"hljs-subst\">{path}</span> ha gi&#xe0; frontmatter&quot;</span>)\n        <span class=\"hljs-keyword\">return</span>\n    title = os.path.splitext(os.path.basename(path))[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&quot;_&quot;</span>, <span class=\"hljs-string\">&quot; &quot;</span>).title()\n    url = <span class=\"hljs-string\">f&quot;/<span class=\"hljs-subst\">{slugify(os.path.basename(path))}</span>&quot;</span>\n    fm = generate_frontmatter(title, url)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;w&quot;</span>, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(fm + content)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[ADDED] frontmatter a <span class=\"hljs-subst\">{path}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">for</span> root, _, files <span class=\"hljs-keyword\">in</span> os.walk(docs_dir):\n        <span class=\"hljs-keyword\">for</span> file <span class=\"hljs-keyword\">in</span> files:\n            <span class=\"hljs-keyword\">if</span> file.endswith(<span class=\"hljs-string\">&quot;.md&quot;</span>):\n                process_file(os.path.join(root, file))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"2980,3016"}}],"payload":{"tag":"h2","lines":"2976,2977"}},{"content":"2) Generatore di indice/sommario (TOC) nel Markdown","children":[{"content":"<pre data-lines=\"3023,3069\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> re\n\ndocs_dir = <span class=\"hljs-string\">&quot;docs&quot;</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">extract_headers</span>(<span class=\"hljs-params\">content</span>):\n    <span class=\"hljs-comment\"># Cerca linee con # o ## o ###</span>\n    headers = re.findall(<span class=\"hljs-string\">r&quot;^(#{1,3})\\s+(.*)&#x24;&quot;</span>, content, re.MULTILINE)\n    <span class=\"hljs-keyword\">return</span> headers\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">build_toc</span>(<span class=\"hljs-params\">headers</span>):\n    toc_lines = [<span class=\"hljs-string\">&quot;## Indice\\n&quot;</span>]\n    <span class=\"hljs-keyword\">for</span> hashes, title <span class=\"hljs-keyword\">in</span> headers:\n        level = <span class=\"hljs-built_in\">len</span>(hashes)\n        indent = <span class=\"hljs-string\">&quot;  &quot;</span> * (level - <span class=\"hljs-number\">1</span>)\n        slug = title.strip().lower().replace(<span class=\"hljs-string\">&quot; &quot;</span>, <span class=\"hljs-string\">&quot;-&quot;</span>)\n        toc_lines.append(<span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{indent}</span>- [<span class=\"hljs-subst\">{title}</span>](#<span class=\"hljs-subst\">{slug}</span>)&quot;</span>)\n    toc_lines.append(<span class=\"hljs-string\">&quot;&quot;</span>)  <span class=\"hljs-comment\"># linea vuota</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;\\n&quot;</span>.join(toc_lines)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_file</span>(<span class=\"hljs-params\">path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;r&quot;</span>, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        content = f.read()\n    headers = extract_headers(content)\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> headers:\n        <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[SKIP] Nessun header in <span class=\"hljs-subst\">{path}</span>&quot;</span>)\n        <span class=\"hljs-keyword\">return</span>\n    toc = build_toc(headers)\n    <span class=\"hljs-comment\"># Inserisce TOC dopo frontmatter se presente, altrimenti in cima</span>\n    <span class=\"hljs-keyword\">if</span> content.startswith(<span class=\"hljs-string\">&quot;---&quot;</span>):\n        <span class=\"hljs-comment\"># trova fine frontmatter</span>\n        fm_end = content.find(<span class=\"hljs-string\">&quot;---&quot;</span>, <span class=\"hljs-number\">3</span>)\n        new_content = content[:fm_end+<span class=\"hljs-number\">3</span>] + <span class=\"hljs-string\">&quot;\\n\\n&quot;</span> + toc + <span class=\"hljs-string\">&quot;\\n&quot;</span> + content[fm_end+<span class=\"hljs-number\">3</span>:]\n    <span class=\"hljs-keyword\">else</span>:\n        new_content = toc + <span class=\"hljs-string\">&quot;\\n&quot;</span> + content\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;w&quot;</span>, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(new_content)\n    <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;[ADDED] TOC a <span class=\"hljs-subst\">{path}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    <span class=\"hljs-keyword\">for</span> root, _, files <span class=\"hljs-keyword\">in</span> os.walk(docs_dir):\n        <span class=\"hljs-keyword\">for</span> file <span class=\"hljs-keyword\">in</span> files:\n            <span class=\"hljs-keyword\">if</span> file.endswith(<span class=\"hljs-string\">&quot;.md&quot;</span>):\n                process_file(os.path.join(root, file))\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3023,3069"}}],"payload":{"tag":"h2","lines":"3019,3020"}},{"content":"Come usarli insieme?","children":[{"content":"1. Prima esegui lo script frontmatter, cos&#xec; ogni file ha frontmatter base (utile per MkDocs/Docusaurus).","children":[],"payload":{"tag":"li","lines":"3074,3075","listIndex":1}},{"content":"2. Poi esegui lo script TOC, per avere indice automatico in ogni file.","children":[],"payload":{"tag":"li","lines":"3075,3077","listIndex":2}}],"payload":{"tag":"h2","lines":"3072,3073"}},{"content":"Perch&#xe9; MkDocs e Docusaurus sono pi&#xf9; accessibili con questo approccio?","children":[{"content":"Entrambi usano frontmatter YAML per metadata (titolo, permalink).","children":[],"payload":{"tag":"li","lines":"3081,3082"}},{"content":"Entrambi generano automaticamente le navigazioni e TOC se i file hanno queste informazioni.","children":[],"payload":{"tag":"li","lines":"3082,3083"}},{"content":"Cos&#xec; puoi convertire <em>qualunque</em> raccolta di <code>.md</code> in un sito doc senza riscrivere tutto o toccare la struttura.","children":[],"payload":{"tag":"li","lines":"3083,3085"}}],"payload":{"tag":"h2","lines":"3079,3080"}},{"content":"Vuoi posso aiutarti a integrare questi script nel tuo progetto esistente o in un workflow CI/CD per automatizzare tutto?","children":[{"content":"Al push su Git, i file markdown vengono controllati e aggiornati con frontmatter e TOC","children":[],"payload":{"tag":"li","lines":"3091,3092"}},{"content":"Aggiornamento automatico della navigazione","children":[],"payload":{"tag":"li","lines":"3092,3093"}},{"content":"Build automatica del sito MkDocs/Docusaurus","children":[],"payload":{"tag":"li","lines":"3093,3095"}}],"payload":{"tag":"h2","lines":"3087,3088"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"3099,3101"}},{"content":"Come fare?","children":[{"content":"1. Con MkDocs","children":[{"content":"<strong>Usare un plugin MkDocs custom</strong> scritto in Python che intercetta i file durante la build e modifica il contenuto in memoria per aggiungere frontmatter o TOC.","children":[],"payload":{"tag":"li","lines":"3112,3113"}},{"content":"Oppure servire i markdown tramite un middleware esterno (ad esempio un server Flask/FastAPI) che applica le modifiche al volo.","children":[],"payload":{"tag":"li","lines":"3113,3115"}}],"payload":{"tag":"h3","lines":"3108,3109"}},{"content":"2. Con Docusaurus","children":[{"content":"Puoi scrivere un plugin di preprocessing che modifica i contenuti Markdown in memoria (prima del build) per iniettare frontmatter dinamico o creare indici.","children":[],"payload":{"tag":"li","lines":"3119,3120"}},{"content":"Oppure usare remark/rehype plugin che trasformano il markdown durante la build (come <code>remark-frontmatter</code>, <code>remark-toc</code>) con logiche personalizzate.","children":[],"payload":{"tag":"li","lines":"3120,3122"}}],"payload":{"tag":"h3","lines":"3115,3116"}}],"payload":{"tag":"h2","lines":"3106,3107"}},{"content":"Esempio semplice con Flask per servire markdown modificati al volo","children":[{"content":"<pre data-lines=\"3126,3170\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, send_file, Response\n<span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> re\n\napp = Flask(__name__)\nDOCS_DIR = <span class=\"hljs-string\">&quot;docs&quot;</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">add_frontmatter_and_toc</span>(<span class=\"hljs-params\">content, filename</span>):\n    <span class=\"hljs-comment\"># Aggiunge frontmatter minimale se manca</span>\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> re.<span class=\"hljs-keyword\">match</span>(<span class=\"hljs-string\">r&quot;^---\\n.*?\\n---\\n&quot;</span>, content, re.DOTALL):\n        title = os.path.splitext(os.path.basename(filename))[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&quot;_&quot;</span>, <span class=\"hljs-string\">&quot; &quot;</span>).title()\n        fm = <span class=\"hljs-string\">f&quot;---\\ntitle: \\&quot;<span class=\"hljs-subst\">{title}</span>\\&quot;\\npermalink: \\&quot;/<span class=\"hljs-subst\">{filename}</span>\\&quot;\\n---\\n\\n&quot;</span>\n        content = fm + content\n\n    <span class=\"hljs-comment\"># Costruisce sommario semplice dai titoli (#, ##, ###)</span>\n    headers = re.findall(<span class=\"hljs-string\">r&quot;^(#{1,3})\\s+(.*)&#x24;&quot;</span>, content, re.MULTILINE)\n    <span class=\"hljs-keyword\">if</span> headers:\n        toc_lines = [<span class=\"hljs-string\">&quot;## Indice\\n&quot;</span>]\n        <span class=\"hljs-keyword\">for</span> hashes, title <span class=\"hljs-keyword\">in</span> headers:\n            level = <span class=\"hljs-built_in\">len</span>(hashes)\n            indent = <span class=\"hljs-string\">&quot;  &quot;</span> * (level - <span class=\"hljs-number\">1</span>)\n            slug = title.strip().lower().replace(<span class=\"hljs-string\">&quot; &quot;</span>, <span class=\"hljs-string\">&quot;-&quot;</span>)\n            toc_lines.append(<span class=\"hljs-string\">f&quot;<span class=\"hljs-subst\">{indent}</span>- [<span class=\"hljs-subst\">{title}</span>](#<span class=\"hljs-subst\">{slug}</span>)&quot;</span>)\n        toc_lines.append(<span class=\"hljs-string\">&quot;&quot;</span>)  <span class=\"hljs-comment\"># linea vuota</span>\n        toc = <span class=\"hljs-string\">&quot;\\n&quot;</span>.join(toc_lines)\n        <span class=\"hljs-comment\"># Inserisce TOC subito dopo frontmatter</span>\n        content = re.sub(<span class=\"hljs-string\">r&quot;^(---\\n.*?\\n---\\n)&quot;</span>, <span class=\"hljs-string\">r&quot;\\1\\n&quot;</span> + toc + <span class=\"hljs-string\">&quot;\\n&quot;</span>, content, flags=re.DOTALL)\n\n    <span class=\"hljs-keyword\">return</span> content\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/docs/&lt;path:filename&gt;&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">serve_md</span>(<span class=\"hljs-params\">filename</span>):\n    path = os.path.join(DOCS_DIR, filename)\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> os.path.isfile(path):\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">&quot;File non trovato&quot;</span>, <span class=\"hljs-number\">404</span>\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;r&quot;</span>, encoding=<span class=\"hljs-string\">&quot;utf-8&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        content = f.read()\n    content = add_frontmatter_and_toc(content, filename)\n    <span class=\"hljs-keyword\">return</span> Response(content, mimetype=<span class=\"hljs-string\">&quot;text/markdown&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    app.run(port=<span class=\"hljs-number\">5000</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3126,3170"}}],"payload":{"tag":"h2","lines":"3124,3125"}},{"content":"Vantaggi di questo approccio:","children":[{"content":"<strong>Non modifichi mai i file originali.</strong>","children":[],"payload":{"tag":"li","lines":"3175,3176"}},{"content":"Puoi sperimentare diverse logiche di trasformazione frontmatter o TOC.","children":[],"payload":{"tag":"li","lines":"3176,3177"}},{"content":"Integri questo server con MkDocs (usando <code>mkdocs serve</code> in modalit&#xe0; proxy), Docusaurus (usando la sorgente markdown da URL) o altro.","children":[],"payload":{"tag":"li","lines":"3177,3178"}},{"content":"Funziona per preview live, sistemi CI/CD o generatori statici personalizzati.","children":[],"payload":{"tag":"li","lines":"3178,3180"}}],"payload":{"tag":"h2","lines":"3173,3174"}},{"content":"In conclusione","children":[{"content":"","children":[{"content":"Se vuoi <strong>modifiche persistenti</strong> &#x2192; aggiungi frontmatter ai file con script.","children":[],"payload":{"tag":"li","lines":"3184,3185"}},{"content":"Se vuoi <strong>modifiche temporanee/dinamiche</strong> &#x2192; crea un middleware o un plugin che arricchisce i markdown al volo.","children":[],"payload":{"tag":"li","lines":"3185,3187"}}],"payload":{"tag":"ul","lines":"3184,3187"}},{"content":"","children":[{"content":"Realizzare un plugin MkDocs o Docusaurus che faccia tutto ci&#xf2;.","children":[],"payload":{"tag":"li","lines":"3191,3192"}},{"content":"Realizzare un server Flask/FastAPI pi&#xf9; avanzato per servire contenuti trasformati on-the-fly.","children":[],"payload":{"tag":"li","lines":"3192,3193"}},{"content":"Integrazione di tutto nel tuo workflow.","children":[],"payload":{"tag":"li","lines":"3193,3195"}}],"payload":{"tag":"ul","lines":"3191,3195"}}],"payload":{"tag":"h2","lines":"3182,3183"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"3199,3201"}},{"content":"Scenario","children":[],"payload":{"tag":"h2","lines":"3206,3207"}}],"payload":{"tag":"h1","lines":"2952,2953"}},{"content":"Opzione 1: Aggiunta frontmatter e TOC <strong>on-the-fly</strong> con un middleware (es. Flask/FastAPI)","children":[{"content":"Pro","children":[{"content":"Nessuna modifica permanente ai file sorgente.","children":[],"payload":{"tag":"li","lines":"3216,3217"}},{"content":"Estrema flessibilit&#xe0;: puoi personalizzare frontmatter e TOC come vuoi.","children":[],"payload":{"tag":"li","lines":"3217,3218"}},{"content":"Puoi testare velocemente senza cambiare nulla nel repo.","children":[],"payload":{"tag":"li","lines":"3218,3219"}},{"content":"Puoi usare qualunque generatore o tool che supporta sorgenti HTTP/URL.","children":[],"payload":{"tag":"li","lines":"3219,3220"}},{"content":"Facilmente integrabile in ambienti di sviluppo o CI/CD.","children":[],"payload":{"tag":"li","lines":"3220,3222"}}],"payload":{"tag":"h3","lines":"3214,3215"}},{"content":"Contro","children":[{"content":"Richiede un server esterno in pi&#xf9; (middleware).","children":[],"payload":{"tag":"li","lines":"3224,3225"}},{"content":"Potresti dover adattare leggermente il workflow di build.","children":[],"payload":{"tag":"li","lines":"3225,3226"}},{"content":"Non sempre perfetto per generatori statici che non supportano sorgenti remote.","children":[],"payload":{"tag":"li","lines":"3226,3228"}}],"payload":{"tag":"h3","lines":"3222,3223"}}],"payload":{"tag":"h1","lines":"3212,3213"}},{"content":"Opzione 2: Preprocessing automatico con script che modifica i Markdown prima della build","children":[{"content":"Pro","children":[{"content":"I file usati per la build sono &#x201c;completi&#x201d; e standard (frontmatter incluso).","children":[],"payload":{"tag":"li","lines":"3236,3237"}},{"content":"Compatibile con tutti i tool di generazione di siti statici senza modifiche.","children":[],"payload":{"tag":"li","lines":"3237,3238"}},{"content":"Puoi committare (se vuoi) la versione &#x201c;arricchita&#x201d; e mantenere i sorgenti originali separati.","children":[],"payload":{"tag":"li","lines":"3238,3240"}}],"payload":{"tag":"h3","lines":"3234,3235"}},{"content":"Contro","children":[{"content":"Doppia copia o modifica dei file (potenziale confusione).","children":[],"payload":{"tag":"li","lines":"3242,3243"}},{"content":"Puoi rischiare di committare modifiche indesiderate.","children":[],"payload":{"tag":"li","lines":"3243,3244"}},{"content":"Serve uno step aggiuntivo nel processo di build.","children":[],"payload":{"tag":"li","lines":"3244,3246"}}],"payload":{"tag":"h3","lines":"3240,3241"}}],"payload":{"tag":"h1","lines":"3230,3231"}},{"content":"Opzione 3: Plugin nativo per MkDocs o Docusaurus","children":[{"content":"Pro","children":[{"content":"Integra direttamente nel processo di build.","children":[],"payload":{"tag":"li","lines":"3254,3255"}},{"content":"Non modifica i file sorgente fisici.","children":[],"payload":{"tag":"li","lines":"3255,3256"}},{"content":"Soluzione elegante, pulita e automatizzata.","children":[],"payload":{"tag":"li","lines":"3256,3258"}}],"payload":{"tag":"h3","lines":"3252,3253"}},{"content":"Contro","children":[{"content":"Richiede conoscenze specifiche di MkDocs/Docusaurus e sviluppo plugin.","children":[],"payload":{"tag":"li","lines":"3260,3261"}},{"content":"Potrebbe essere complesso da mantenere nel tempo.","children":[],"payload":{"tag":"li","lines":"3261,3262"}},{"content":"Meno immediato per chi vuole una soluzione rapida.","children":[],"payload":{"tag":"li","lines":"3262,3264"}}],"payload":{"tag":"h3","lines":"3258,3259"}}],"payload":{"tag":"h1","lines":"3248,3249"}},{"content":"<strong>Consiglio finale</strong>","children":[{"content":"///","children":[{"content":"Un <strong>middleware Flask</strong> che serve i file Markdown aggiungendo frontmatter minimale e TOC <strong>on-the-fly</strong> senza modificare i file originali.","children":[],"payload":{"tag":"li","lines":"3294,3295"}},{"content":"Uno <strong>script di preprocessing Python</strong> che genera una copia arricchita della tua documentazione con frontmatter e TOC, pronta per build con MkDocs o Docusaurus.","children":[],"payload":{"tag":"li","lines":"3295,3296"}},{"content":"Un esempio minimale di configurazione MkDocs per usare la versione preprocessata.","children":[],"payload":{"tag":"li","lines":"3296,3297"}},{"content":"README dettagliato, struttura e tutto il necessario.","children":[],"payload":{"tag":"li","lines":"3297,3299"}}],"payload":{"tag":"h2","lines":"3289,3291"}}],"payload":{"tag":"h1","lines":"3266,3267"}},{"content":"PROGETTO: <code>md-preprocessor-docs</code>","children":[{"content":"1. README.md","children":[{"content":"<pre data-lines=\"3307,3340\"><code class=\"language-markdown\"><span class=\"hljs-section\"># md-preprocessor-docs</span>\n\n<span class=\"hljs-section\">## Descrizione</span>\n\n<span class=\"hljs-code\">`md-preprocessor-docs`</span> &#xe8; un progetto che ti permette di integrare facilmente file Markdown <span class=\"hljs-strong\">**senza frontmatter**</span> con strumenti di documentazione come <span class=\"hljs-strong\">**MkDocs**</span> o <span class=\"hljs-strong\">**Docusaurus**</span> senza modificare i file originali.\n\nFornisce due modalit&#xe0;:\n\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-strong\">**Middleware Flask**</span> per aggiungere frontmatter e indice (TOC) ai Markdown al volo, utile per sviluppo e preview.\n<span class=\"hljs-bullet\">-</span> <span class=\"hljs-strong\">**Script di preprocessing**</span> che genera una copia arricchita dei Markdown con frontmatter e TOC, pronta per build di siti statici.\n\n---\n\n<span class=\"hljs-section\">## Obiettivi</span>\n\n<span class=\"hljs-bullet\">-</span> Non modificare i file Markdown originali.\n<span class=\"hljs-bullet\">-</span> Automatizzare la generazione di frontmatter minimale.\n<span class=\"hljs-bullet\">-</span> Creare un sommario (TOC) semplice e ben formattato.\n<span class=\"hljs-bullet\">-</span> Supportare workflow di sviluppo e di produzione.\n<span class=\"hljs-bullet\">-</span> Facilitare l&#x2019;uso con MkDocs, Docusaurus o altri generatori.\n\n---\n\n<span class=\"hljs-section\">## Installazione</span>\n\n<span class=\"hljs-code\">```bash\ngit clone https://github.com/tuoutente/md-preprocessor-docs.git\ncd md-preprocessor-docs\npython3 -m venv .venv\nsource .venv/bin/activate\npip install -r requirements.txt\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"3307,3340"}}],"payload":{"tag":"h2","lines":"3305,3306"}},{"content":"Uso","children":[{"content":"Modalit&#xe0; 1: Server Flask (on-the-fly)","children":[{"content":"<pre data-lines=\"3349,3352\"><code class=\"language-bash\">python app.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3349,3352"}},{"content":"<pre data-lines=\"3355,3358\"><code data-lines=\"3355,3358\">http://localhost:5000/yourfile.md\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3355,3358"}}],"payload":{"tag":"h3","lines":"3345,3346"}},{"content":"Modalit&#xe0; 2: Preprocessing","children":[{"content":"<pre data-lines=\"3367,3370\"><code class=\"language-bash\">python preprocess.py --<span class=\"hljs-built_in\">source</span> docs_markdown --dest docs_processed\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3367,3370"}}],"payload":{"tag":"h3","lines":"3363,3364"}},{"content":"Build con MkDocs (esempio)","children":[{"content":"<pre data-lines=\"3379,3383\"><code class=\"language-yaml\"><span class=\"hljs-attr\">docs_dir:</span> <span class=\"hljs-string\">docs_processed</span>\n<span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">Documentazione</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3379,3383"}}],"payload":{"tag":"h3","lines":"3375,3376"}}],"payload":{"tag":"h2","lines":"3343,3344"}},{"content":"Tecnologie utilizzate","children":[{"content":"preprocess.py","children":[{"content":"<pre data-lines=\"3506,3558\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> argparse\n<span class=\"hljs-keyword\">import</span> yaml\n<span class=\"hljs-keyword\">import</span> markdown\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_frontmatter</span>(<span class=\"hljs-params\">title</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;Genera frontmatter YAML minimale con il titolo.&quot;&quot;&quot;</span>\n    fm = {\n        <span class=\"hljs-string\">&apos;title&apos;</span>: title,\n        <span class=\"hljs-string\">&apos;toc&apos;</span>: <span class=\"hljs-literal\">True</span>\n    }\n    <span class=\"hljs-keyword\">return</span> yaml.dump(fm, default_flow_style=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">add_frontmatter_and_toc_to_file</span>(<span class=\"hljs-params\">src_path, dest_path</span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(src_path, <span class=\"hljs-string\">&apos;r&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        content = f.read()\n\n    title = os.path.splitext(os.path.basename(src_path))[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&apos;_&apos;</span>, <span class=\"hljs-string\">&apos; &apos;</span>).title()\n    frontmatter = generate_frontmatter(title)\n\n    md = markdown.Markdown(extensions=[<span class=\"hljs-string\">&apos;toc&apos;</span>])\n    md.convert(content)\n    toc_md = md.toc_tokens\n    toc_list = <span class=\"hljs-string\">&quot;- Indice:\\n&quot;</span>\n    <span class=\"hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> toc_md:\n        toc_list += <span class=\"hljs-string\">f&quot;  - [<span class=\"hljs-subst\">{item[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span>](#<span class=\"hljs-subst\">{item[<span class=\"hljs-string\">&apos;id&apos;</span>]}</span>)\\n&quot;</span>\n\n    result_md = <span class=\"hljs-string\">f&quot;---\\n<span class=\"hljs-subst\">{frontmatter}</span>---\\n\\n<span class=\"hljs-subst\">{toc_list}</span>\\n\\n<span class=\"hljs-subst\">{content}</span>&quot;</span>\n\n    os.makedirs(os.path.dirname(dest_path), exist_ok=<span class=\"hljs-literal\">True</span>)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(dest_path, <span class=\"hljs-string\">&apos;w&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(result_md)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">preprocess_folder</span>(<span class=\"hljs-params\">src_folder, dest_folder</span>):\n    <span class=\"hljs-keyword\">for</span> root, _, files <span class=\"hljs-keyword\">in</span> os.walk(src_folder):\n        <span class=\"hljs-keyword\">for</span> filename <span class=\"hljs-keyword\">in</span> files:\n            <span class=\"hljs-keyword\">if</span> filename.endswith(<span class=\"hljs-string\">&apos;.md&apos;</span>):\n                src_path = os.path.join(root, filename)\n                rel_path = os.path.relpath(src_path, src_folder)\n                dest_path = os.path.join(dest_folder, rel_path)\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Processando: <span class=\"hljs-subst\">{rel_path}</span>&quot;</span>)\n                add_frontmatter_and_toc_to_file(src_path, dest_path)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    parser = argparse.ArgumentParser(description=<span class=\"hljs-string\">&apos;Preprocessa markdown aggiungendo frontmatter e TOC.&apos;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&apos;--source&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Cartella markdown sorgente&apos;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&apos;--dest&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Cartella output preprocessata&apos;</span>)\n    args = parser.parse_args()\n\n    preprocess_folder(args.source, args.dest)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3506,3558"}}],"payload":{"tag":"h3","lines":"3504,3505"}},{"content":"mkdocs.yml","children":[{"content":"<pre data-lines=\"3563,3574\"><code class=\"language-yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">Documentazione</span> <span class=\"hljs-string\">Progetto</span>\n<span class=\"hljs-attr\">docs_dir:</span> <span class=\"hljs-string\">docs_processed</span>\n\n<span class=\"hljs-attr\">nav:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Esempio:</span> <span class=\"hljs-string\">example.md</span>\n\n<span class=\"hljs-attr\">theme:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">readthedocs</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3563,3574"}}],"payload":{"tag":"h3","lines":"3561,3562"}},{"content":".gitignore","children":[{"content":"<pre data-lines=\"3579,3584\"><code data-lines=\"3579,3584\">__pycache__<span class=\"hljs-symbol\">/</span>\n.venv<span class=\"hljs-symbol\">/</span>\ndocs_processed<span class=\"hljs-symbol\">/</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3579,3584"}}],"payload":{"tag":"h3","lines":"3577,3578"}},{"content":"LICENSE (MIT)","children":[{"content":"<pre data-lines=\"3589,3604\"><code data-lines=\"3589,3604\">MIT License\n\nCopyright (<span class=\"hljs-keyword\">c</span>) <span class=\"hljs-number\">2025</span> [Tuo Nome]\n\nPermission <span class=\"hljs-keyword\">is</span> hereby granted, free of charge, <span class=\"hljs-keyword\">to</span> any person obtaining <span class=\"hljs-keyword\">a</span> <span class=\"hljs-keyword\">copy</span>\nof this software <span class=\"hljs-built_in\">and</span> associated documentation <span class=\"hljs-keyword\">files</span> (the <span class=\"hljs-string\">&quot;Software&quot;</span>), <span class=\"hljs-keyword\">to</span> deal\nin the Software without restriction, including without limitation the rights\n<span class=\"hljs-keyword\">to</span> use, <span class=\"hljs-keyword\">copy</span>, modify, merge, publish, distribute, sublicense, <span class=\"hljs-built_in\">and</span>/<span class=\"hljs-built_in\">or</span> sell\ncopies of the Software, <span class=\"hljs-built_in\">and</span> <span class=\"hljs-keyword\">to</span> permit persons <span class=\"hljs-keyword\">to</span> whom the Software <span class=\"hljs-keyword\">is</span>\nfurnished <span class=\"hljs-keyword\">to</span> <span class=\"hljs-keyword\">do</span> <span class=\"hljs-keyword\">so</span>, subject <span class=\"hljs-keyword\">to</span> the following conditions:\n\n[...]\n\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3589,3604"}}],"payload":{"tag":"h3","lines":"3587,3588"}}],"payload":{"tag":"h2","lines":"3386,3387"}},{"content":"4. Esempio in <code>docs_markdown/example.md</code>","children":[{"content":"<pre data-lines=\"3609,3622\"><code class=\"language-markdown\"><span class=\"hljs-section\"># Benvenuto</span>\n\nQuesto &#xe8; un esempio di file markdown senza frontmatter.\n\n<span class=\"hljs-section\">## Sezione 1</span>\n\nTesto della sezione 1.\n\n<span class=\"hljs-section\">## Sezione 2</span>\n\nTesto della sezione 2.\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3609,3622"}}],"payload":{"tag":"h2","lines":"3607,3608"}},{"content":"5. Come usare","children":[{"content":"Avvia il server con <code>python app.py</code> e apri <code>http://localhost:5000/example.md</code> per vedere il file con frontmatter e TOC generati al volo.","children":[],"payload":{"tag":"li","lines":"3627,3628"}},{"content":"Oppure genera la versione preprocessata con <code>python preprocess.py --source docs_markdown --dest docs_processed</code> e poi costruisci con MkDocs (<code>mkdocs build</code> o <code>mkdocs serve</code>).","children":[],"payload":{"tag":"li","lines":"3628,3630"}}],"payload":{"tag":"h2","lines":"3625,3626"}}],"payload":{"tag":"h1","lines":"3301,3302"}},{"content":"Con questo setup potrai:","children":[{"content":"///","children":[{"content":"Modalit&#xe0; 1: Server Flask per sviluppo","children":[{"content":"<pre data-lines=\"3719,3722\"><code class=\"language-bash\">python app.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3719,3722"}},{"content":"<pre data-lines=\"3725,3728\"><code data-lines=\"3725,3728\">http://localhost:5000/example.md\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3725,3728"}}],"payload":{"tag":"h3","lines":"3715,3716"}},{"content":"Modalit&#xe0; 2: Preprocessing per produzione","children":[{"content":"<pre data-lines=\"3737,3740\"><code class=\"language-bash\">python preprocess.py --<span class=\"hljs-built_in\">source</span> docs_markdown --dest docs_processed\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3737,3740"}},{"content":"<pre data-lines=\"3745,3748\"><code class=\"language-bash\">mkdocs serve\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3745,3748"}}],"payload":{"tag":"h3","lines":"3733,3734"}}],"payload":{"tag":"h2","lines":"3653,3655"}},{"content":"Tecnologie utilizzate","children":[{"content":"Python 3.8+","children":[],"payload":{"tag":"li","lines":"3755,3756"}},{"content":"Flask (per il middleware on-the-fly)","children":[],"payload":{"tag":"li","lines":"3756,3757"}},{"content":"PyYAML (gestione frontmatter YAML)","children":[],"payload":{"tag":"li","lines":"3757,3758"}},{"content":"Markdown (parsing e TOC generation)","children":[],"payload":{"tag":"li","lines":"3758,3759"}},{"content":"MkDocs (esempio static site generator)","children":[],"payload":{"tag":"li","lines":"3759,3761"}}],"payload":{"tag":"h2","lines":"3753,3754"}},{"content":"Possibili estensioni future","children":[{"content":"Deploy Docker con configurazioni automatiche","children":[],"payload":{"tag":"li","lines":"3765,3766"}},{"content":"Integrazione CI/CD per build e deploy automatici","children":[],"payload":{"tag":"li","lines":"3766,3767"}},{"content":"Autenticazione nella web UI Flask","children":[],"payload":{"tag":"li","lines":"3767,3768"}},{"content":"Hook Git per aggiornamento automatico","children":[],"payload":{"tag":"li","lines":"3768,3770"}}],"payload":{"tag":"h2","lines":"3763,3764"}},{"content":"Contatti","children":[],"payload":{"tag":"h2","lines":"3772,3773"}},{"content":"Licenza","children":[{"content":"preprocess.py","children":[{"content":"<pre data-lines=\"3888,3951\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">import</span> argparse\n<span class=\"hljs-keyword\">import</span> yaml\n<span class=\"hljs-keyword\">import</span> markdown\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_frontmatter</span>(<span class=\"hljs-params\">title</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Genera frontmatter YAML minimale.\n    &quot;&quot;&quot;</span>\n    fm = {\n        <span class=\"hljs-string\">&apos;title&apos;</span>: title,\n        <span class=\"hljs-string\">&apos;toc&apos;</span>: <span class=\"hljs-literal\">True</span>\n    }\n    <span class=\"hljs-keyword\">return</span> yaml.dump(fm, default_flow_style=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">add_frontmatter_and_toc_to_file</span>(<span class=\"hljs-params\">src_path, dest_path</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Legge il file markdown da src_path, aggiunge frontmatter e TOC,\n    scrive il risultato in dest_path.\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(src_path, <span class=\"hljs-string\">&apos;r&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        content = f.read()\n\n    title = os.path.splitext(os.path.basename(src_path))[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&apos;_&apos;</span>, <span class=\"hljs-string\">&apos; &apos;</span>).title()\n    frontmatter = generate_frontmatter(title)\n\n    md = markdown.Markdown(extensions=[<span class=\"hljs-string\">&apos;toc&apos;</span>])\n    md.convert(content)\n    toc_tokens = md.toc_tokens\n\n    toc_list = <span class=\"hljs-string\">&quot;- Indice:\\n&quot;</span>\n    <span class=\"hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> toc_tokens:\n        toc_list += <span class=\"hljs-string\">f&quot;  - [<span class=\"hljs-subst\">{item[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span>](#<span class=\"hljs-subst\">{item[<span class=\"hljs-string\">&apos;id&apos;</span>]}</span>)\\n&quot;</span>\n\n    result_md = <span class=\"hljs-string\">f&quot;---\\n<span class=\"hljs-subst\">{frontmatter}</span>---\\n\\n<span class=\"hljs-subst\">{toc_list}</span>\\n\\n<span class=\"hljs-subst\">{content}</span>&quot;</span>\n\n    os.makedirs(os.path.dirname(dest_path), exist_ok=<span class=\"hljs-literal\">True</span>)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(dest_path, <span class=\"hljs-string\">&apos;w&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(result_md)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">preprocess_folder</span>(<span class=\"hljs-params\">src_folder, dest_folder</span>):\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Cammina ricorsivamente nella cartella src_folder e processa tutti i file .md,\n    salvando i risultati in dest_folder mantenendo la struttura.\n    &quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">for</span> root, _, files <span class=\"hljs-keyword\">in</span> os.walk(src_folder):\n        <span class=\"hljs-keyword\">for</span> filename <span class=\"hljs-keyword\">in</span> files:\n            <span class=\"hljs-keyword\">if</span> filename.endswith(<span class=\"hljs-string\">&apos;.md&apos;</span>):\n                src_path = os.path.join(root, filename)\n                rel_path = os.path.relpath(src_path, src_folder)\n                dest_path = os.path.join(dest_folder, rel_path)\n                <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Processando: <span class=\"hljs-subst\">{rel_path}</span>&quot;</span>)\n                add_frontmatter_and_toc_to_file(src_path, dest_path)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    parser = argparse.ArgumentParser(description=<span class=\"hljs-string\">&apos;Preprocessa markdown aggiungendo frontmatter e TOC.&apos;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&apos;--source&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Cartella markdown sorgente&apos;</span>)\n    parser.add_argument(<span class=\"hljs-string\">&apos;--dest&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Cartella output preprocessata&apos;</span>)\n    args = parser.parse_args()\n\n    preprocess_folder(args.source, args.dest)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3888,3951"}}],"payload":{"tag":"h3","lines":"3886,3887"}},{"content":"mkdocs.yml","children":[{"content":"<pre data-lines=\"3956,3967\"><code class=\"language-yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">Documentazione</span> <span class=\"hljs-string\">Progetto</span>\n<span class=\"hljs-attr\">docs_dir:</span> <span class=\"hljs-string\">docs_processed</span>\n\n<span class=\"hljs-attr\">nav:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Esempio:</span> <span class=\"hljs-string\">example.md</span>\n\n<span class=\"hljs-attr\">theme:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">readthedocs</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3956,3967"}}],"payload":{"tag":"h3","lines":"3954,3955"}}],"payload":{"tag":"h2","lines":"3778,3779"}},{"content":"4. Risorse accessorie","children":[{"content":"docs_markdown/example.md","children":[{"content":"<pre data-lines=\"3974,3987\"><code class=\"language-markdown\"><span class=\"hljs-section\"># Benvenuto</span>\n\nQuesto &#xe8; un esempio di file markdown senza frontmatter.\n\n<span class=\"hljs-section\">## Sezione 1</span>\n\nTesto della sezione 1.\n\n<span class=\"hljs-section\">## Sezione 2</span>\n\nTesto della sezione 2.\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3974,3987"}}],"payload":{"tag":"h3","lines":"3972,3973"}}],"payload":{"tag":"h2","lines":"3970,3971"}},{"content":"5. .gitignore","children":[{"content":"<pre data-lines=\"3992,3997\"><code data-lines=\"3992,3997\">__pycache__<span class=\"hljs-symbol\">/</span>\n.venv<span class=\"hljs-symbol\">/</span>\ndocs_processed<span class=\"hljs-symbol\">/</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"3992,3997"}}],"payload":{"tag":"h2","lines":"3990,3991"}},{"content":"6. LICENSE (MIT)","children":[{"content":"<pre data-lines=\"4002,4016\"><code data-lines=\"4002,4016\">MIT License\n\nCopyright (<span class=\"hljs-keyword\">c</span>) <span class=\"hljs-number\">2025</span> [Tuo Nome]\n\nPermission <span class=\"hljs-keyword\">is</span> hereby granted, free of charge, <span class=\"hljs-keyword\">to</span> any person obtaining <span class=\"hljs-keyword\">a</span> <span class=\"hljs-keyword\">copy</span>\nof this software <span class=\"hljs-built_in\">and</span> associated documentation <span class=\"hljs-keyword\">files</span> (the <span class=\"hljs-string\">&quot;Software&quot;</span>), <span class=\"hljs-keyword\">to</span> deal\nin the Software without restriction, including without limitation the rights\n<span class=\"hljs-keyword\">to</span> use, <span class=\"hljs-keyword\">copy</span>, modify, merge, publish, distribute, sublicense, <span class=\"hljs-built_in\">and</span>/<span class=\"hljs-built_in\">or</span> sell\ncopies of the Software, <span class=\"hljs-built_in\">and</span> <span class=\"hljs-keyword\">to</span> permit persons <span class=\"hljs-keyword\">to</span> whom the Software <span class=\"hljs-keyword\">is</span>\nfurnished <span class=\"hljs-keyword\">to</span> <span class=\"hljs-keyword\">do</span> <span class=\"hljs-keyword\">so</span>, subject <span class=\"hljs-keyword\">to</span> the following conditions:\n\n[...]\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4002,4016"}}],"payload":{"tag":"h2","lines":"4000,4001"}},{"content":"Note finali","children":[{"content":"<pre data-lines=\"4033,4035\"><code data-lines=\"4033,4035\"></code></pre>","children":[],"payload":{"tag":"pre","lines":"4033,4035"}}],"payload":{"tag":"h2","lines":"4019,4020"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"4038,4040"}},{"content":"&#x1f4c1; Struttura completa del progetto (con documentazione integrata)","children":[{"content":"<pre data-lines=\"4049,4082\"><code data-lines=\"4049,4082\">docker-compose-to-ansible-ai<span class=\"hljs-symbol\">/</span>\n&#x251c;&#x2500;&#x2500; app<span class=\"hljs-symbol\">/</span>                               <span class=\"hljs-comment\"># Backend principale e API</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; __init__.py\n&#x2502;   &#x251c;&#x2500;&#x2500; main.py                        <span class=\"hljs-comment\"># FastAPI server (web UI + API)</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; analyzer.py                    <span class=\"hljs-comment\"># Analisi di docker&#x2011;compose, sicurezza</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; ansible_generator.py           <span class=\"hljs-comment\"># Generazione playbook con Jinja2</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; ai_integration.py               <span class=\"hljs-comment\"># Interfaccia con Gemini API</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; notifier.py                    <span class=\"hljs-comment\"># Notifiche Telegram / email</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; config.py                      <span class=\"hljs-comment\"># Caricamento configurazioni da .env</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; templates<span class=\"hljs-symbol\">/</span>\n&#x2502;       &#x2514;&#x2500;&#x2500; playbook.yml.j2            <span class=\"hljs-comment\"># Template del playbook Ansible</span>\n&#x251c;&#x2500;&#x2500; cli.py                             <span class=\"hljs-comment\"># Interfaccia a riga di comando</span>\n&#x251c;&#x2500;&#x2500; docs<span class=\"hljs-symbol\">/</span>                              <span class=\"hljs-comment\"># Documentazione in markdown presente</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; index.md\n&#x2502;   &#x251c;&#x2500;&#x2500; installation.md\n&#x2502;   &#x251c;&#x2500;&#x2500; usage.md\n&#x2502;   &#x2514;&#x2500;&#x2500; faq.md\n&#x251c;&#x2500;&#x2500; docs_server<span class=\"hljs-symbol\">/</span>                       <span class=\"hljs-comment\"># Middleware per servire documentazione arricchita</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; app_doc.py                     <span class=\"hljs-comment\"># Serve markdown con frontmatter + TOC on&#x2011;the&#x2011;fly</span>\n&#x251c;&#x2500;&#x2500; preprocess_doc.py                  <span class=\"hljs-comment\"># Script per generare documentazione preprocessata</span>\n&#x251c;&#x2500;&#x2500; mkdocs.yml                         <span class=\"hljs-comment\"># Configurazione MkDocs (usa la versione preprocessata)</span>\n&#x251c;&#x2500;&#x2500; bootstrap.sh                       <span class=\"hljs-comment\"># Script bootstrap (curl | sh)</span>\n&#x251c;&#x2500;&#x2500; Dockerfile                         <span class=\"hljs-comment\"># Immagine container per l&#x2019;app principale + doc</span>\n&#x251c;&#x2500;&#x2500; .env.example                       <span class=\"hljs-comment\"># Variabili ambiente (API key, notifiche, etc.)</span>\n&#x251c;&#x2500;&#x2500; requirements.txt                   <span class=\"hljs-comment\"># Dipendenze Python</span>\n&#x251c;&#x2500;&#x2500; examples<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; sample-docker-compose.yml\n&#x2502;   &#x2514;&#x2500;&#x2500; sample-inventory.json\n&#x251c;&#x2500;&#x2500; .gitignore\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x2514;&#x2500;&#x2500; README.md\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4049,4082"}}],"payload":{"tag":"h2","lines":"4047,4048"}},{"content":"1. <code>README.md</code>","children":[{"content":"Uso CLI","children":[{"content":"<pre data-lines=\"4138,4141\"><code class=\"language-bash\">python cli.py generate --compose path/to/docker-compose.yml --inventory path/to/inventory.json --output playbook.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4138,4141"}}],"payload":{"tag":"h3","lines":"4136,4137"}},{"content":"Web UI / API","children":[{"content":"Avvia FastAPI via <code>uvicorn app.main:app</code> (porta 8000)","children":[],"payload":{"tag":"li","lines":"4144,4145"}},{"content":"Accedi a <code>/docs</code> per l&#x2019;API (Swagger UI)","children":[],"payload":{"tag":"li","lines":"4145,4146"}},{"content":"Endpoint per analisi e generazione playbook","children":[],"payload":{"tag":"li","lines":"4146,4148"}}],"payload":{"tag":"h3","lines":"4142,4143"}},{"content":"Documentazione (Preview On&#x2011;the&#x2011;Fly)","children":[{"content":"<pre data-lines=\"4152,4155\"><code class=\"language-bash\">python docs_server/app_doc.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4152,4155"}}],"payload":{"tag":"h3","lines":"4148,4149"}},{"content":"Documentazione (Build statica)","children":[{"content":"<pre data-lines=\"4162,4167\"><code class=\"language-bash\">python preprocess_doc.py --src docs --dest docs_processed\nmkdocs build\nmkdocs serve\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4162,4167"}}],"payload":{"tag":"h3","lines":"4158,4159"}},{"content":"Deploy Docker","children":[{"content":"<pre data-lines=\"4172,4176\"><code class=\"language-bash\">docker build -t dc2ansible-doc .\ndocker run -d -p 8000:8000 --env-file .<span class=\"hljs-built_in\">env</span> dc2ansible-doc\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4172,4176"}}],"payload":{"tag":"h3","lines":"4170,4171"}},{"content":"Bootstrap automatico","children":[{"content":"<pre data-lines=\"4179,4182\"><code class=\"language-bash\">curl -fsSL https://raw.githubusercontent.com/tuoutente/docker-compose-to-ansible-ai/main/bootstrap.sh | sh\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4179,4182"}}],"payload":{"tag":"h3","lines":"4177,4178"}}],"payload":{"tag":"h2","lines":"4085,4086"}},{"content":"Tecnologie utilizzate","children":[{"content":"Python 3.9+","children":[],"payload":{"tag":"li","lines":"4185,4186"}},{"content":"FastAPI","children":[],"payload":{"tag":"li","lines":"4186,4187"}},{"content":"Click","children":[],"payload":{"tag":"li","lines":"4187,4188"}},{"content":"Jinja2 + PyYAML","children":[],"payload":{"tag":"li","lines":"4188,4189"}},{"content":"HTTPX","children":[],"payload":{"tag":"li","lines":"4189,4190"}},{"content":"Gemini API","children":[],"payload":{"tag":"li","lines":"4190,4191"}},{"content":"Flask (per doc middleware)","children":[],"payload":{"tag":"li","lines":"4191,4192"}},{"content":"MkDocs","children":[],"payload":{"tag":"li","lines":"4192,4193"}},{"content":"Docker","children":[],"payload":{"tag":"li","lines":"4193,4194"}},{"content":"pytest","children":[],"payload":{"tag":"li","lines":"4194,4196"}}],"payload":{"tag":"h2","lines":"4183,4184"}},{"content":"Estensioni possibili","children":[{"content":"Autenticazione per Web UI e doc server","children":[],"payload":{"tag":"li","lines":"4198,4199"}},{"content":"Integrazione CI/CD con generazione doc automatica","children":[],"payload":{"tag":"li","lines":"4199,4200"}},{"content":"Supporto Docusaurus come alternativa","children":[],"payload":{"tag":"li","lines":"4200,4201"}},{"content":"Notifiche su documentazione aggiornata","children":[],"payload":{"tag":"li","lines":"4201,4202"}},{"content":"Plugin MkDocs custom per arricchimento dinamico (frontmatter / TOC)","children":[],"payload":{"tag":"li","lines":"4202,4204"}}],"payload":{"tag":"h2","lines":"4196,4197"}},{"content":"Licenza","children":[{"content":"<code>preprocess_doc.py</code>","children":[{"content":"<pre data-lines=\"4265,4308\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os, argparse, yaml\n<span class=\"hljs-keyword\">import</span> markdown\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_frontmatter</span>(<span class=\"hljs-params\">title: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n    fm = {\n        <span class=\"hljs-string\">&apos;title&apos;</span>: title,\n        <span class=\"hljs-string\">&apos;toc&apos;</span>: <span class=\"hljs-literal\">True</span>\n    }\n    <span class=\"hljs-keyword\">return</span> yaml.dump(fm, default_flow_style=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process_file</span>(<span class=\"hljs-params\">src: <span class=\"hljs-built_in\">str</span>, dest: <span class=\"hljs-built_in\">str</span></span>):\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(src, <span class=\"hljs-string\">&apos;r&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        content = f.read()\n    title = os.path.splitext(os.path.basename(src))[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&apos;_&apos;</span>, <span class=\"hljs-string\">&apos; &apos;</span>).title()\n    front = generate_frontmatter(title)\n    md = markdown.Markdown(extensions=[<span class=\"hljs-string\">&apos;toc&apos;</span>])\n    md.convert(content)\n    toc_tokens = md.toc_tokens\n    toc_md = <span class=\"hljs-string\">&quot;- Indice:\\n&quot;</span>\n    <span class=\"hljs-keyword\">for</span> item <span class=\"hljs-keyword\">in</span> toc_tokens:\n        toc_md += <span class=\"hljs-string\">f&quot;  - [<span class=\"hljs-subst\">{item[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span>](#<span class=\"hljs-subst\">{item[<span class=\"hljs-string\">&apos;id&apos;</span>]}</span>)\\n&quot;</span>\n    result = <span class=\"hljs-string\">f&quot;---\\n<span class=\"hljs-subst\">{front}</span>---\\n\\n<span class=\"hljs-subst\">{toc_md}</span>\\n\\n<span class=\"hljs-subst\">{content}</span>&quot;</span>\n    os.makedirs(os.path.dirname(dest), exist_ok=<span class=\"hljs-literal\">True</span>)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(dest, <span class=\"hljs-string\">&apos;w&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(result)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">recurse</span>(<span class=\"hljs-params\">src_dir: <span class=\"hljs-built_in\">str</span>, dest_dir: <span class=\"hljs-built_in\">str</span></span>):\n    <span class=\"hljs-keyword\">for</span> root, _, files <span class=\"hljs-keyword\">in</span> os.walk(src_dir):\n        <span class=\"hljs-keyword\">for</span> fn <span class=\"hljs-keyword\">in</span> files:\n            <span class=\"hljs-keyword\">if</span> fn.endswith(<span class=\"hljs-string\">&apos;.md&apos;</span>):\n                rel = os.path.relpath(root, src_dir)\n                srcp = os.path.join(root, fn)\n                destp = os.path.join(dest_dir, rel, fn)\n                process_file(srcp, destp)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    parser = argparse.ArgumentParser()\n    parser.add_argument(<span class=\"hljs-string\">&apos;--src&apos;</span>, required=<span class=\"hljs-literal\">True</span>)\n    parser.add_argument(<span class=\"hljs-string\">&apos;--dest&apos;</span>, required=<span class=\"hljs-literal\">True</span>)\n    args = parser.parse_args()\n    recurse(args.src, args.dest)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4265,4308"}}],"payload":{"tag":"h3","lines":"4263,4264"}},{"content":"Modifica <code>mkdocs.yml</code>","children":[{"content":"<pre data-lines=\"4313,4330\"><code class=\"language-yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">Docker</span> <span class=\"hljs-string\">Compose</span> <span class=\"hljs-string\">to</span> <span class=\"hljs-string\">Ansible</span> <span class=\"hljs-string\">+</span> <span class=\"hljs-string\">Doc</span>\n<span class=\"hljs-attr\">docs_dir:</span> <span class=\"hljs-string\">docs_processed</span>\n\n<span class=\"hljs-attr\">nav:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Installazione:</span> <span class=\"hljs-string\">installation.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Uso:</span> <span class=\"hljs-string\">usage.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">FAQ:</span> <span class=\"hljs-string\">faq.md</span>\n\n<span class=\"hljs-attr\">theme:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">mkdocs</span>\n\n<span class=\"hljs-attr\">markdown_extensions:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">toc:</span>\n      <span class=\"hljs-attr\">permalink:</span> <span class=\"hljs-literal\">true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4313,4330"}}],"payload":{"tag":"h3","lines":"4311,4312"}},{"content":"Esempi in <code>docs/</code>","children":[],"payload":{"tag":"h3","lines":"4333,4334"}}],"payload":{"tag":"h2","lines":"4204,4205"}},{"content":"3. Dipendenze aggiuntive (aggiorna <code>requirements.txt</code>)","children":[{"content":"<pre data-lines=\"4341,4346\"><code data-lines=\"4341,4346\"><span class=\"hljs-attribute\">Flask\nmarkdown\nPyYAML</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4341,4346"}}],"payload":{"tag":"h2","lines":"4339,4340"}},{"content":"4. Integrazione nel flusso principale","children":[{"content":"","children":[{"content":"Nel bootstrap, puoi avviare anche il doc server: <code>python docs_server/app_doc.py &amp; uvicorn ...</code>","children":[],"payload":{"tag":"li","lines":"4353,4354"}},{"content":"Nel deploy Docker, includi il middleware docs (o servi anche la doc statica)","children":[],"payload":{"tag":"li","lines":"4354,4355"}},{"content":"Nella pipeline CI/CD, aggiungi uno step: <code>python preprocess_doc.py --src docs --dest docs_processed</code> prima del <code>mkdocs build</code> o upload statica","children":[],"payload":{"tag":"li","lines":"4355,4356"}},{"content":"Puoi aggiungere un endpoint API che restituisce il markdown arricchito per uso client JS, preview, ecc.","children":[],"payload":{"tag":"li","lines":"4356,4358"}}],"payload":{"tag":"ul","lines":"4353,4358"}},{"content":"","children":[{"content":"Il Dockerfile aggiornato che include anche il server di documentazione","children":[],"payload":{"tag":"li","lines":"4362,4363"}},{"content":"Il workflow GitHub Actions aggiornato con build e deploy documentazione","children":[],"payload":{"tag":"li","lines":"4363,4364"}},{"content":"I test per verificare che i markdown vengano arricchiti correttamente","children":[],"payload":{"tag":"li","lines":"4364,4366"}}],"payload":{"tag":"ul","lines":"4362,4366"}}],"payload":{"tag":"h2","lines":"4351,4352"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"4370,4372"}},{"content":"&#x1f4c1; Struttura delle cartelle e file","children":[{"content":"<pre data-lines=\"4382,4417\"><code data-lines=\"4382,4417\">docker-compose-to-ansible-ai<span class=\"hljs-symbol\">/</span>\n&#x251c;&#x2500;&#x2500; app<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; __init__.py\n&#x2502;   &#x251c;&#x2500;&#x2500; config.py\n&#x2502;   &#x251c;&#x2500;&#x2500; analyzer.py\n&#x2502;   &#x251c;&#x2500;&#x2500; ansible_generator.py\n&#x2502;   &#x251c;&#x2500;&#x2500; ai_integration.py\n&#x2502;   &#x251c;&#x2500;&#x2500; notifier.py\n&#x2502;   &#x251c;&#x2500;&#x2500; main.py\n&#x2502;   &#x2514;&#x2500;&#x2500; templates<span class=\"hljs-symbol\">/</span>\n&#x2502;       &#x2514;&#x2500;&#x2500; playbook.yml.j2\n&#x251c;&#x2500;&#x2500; cli.py\n&#x251c;&#x2500;&#x2500; docs<span class=\"hljs-symbol\">/</span>                            <span class=\"hljs-comment\"># Documentazione sorgente in Markdown</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; index.md\n&#x2502;   &#x251c;&#x2500;&#x2500; installation.md\n&#x2502;   &#x251c;&#x2500;&#x2500; usage.md\n&#x2502;   &#x2514;&#x2500;&#x2500; faq.md\n&#x251c;&#x2500;&#x2500; docs_server<span class=\"hljs-symbol\">/</span>                     <span class=\"hljs-comment\"># Middleware per servire documentazione con frontmatter/TOC</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; app_doc.py\n&#x251c;&#x2500;&#x2500; preprocess_doc.py                <span class=\"hljs-comment\"># Script per preprocessing della documentazione</span>\n&#x251c;&#x2500;&#x2500; mkdocs.yml                       <span class=\"hljs-comment\"># Configurazione per build statica della documentazione</span>\n&#x251c;&#x2500;&#x2500; bootstrap.sh                     <span class=\"hljs-comment\"># Script di bootstrap &#x201c;curl | sh&#x201d;</span>\n&#x251c;&#x2500;&#x2500; Dockerfile                       <span class=\"hljs-comment\"># Immagine containerized dell&#x2019;app + doc server</span>\n&#x251c;&#x2500;&#x2500; .env.example\n&#x251c;&#x2500;&#x2500; requirements.txt\n&#x251c;&#x2500;&#x2500; examples<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x251c;&#x2500;&#x2500; sample-docker-compose.yml\n&#x2502;   &#x2514;&#x2500;&#x2500; sample-inventory.json\n&#x251c;&#x2500;&#x2500; scripts<span class=\"hljs-symbol\">/</span>\n&#x2502;   &#x2514;&#x2500;&#x2500; test_playbook_generation.py\n&#x251c;&#x2500;&#x2500; .gitignore\n&#x251c;&#x2500;&#x2500; LICENSE\n&#x2514;&#x2500;&#x2500; README.md\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4382,4417"}}],"payload":{"tag":"h2","lines":"4380,4381"}},{"content":"1. <code>README.md</code>","children":[{"content":"CLI","children":[{"content":"<pre data-lines=\"4472,4478\"><code class=\"language-bash\">python cli.py generate \\\n  --compose path/to/docker-compose.yml \\\n  --inventory path/to/inventory.json \\\n  --output playbook.yml\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4472,4478"}}],"payload":{"tag":"h3","lines":"4470,4471"}},{"content":"Web / API","children":[{"content":"Avvia FastAPI con <code>uvicorn app.main:app</code>","children":[],"payload":{"tag":"li","lines":"4481,4482"}},{"content":"Utilizza i percorsi <code>/analyze</code>, <code>/generate_playbook</code> ecc.","children":[],"payload":{"tag":"li","lines":"4482,4483"}},{"content":"Per la documentazione Markdown arricchita, avvia <code>docs_server/app_doc.py</code> e usa il percorso <code>/docs/&lt;file&gt;.md</code>.","children":[],"payload":{"tag":"li","lines":"4483,4485"}}],"payload":{"tag":"h3","lines":"4479,4480"}},{"content":"Documentazione","children":[{"content":"On-the-fly","children":[{"content":"<pre data-lines=\"4489,4492\"><code class=\"language-bash\">python docs_server/app_doc.py\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4489,4492"}}],"payload":{"tag":"h4","lines":"4487,4488"}},{"content":"Preprocessing per build statica","children":[{"content":"<pre data-lines=\"4497,4502\"><code class=\"language-bash\">python preprocess_doc.py --src docs --dest docs_processed\nmkdocs build\nmkdocs serve\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4497,4502"}}],"payload":{"tag":"h4","lines":"4495,4496"}}],"payload":{"tag":"h3","lines":"4485,4486"}},{"content":"Docker","children":[{"content":"<pre data-lines=\"4507,4511\"><code class=\"language-bash\">docker build -t dc2ansible-doc .\ndocker run -d -p 8000:8000 --env-file .<span class=\"hljs-built_in\">env</span> dc2ansible-doc\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4507,4511"}}],"payload":{"tag":"h3","lines":"4505,4506"}},{"content":"Bootstrap automatico","children":[{"content":"<pre data-lines=\"4514,4517\"><code class=\"language-bash\">curl -fsSL https://raw.githubusercontent.com/tuoutente/docker-compose-to-ansible-ai/main/bootstrap.sh | sh\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4514,4517"}}],"payload":{"tag":"h3","lines":"4512,4513"}}],"payload":{"tag":"h2","lines":"4420,4421"}},{"content":"&#x1f9f0; Tecnologie utilizzate","children":[{"content":"Python 3.9+","children":[],"payload":{"tag":"li","lines":"4520,4521"}},{"content":"FastAPI (Web/API)","children":[],"payload":{"tag":"li","lines":"4521,4522"}},{"content":"Click (CLI)","children":[],"payload":{"tag":"li","lines":"4522,4523"}},{"content":"Jinja2 + PyYAML","children":[],"payload":{"tag":"li","lines":"4523,4524"}},{"content":"HTTPX (cliente API)","children":[],"payload":{"tag":"li","lines":"4524,4525"}},{"content":"Gemini API (integrazione AI)","children":[],"payload":{"tag":"li","lines":"4525,4526"}},{"content":"Flask (middleware per doc server)","children":[],"payload":{"tag":"li","lines":"4526,4527"}},{"content":"Markdown con estensione TOC","children":[],"payload":{"tag":"li","lines":"4527,4528"}},{"content":"MkDocs (esempio di build documentazione)","children":[],"payload":{"tag":"li","lines":"4528,4529"}},{"content":"Docker","children":[],"payload":{"tag":"li","lines":"4529,4530"}},{"content":"python-telegram-bot, smtplib per notifiche","children":[],"payload":{"tag":"li","lines":"4530,4531"}},{"content":"pytest per test","children":[],"payload":{"tag":"li","lines":"4531,4533"}}],"payload":{"tag":"h2","lines":"4518,4519"}},{"content":"&#x1f4e6; Componenti e flusso","children":[{"content":"1. Caricamento file Docker Compose &#x2192; analisi &#x2192; generazione playbook","children":[],"payload":{"tag":"li","lines":"4535,4536","listIndex":1}},{"content":"2. Richiamo AI per suggerimenti e controlli avanzati","children":[],"payload":{"tag":"li","lines":"4536,4537","listIndex":2}},{"content":"3. Notifiche se anomalie significative","children":[],"payload":{"tag":"li","lines":"4537,4538","listIndex":3}},{"content":"4. Documentazione: markdown serviti o preprocessati con frontmatter e TOC","children":[],"payload":{"tag":"li","lines":"4538,4539","listIndex":4}},{"content":"5. Build statico / deployment container","children":[],"payload":{"tag":"li","lines":"4539,4541","listIndex":5}}],"payload":{"tag":"h2","lines":"4533,4534"}},{"content":"&#x2705; Licenza","children":[{"content":"<code>app/analyzer.py</code>","children":[{"content":"<pre data-lines=\"4578,4614\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> yaml\n<span class=\"hljs-keyword\">from</span> typing <span class=\"hljs-keyword\">import</span> <span class=\"hljs-type\">Dict</span>, <span class=\"hljs-type\">Any</span>\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">load_docker_compose</span>(<span class=\"hljs-params\">path: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]:\n    <span class=\"hljs-string\">&quot;&quot;&quot;Carica un file docker-compose.yml come dizionario Python.&quot;&quot;&quot;</span>\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&quot;r&quot;</span>) <span class=\"hljs-keyword\">as</span> f:\n        <span class=\"hljs-keyword\">return</span> yaml.safe_load(f)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">detect_security_issues</span>(<span class=\"hljs-params\">svc_cfg: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]</span>) -&gt; <span class=\"hljs-built_in\">list</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;Ritorna lista di potenziali problemi di sicurezza per un servizio.&quot;&quot;&quot;</span>\n    issues = []\n    ports = svc_cfg.get(<span class=\"hljs-string\">&quot;ports&quot;</span>, [])\n    <span class=\"hljs-keyword\">for</span> p <span class=\"hljs-keyword\">in</span> ports:\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-built_in\">isinstance</span>(p, <span class=\"hljs-built_in\">str</span>) <span class=\"hljs-keyword\">and</span> p.startswith(<span class=\"hljs-string\">&quot;0.0.0.0:&quot;</span>):\n            issues.append(<span class=\"hljs-string\">f&quot;Port <span class=\"hljs-subst\">{p}</span> esposta su tutte le interfacce&quot;</span>)\n    <span class=\"hljs-comment\"># Altri controlli possono essere aggiunti qui</span>\n    <span class=\"hljs-keyword\">return</span> issues\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">analyze_services</span>(<span class=\"hljs-params\">compose_data: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]</span>) -&gt; <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]:\n    <span class=\"hljs-string\">&quot;&quot;&quot;\n    Analizza i servizi definiti in un docker-compose e restituisce\n    struttura con porte, volumi, env e issues.\n    &quot;&quot;&quot;</span>\n    services = compose_data.get(<span class=\"hljs-string\">&quot;services&quot;</span>, {})\n    analysis = {}\n    <span class=\"hljs-keyword\">for</span> name, cfg <span class=\"hljs-keyword\">in</span> services.items():\n        analysis[name] = {\n            <span class=\"hljs-string\">&quot;ports&quot;</span>: cfg.get(<span class=\"hljs-string\">&quot;ports&quot;</span>, []),\n            <span class=\"hljs-string\">&quot;volumes&quot;</span>: cfg.get(<span class=\"hljs-string\">&quot;volumes&quot;</span>, []),\n            <span class=\"hljs-string\">&quot;environment_vars&quot;</span>: cfg.get(<span class=\"hljs-string\">&quot;environment&quot;</span>, {}),\n            <span class=\"hljs-string\">&quot;security_issues&quot;</span>: detect_security_issues(cfg),\n            <span class=\"hljs-string\">&quot;image&quot;</span>: cfg.get(<span class=\"hljs-string\">&quot;image&quot;</span>, <span class=\"hljs-literal\">None</span>)\n        }\n    <span class=\"hljs-keyword\">return</span> analysis\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4578,4614"}}],"payload":{"tag":"h3","lines":"4576,4577"}},{"content":"<code>app/ansible_generator.py</code>","children":[{"content":"<pre data-lines=\"4619,4637\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> jinja2 <span class=\"hljs-keyword\">import</span> Environment, FileSystemLoader\n<span class=\"hljs-keyword\">import</span> os\n<span class=\"hljs-keyword\">from</span> typing <span class=\"hljs-keyword\">import</span> <span class=\"hljs-type\">Dict</span>, <span class=\"hljs-type\">Any</span>\n\nTEMPLATE_DIR = os.path.join(os.path.dirname(__file__), <span class=\"hljs-string\">&quot;templates&quot;</span>)\n\nenv = Environment(\n    loader=FileSystemLoader(TEMPLATE_DIR),\n    trim_blocks=<span class=\"hljs-literal\">True</span>,\n    lstrip_blocks=<span class=\"hljs-literal\">True</span>\n)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_playbook</span>(<span class=\"hljs-params\">analysis: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>], inventory: <span class=\"hljs-type\">Dict</span>[<span class=\"hljs-built_in\">str</span>, <span class=\"hljs-type\">Any</span>]</span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n    <span class=\"hljs-string\">&quot;&quot;&quot;Genera un playbook Ansible in YAML da dati di analisi e inventario.&quot;&quot;&quot;</span>\n    tpl = env.get_template(<span class=\"hljs-string\">&quot;playbook.yml.j2&quot;</span>)\n    <span class=\"hljs-keyword\">return</span> tpl.render(services=analysis, inventory=inventory)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4619,4637"}}],"payload":{"tag":"h3","lines":"4617,4618"}},{"content":"<code>app/ai_integration.py</code>","children":[{"content":"<pre data-lines=\"4642,4660\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> httpx\n<span class=\"hljs-keyword\">from</span> app.config <span class=\"hljs-keyword\">import</span> settings\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">GeminiAI</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self, api_key: <span class=\"hljs-built_in\">str</span> = settings.GEMINI_API_KEY</span>):\n        <span class=\"hljs-variable language_\">self</span>.api_key = api_key\n        <span class=\"hljs-variable language_\">self</span>.endpoint = <span class=\"hljs-string\">&quot;https://api.gemini.ai/v1/generate&quot;</span>  <span class=\"hljs-comment\"># esempio fittizio</span>\n\n    <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">ask</span>(<span class=\"hljs-params\">self, prompt: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n        headers = {<span class=\"hljs-string\">&quot;Authorization&quot;</span>: <span class=\"hljs-string\">f&quot;Bearer <span class=\"hljs-subst\">{self.api_key}</span>&quot;</span>}\n        payload = {<span class=\"hljs-string\">&quot;prompt&quot;</span>: prompt, <span class=\"hljs-string\">&quot;max_tokens&quot;</span>: <span class=\"hljs-number\">300</span>}\n        <span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">with</span> httpx.AsyncClient() <span class=\"hljs-keyword\">as</span> client:\n            resp = <span class=\"hljs-keyword\">await</span> client.post(<span class=\"hljs-variable language_\">self</span>.endpoint, headers=headers, json=payload)\n            resp.raise_for_status()\n            data = resp.json()\n            <span class=\"hljs-keyword\">return</span> data.get(<span class=\"hljs-string\">&quot;text&quot;</span>, <span class=\"hljs-string\">&quot;&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4642,4660"}}],"payload":{"tag":"h3","lines":"4640,4641"}},{"content":"<code>app/notifier.py</code>","children":[{"content":"<pre data-lines=\"4665,4703\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> smtplib\n<span class=\"hljs-keyword\">from</span> email.mime.text <span class=\"hljs-keyword\">import</span> MIMEText\n<span class=\"hljs-keyword\">from</span> app.config <span class=\"hljs-keyword\">import</span> settings\n<span class=\"hljs-keyword\">from</span> telegram <span class=\"hljs-keyword\">import</span> Bot, error <span class=\"hljs-keyword\">as</span> tg_err\n\n<span class=\"hljs-keyword\">class</span> <span class=\"hljs-title class_\">Notifier</span>:\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">__init__</span>(<span class=\"hljs-params\">self</span>):\n        <span class=\"hljs-variable language_\">self</span>.smtp_server = settings.SMTP_SERVER\n        <span class=\"hljs-variable language_\">self</span>.smtp_port = settings.SMTP_PORT\n        <span class=\"hljs-variable language_\">self</span>.smtp_user = settings.SMTP_USERNAME\n        <span class=\"hljs-variable language_\">self</span>.smtp_pass = settings.SMTP_PASSWORD\n        <span class=\"hljs-variable language_\">self</span>.telegram_token = settings.TELEGRAM_BOT_TOKEN\n        <span class=\"hljs-variable language_\">self</span>.telegram_chat_id = settings.TELEGRAM_CHAT_ID\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_email</span>(<span class=\"hljs-params\">self, subject: <span class=\"hljs-built_in\">str</span>, body: <span class=\"hljs-built_in\">str</span>, to_addr: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-literal\">None</span>:\n        msg = MIMEText(body)\n        msg[<span class=\"hljs-string\">&quot;Subject&quot;</span>] = subject\n        msg[<span class=\"hljs-string\">&quot;From&quot;</span>] = <span class=\"hljs-variable language_\">self</span>.smtp_user\n        msg[<span class=\"hljs-string\">&quot;To&quot;</span>] = to_addr\n        <span class=\"hljs-keyword\">try</span>:\n            <span class=\"hljs-keyword\">with</span> smtplib.SMTP(<span class=\"hljs-variable language_\">self</span>.smtp_server, <span class=\"hljs-variable language_\">self</span>.smtp_port) <span class=\"hljs-keyword\">as</span> srv:\n                srv.starttls()\n                srv.login(<span class=\"hljs-variable language_\">self</span>.smtp_user, <span class=\"hljs-variable language_\">self</span>.smtp_pass)\n                srv.send_message(msg)\n        <span class=\"hljs-keyword\">except</span> Exception <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Errore invio email: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n\n    <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">send_telegram</span>(<span class=\"hljs-params\">self, message: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-literal\">None</span>:\n        <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.telegram_token <span class=\"hljs-keyword\">or</span> <span class=\"hljs-keyword\">not</span> <span class=\"hljs-variable language_\">self</span>.telegram_chat_id:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">&quot;Telegram non configurato&quot;</span>)\n            <span class=\"hljs-keyword\">return</span>\n        <span class=\"hljs-keyword\">try</span>:\n            bot = Bot(token=<span class=\"hljs-variable language_\">self</span>.telegram_token)\n            bot.send_message(chat_id=<span class=\"hljs-variable language_\">self</span>.telegram_chat_id, text=message)\n        <span class=\"hljs-keyword\">except</span> tg_err.TelegramError <span class=\"hljs-keyword\">as</span> e:\n            <span class=\"hljs-built_in\">print</span>(<span class=\"hljs-string\">f&quot;Errore Telegram: <span class=\"hljs-subst\">{e}</span>&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4665,4703"}}],"payload":{"tag":"h3","lines":"4663,4664"}},{"content":"<code>app/main.py</code>","children":[{"content":"<pre data-lines=\"4708,4758\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> fastapi <span class=\"hljs-keyword\">import</span> FastAPI, UploadFile, File, HTTPException\n<span class=\"hljs-keyword\">from</span> fastapi.responses <span class=\"hljs-keyword\">import</span> JSONResponse, Response\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n<span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n<span class=\"hljs-keyword\">from</span> app.ai_integration <span class=\"hljs-keyword\">import</span> GeminiAI\n<span class=\"hljs-keyword\">from</span> app.notifier <span class=\"hljs-keyword\">import</span> Notifier\n<span class=\"hljs-keyword\">import</span> json\n\napp = FastAPI()\nai = GeminiAI()\nnotifier = Notifier()\n\n<span class=\"hljs-meta\">@app.post(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/analyze/&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">endpoint_analyze</span>(<span class=\"hljs-params\">file: UploadFile = File(<span class=\"hljs-params\">...</span>)</span>):\n    content = <span class=\"hljs-keyword\">await</span> file.read()\n    <span class=\"hljs-comment\"># carica struttura del docker-compose da file temporaneo</span>\n    <span class=\"hljs-keyword\">try</span>:\n        compose_data = json.loads(content) <span class=\"hljs-keyword\">if</span> <span class=\"hljs-literal\">False</span> <span class=\"hljs-keyword\">else</span> <span class=\"hljs-literal\">None</span>\n        <span class=\"hljs-comment\"># ma preferibile: salvare temporaneamente e usare load_docker_compose</span>\n        <span class=\"hljs-comment\"># semplificazione: assumiamo che file.file sia percorso</span>\n        <span class=\"hljs-keyword\">raise</span> NotImplementedError(<span class=\"hljs-string\">&quot;Parsing diretto da bytes non implementato&quot;</span>)\n    <span class=\"hljs-keyword\">except</span> Exception:\n        <span class=\"hljs-comment\"># fallback: scrivi temporaneamente</span>\n        <span class=\"hljs-keyword\">import</span> tempfile\n        <span class=\"hljs-keyword\">with</span> tempfile.NamedTemporaryFile(delete=<span class=\"hljs-literal\">False</span>, suffix=<span class=\"hljs-string\">&quot;.yml&quot;</span>) <span class=\"hljs-keyword\">as</span> t:\n            t.write(content)\n            temp_path = t.name\n        cd = load_docker_compose(temp_path)\n        analysis = analyze_services(cd)\n    prompt = <span class=\"hljs-string\">f&quot;Analizza configurazioni: <span class=\"hljs-subst\">{json.dumps(analysis)}</span>&quot;</span>\n    ai_suggestions = <span class=\"hljs-keyword\">await</span> ai.ask(prompt)\n    <span class=\"hljs-keyword\">for</span> svc, data <span class=\"hljs-keyword\">in</span> analysis.items():\n        <span class=\"hljs-keyword\">if</span> data[<span class=\"hljs-string\">&quot;security_issues&quot;</span>]:\n            notifier.send_telegram(<span class=\"hljs-string\">f&quot;&#x26a0;&#xfe0f; Issue in <span class=\"hljs-subst\">{svc}</span>: <span class=\"hljs-subst\">{data[<span class=\"hljs-string\">&apos;security_issues&apos;</span>]}</span>&quot;</span>)\n    <span class=\"hljs-keyword\">return</span> JSONResponse({<span class=\"hljs-string\">&quot;analysis&quot;</span>: analysis, <span class=\"hljs-string\">&quot;ai_suggestions&quot;</span>: ai_suggestions})\n\n<span class=\"hljs-meta\">@app.post(<span class=\"hljs-params\"><span class=\"hljs-string\">&quot;/generate_playbook/&quot;</span></span>)</span>\n<span class=\"hljs-keyword\">async</span> <span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">endpoint_generate</span>(<span class=\"hljs-params\">file: UploadFile = File(<span class=\"hljs-params\">...</span>), inventory: UploadFile = File(<span class=\"hljs-params\">...</span>)</span>):\n    content = <span class=\"hljs-keyword\">await</span> file.read()\n    <span class=\"hljs-comment\"># simile logica per caricare compose_data e inventory_data</span>\n    <span class=\"hljs-keyword\">import</span> tempfile, json\n    <span class=\"hljs-keyword\">with</span> tempfile.NamedTemporaryFile(delete=<span class=\"hljs-literal\">False</span>, suffix=<span class=\"hljs-string\">&quot;.yml&quot;</span>) <span class=\"hljs-keyword\">as</span> t:\n        t.write(content); comp_path = t.name\n    cd = load_docker_compose(comp_path)\n    inv = json.load(inventory.file)\n    analysis = analyze_services(cd)\n    playbook = generate_playbook(analysis, inv)\n    <span class=\"hljs-keyword\">return</span> Response(playbook, media_type=<span class=\"hljs-string\">&quot;text/yaml&quot;</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4708,4758"}}],"payload":{"tag":"h3","lines":"4706,4707"}},{"content":"<code>app/templates/playbook.yml.j2</code>","children":[{"content":"<pre data-lines=\"4763,4795\"><code class=\"language-jinja\"><span class=\"language-xml\">---\n- hosts: all\n  become: yes\n  tasks:\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">for</span></span> svc, data <span class=\"hljs-keyword\">in</span> services.items() %}</span><span class=\"language-xml\">\n  - name: Deploy </span><span class=\"hljs-template-variable\">{{ svc }}</span><span class=\"language-xml\">\n    docker_container:\n      name: &quot;</span><span class=\"hljs-template-variable\">{{ svc }}</span><span class=\"language-xml\">&quot;\n      image: &quot;</span><span class=\"hljs-template-variable\">{{ data.image or &apos;latest&apos; }}</span><span class=\"language-xml\">&quot;\n      state: started\n      restart_policy: unless-stopped\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span> data.ports %}</span><span class=\"language-xml\">\n      published_ports:\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">for</span></span> p <span class=\"hljs-keyword\">in</span> data.ports %}</span><span class=\"language-xml\">\n        - &quot;</span><span class=\"hljs-template-variable\">{{ p }}</span><span class=\"language-xml\">&quot;\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endfor</span></span> %}</span><span class=\"language-xml\">\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span> %}</span><span class=\"language-xml\">\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span> data.volumes %}</span><span class=\"language-xml\">\n      volumes:\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">for</span></span> v <span class=\"hljs-keyword\">in</span> data.volumes %}</span><span class=\"language-xml\">\n        - &quot;</span><span class=\"hljs-template-variable\">{{ v }}</span><span class=\"language-xml\">&quot;\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endfor</span></span> %}</span><span class=\"language-xml\">\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span> %}</span><span class=\"language-xml\">\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">if</span></span> data.environment_vars %}</span><span class=\"language-xml\">\n      env:\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">for</span></span> k, v <span class=\"hljs-keyword\">in</span> data.environment_vars.items() %}</span><span class=\"language-xml\">\n        </span><span class=\"hljs-template-variable\">{{ k }}</span><span class=\"language-xml\">: &quot;</span><span class=\"hljs-template-variable\">{{ v }}</span><span class=\"language-xml\">&quot;\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endfor</span></span> %}</span><span class=\"language-xml\">\n      </span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endif</span></span> %}</span><span class=\"language-xml\">\n</span><span class=\"hljs-template-tag\">{% <span class=\"hljs-name\"><span class=\"hljs-name\">endfor</span></span> %}</span><span class=\"language-xml\">\n</span></code></pre>","children":[],"payload":{"tag":"pre","lines":"4763,4795"}}],"payload":{"tag":"h3","lines":"4761,4762"}},{"content":"<code>cli.py</code>","children":[{"content":"<pre data-lines=\"4800,4828\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> click\n<span class=\"hljs-keyword\">import</span> json\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n<span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n<span class=\"hljs-keyword\">from</span> app.notifier <span class=\"hljs-keyword\">import</span> Notifier\n\n<span class=\"hljs-meta\">@click.group()</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">cli</span>():\n    <span class=\"hljs-keyword\">pass</span>\n\n<span class=\"hljs-meta\">@cli.command()</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;--compose&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Percorso al docker-compose.yml&apos;</span></span>)</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;--inventory&apos;</span>, required=<span class=\"hljs-literal\">True</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;Percorso file inventario JSON&apos;</span></span>)</span>\n<span class=\"hljs-meta\">@click.option(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;--output&apos;</span>, default=<span class=\"hljs-string\">&apos;playbook.yml&apos;</span>, <span class=\"hljs-built_in\">help</span>=<span class=\"hljs-string\">&apos;File di output YAML&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate</span>(<span class=\"hljs-params\">compose, inventory, output</span>):\n    cd = load_docker_compose(compose)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(inventory, <span class=\"hljs-string\">&apos;r&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        inv = json.load(f)\n    analysis = analyze_services(cd)\n    pb = generate_playbook(analysis, inv)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(output, <span class=\"hljs-string\">&apos;w&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n        f.write(pb)\n    click.echo(<span class=\"hljs-string\">f&quot;&#x2705; Playbook generato: <span class=\"hljs-subst\">{output}</span>&quot;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&quot;__main__&quot;</span>:\n    cli()\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4800,4828"}}],"payload":{"tag":"h3","lines":"4798,4799"}},{"content":"<code>docs_server/app_doc.py</code>","children":[{"content":"<pre data-lines=\"4833,4875\"><code class=\"language-python\"><span class=\"hljs-keyword\">from</span> flask <span class=\"hljs-keyword\">import</span> Flask, abort, Response\n<span class=\"hljs-keyword\">import</span> os, yaml\n<span class=\"hljs-keyword\">import</span> markdown\n\napp = Flask(__name__)\nDOCS_SRC = os.path.join(os.path.dirname(__file__), <span class=\"hljs-string\">&apos;..&apos;</span>, <span class=\"hljs-string\">&apos;docs&apos;</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_frontmatter</span>(<span class=\"hljs-params\">title: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n    fm = {\n        <span class=\"hljs-string\">&apos;title&apos;</span>: title,\n        <span class=\"hljs-string\">&apos;toc&apos;</span>: <span class=\"hljs-literal\">True</span>\n    }\n    <span class=\"hljs-keyword\">return</span> yaml.dump(fm, default_flow_style=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">add_frontmatter_and_toc</span>(<span class=\"hljs-params\">path: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> os.path.isfile(path):\n        <span class=\"hljs-keyword\">return</span> <span class=\"hljs-literal\">None</span>\n    content = <span class=\"hljs-built_in\">open</span>(path, <span class=\"hljs-string\">&apos;r&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>).read()\n    title = os.path.splitext(os.path.basename(path))[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&apos;_&apos;</span>, <span class=\"hljs-string\">&apos; &apos;</span>).title()\n    ft = generate_frontmatter(title)\n    md = markdown.Markdown(extensions=[<span class=\"hljs-string\">&apos;toc&apos;</span>])\n    md.convert(content)\n    toc_tokens = md.toc_tokens\n    toc_md = <span class=\"hljs-string\">&quot;- Indice:\\n&quot;</span>\n    <span class=\"hljs-keyword\">for</span> it <span class=\"hljs-keyword\">in</span> toc_tokens:\n        toc_md += <span class=\"hljs-string\">f&quot;  - [<span class=\"hljs-subst\">{it[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span>](#<span class=\"hljs-subst\">{it[<span class=\"hljs-string\">&apos;id&apos;</span>]}</span>)\\n&quot;</span>\n    <span class=\"hljs-keyword\">return</span> <span class=\"hljs-string\">f&quot;---\\n<span class=\"hljs-subst\">{ft}</span>---\\n\\n<span class=\"hljs-subst\">{toc_md}</span>\\n\\n<span class=\"hljs-subst\">{content}</span>&quot;</span>\n\n<span class=\"hljs-meta\">@app.route(<span class=\"hljs-params\"><span class=\"hljs-string\">&apos;/&lt;path:fname&gt;&apos;</span></span>)</span>\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">serve</span>(<span class=\"hljs-params\">fname</span>):\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> fname.endswith(<span class=\"hljs-string\">&apos;.md&apos;</span>):\n        abort(<span class=\"hljs-number\">404</span>)\n    path = os.path.join(DOCS_SRC, fname)\n    out = add_frontmatter_and_toc(path)\n    <span class=\"hljs-keyword\">if</span> <span class=\"hljs-keyword\">not</span> out:\n        abort(<span class=\"hljs-number\">404</span>)\n    <span class=\"hljs-keyword\">return</span> Response(out, mimetype=<span class=\"hljs-string\">&apos;text/markdown&apos;</span>)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    app.run(port=<span class=\"hljs-number\">5001</span>)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4833,4875"}}],"payload":{"tag":"h3","lines":"4831,4832"}},{"content":"<code>preprocess_doc.py</code>","children":[{"content":"<pre data-lines=\"4880,4919\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> os, argparse, yaml\n<span class=\"hljs-keyword\">import</span> markdown\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">generate_frontmatter</span>(<span class=\"hljs-params\">title: <span class=\"hljs-built_in\">str</span></span>) -&gt; <span class=\"hljs-built_in\">str</span>:\n    fm = {\n        <span class=\"hljs-string\">&apos;title&apos;</span>: title,\n        <span class=\"hljs-string\">&apos;toc&apos;</span>: <span class=\"hljs-literal\">True</span>\n    }\n    <span class=\"hljs-keyword\">return</span> yaml.dump(fm, default_flow_style=<span class=\"hljs-literal\">False</span>)\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">process</span>(<span class=\"hljs-params\">src: <span class=\"hljs-built_in\">str</span>, dst: <span class=\"hljs-built_in\">str</span></span>):\n    <span class=\"hljs-keyword\">for</span> root, _, files <span class=\"hljs-keyword\">in</span> os.walk(src):\n        <span class=\"hljs-keyword\">for</span> fn <span class=\"hljs-keyword\">in</span> files:\n            <span class=\"hljs-keyword\">if</span> fn.endswith(<span class=\"hljs-string\">&apos;.md&apos;</span>):\n                sp = os.path.join(root, fn)\n                rel = os.path.relpath(sp, src)\n                dp = os.path.join(dst, rel)\n                os.makedirs(os.path.dirname(dp), exist_ok=<span class=\"hljs-literal\">True</span>)\n                content = <span class=\"hljs-built_in\">open</span>(sp, <span class=\"hljs-string\">&apos;r&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>).read()\n                title = os.path.splitext(fn)[<span class=\"hljs-number\">0</span>].replace(<span class=\"hljs-string\">&apos;_&apos;</span>, <span class=\"hljs-string\">&apos; &apos;</span>).title()\n                ft = generate_frontmatter(title)\n                md = markdown.Markdown(extensions=[<span class=\"hljs-string\">&apos;toc&apos;</span>])\n                md.convert(content)\n                tokens = md.toc_tokens\n                toc_md = <span class=\"hljs-string\">&quot;- Indice:\\n&quot;</span>\n                <span class=\"hljs-keyword\">for</span> it <span class=\"hljs-keyword\">in</span> tokens:\n                    toc_md += <span class=\"hljs-string\">f&quot;  - [<span class=\"hljs-subst\">{it[<span class=\"hljs-string\">&apos;name&apos;</span>]}</span>](#<span class=\"hljs-subst\">{it[<span class=\"hljs-string\">&apos;id&apos;</span>]}</span>)\\n&quot;</span>\n                out = <span class=\"hljs-string\">f&quot;---\\n<span class=\"hljs-subst\">{ft}</span>---\\n\\n<span class=\"hljs-subst\">{toc_md}</span>\\n\\n<span class=\"hljs-subst\">{content}</span>&quot;</span>\n                <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(dp, <span class=\"hljs-string\">&apos;w&apos;</span>, encoding=<span class=\"hljs-string\">&apos;utf-8&apos;</span>) <span class=\"hljs-keyword\">as</span> f:\n                    f.write(out)\n\n<span class=\"hljs-keyword\">if</span> __name__ == <span class=\"hljs-string\">&apos;__main__&apos;</span>:\n    p = argparse.ArgumentParser()\n    p.add_argument(<span class=\"hljs-string\">&apos;--src&apos;</span>, required=<span class=\"hljs-literal\">True</span>)\n    p.add_argument(<span class=\"hljs-string\">&apos;--dest&apos;</span>, required=<span class=\"hljs-literal\">True</span>)\n    args = p.parse_args()\n    process(args.src, args.dest)\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4880,4919"}}],"payload":{"tag":"h3","lines":"4878,4879"}},{"content":"<code>mkdocs.yml</code>","children":[{"content":"<pre data-lines=\"4924,4941\"><code class=\"language-yaml\"><span class=\"hljs-attr\">site_name:</span> <span class=\"hljs-string\">Docker</span> <span class=\"hljs-string\">Compose</span> <span class=\"hljs-string\">to</span> <span class=\"hljs-string\">Ansible</span> <span class=\"hljs-string\">+</span> <span class=\"hljs-string\">Doc</span>\n<span class=\"hljs-attr\">docs_dir:</span> <span class=\"hljs-string\">docs_processed</span>\n\n<span class=\"hljs-attr\">nav:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Home:</span> <span class=\"hljs-string\">index.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Installazione:</span> <span class=\"hljs-string\">installation.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">Uso:</span> <span class=\"hljs-string\">usage.md</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">FAQ:</span> <span class=\"hljs-string\">faq.md</span>\n\n<span class=\"hljs-attr\">theme:</span>\n  <span class=\"hljs-attr\">name:</span> <span class=\"hljs-string\">mkdocs</span>\n\n<span class=\"hljs-attr\">markdown_extensions:</span>\n  <span class=\"hljs-bullet\">-</span> <span class=\"hljs-attr\">toc:</span>\n      <span class=\"hljs-attr\">permalink:</span> <span class=\"hljs-literal\">true</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4924,4941"}}],"payload":{"tag":"h3","lines":"4922,4923"}}],"payload":{"tag":"h2","lines":"4541,4542"}},{"content":"3. File ausiliari","children":[{"content":"<code>bootstrap.sh</code>","children":[{"content":"<pre data-lines=\"4948,4967\"><code class=\"language-bash\"><span class=\"hljs-meta\">#!/bin/bash</span>\n<span class=\"hljs-built_in\">set</span> -e\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Creazione venv...&quot;</span>\npython3 -m venv .venv\n<span class=\"hljs-built_in\">source</span> .venv/bin/activate\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Installazione dipendenze...&quot;</span>\npip install -r requirements.txt\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Configura .env...&quot;</span>\n<span class=\"hljs-built_in\">cp</span> .env.example .<span class=\"hljs-built_in\">env</span>\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Modifica .env con le tue credenziali e API key Gemini&quot;</span>\n\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Avvio server FastAPI...&quot;</span>\nuvicorn app.main:app --host 0.0.0.0 --port 8000 &amp;\n<span class=\"hljs-built_in\">echo</span> <span class=\"hljs-string\">&quot;Avvio doc server Flask per markdown...&quot;</span>\npython docs_server/app_doc.py &amp;\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4948,4967"}}],"payload":{"tag":"h3","lines":"4946,4947"}},{"content":"<code>Dockerfile</code>","children":[{"content":"<pre data-lines=\"4972,4994\"><code class=\"language-dockerfile\"><span class=\"hljs-keyword\">FROM</span> python:<span class=\"hljs-number\">3.10</span>-slim\n\n<span class=\"hljs-keyword\">WORKDIR</span><span class=\"language-bash\"> /app</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> requirements.txt .</span>\n<span class=\"hljs-keyword\">RUN</span><span class=\"language-bash\"> pip install --no-cache-dir -r requirements.txt</span>\n\n<span class=\"hljs-keyword\">COPY</span><span class=\"language-bash\"> . .</span>\n\n<span class=\"hljs-keyword\">ENV</span> GEMINI_API_KEY=your_api_key\n<span class=\"hljs-keyword\">ENV</span> TELEGRAM_BOT_TOKEN=token\n<span class=\"hljs-keyword\">ENV</span> TELEGRAM_CHAT_ID=chat_id\n<span class=\"hljs-keyword\">ENV</span> SMTP_SERVER=smtp.example.com\n<span class=\"hljs-keyword\">ENV</span> SMTP_PORT=<span class=\"hljs-number\">587</span>\n<span class=\"hljs-keyword\">ENV</span> SMTP_USERNAME=<span class=\"hljs-keyword\">user</span>\n<span class=\"hljs-keyword\">ENV</span> SMTP_PASSWORD=password\n\n<span class=\"hljs-keyword\">EXPOSE</span> <span class=\"hljs-number\">8000</span> <span class=\"hljs-number\">5001</span>\n\n<span class=\"hljs-keyword\">CMD</span><span class=\"language-bash\"> [<span class=\"hljs-string\">&quot;sh&quot;</span>, <span class=\"hljs-string\">&quot;-c&quot;</span>, <span class=\"hljs-string\">&quot;uvicorn app.main:app --host 0.0.0.0 --port 8000 &amp; python docs_server/app_doc.py&quot;</span>]</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4972,4994"}}],"payload":{"tag":"h3","lines":"4970,4971"}},{"content":"<code>.env.example</code>","children":[{"content":"<pre data-lines=\"4999,5009\"><code class=\"language-env\">GEMINI_API_KEY=your_gemini_api_key\nTELEGRAM_BOT_TOKEN=\nTELEGRAM_CHAT_ID=\nSMTP_SERVER=\nSMTP_PORT=587\nSMTP_USERNAME=\nSMTP_PASSWORD=\nNOTIFY_LEVEL=HIGH\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"4999,5009"}}],"payload":{"tag":"h3","lines":"4997,4998"}},{"content":"<code>requirements.txt</code>","children":[{"content":"<pre data-lines=\"5014,5027\"><code data-lines=\"5014,5027\">fastapi\nuvicorn\npyyaml\n<span class=\"hljs-keyword\">jinja2\n</span>httpx\nclick\npython-telegram-<span class=\"hljs-keyword\">bot\n</span>flask\nmarkdown\npydantic\npytest\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5014,5027"}}],"payload":{"tag":"h3","lines":"5012,5013"}},{"content":"<code>examples/sample-docker-compose.yml</code>","children":[{"content":"<pre data-lines=\"5032,5042\"><code class=\"language-yaml\"><span class=\"hljs-attr\">version:</span> <span class=\"hljs-string\">&apos;3.8&apos;</span>\n<span class=\"hljs-attr\">services:</span>\n  <span class=\"hljs-attr\">web:</span>\n    <span class=\"hljs-attr\">image:</span> <span class=\"hljs-string\">nginx:latest</span>\n    <span class=\"hljs-attr\">ports:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">&quot;80:80&quot;</span>\n    <span class=\"hljs-attr\">volumes:</span>\n      <span class=\"hljs-bullet\">-</span> <span class=\"hljs-string\">./html:/usr/share/nginx/html</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5032,5042"}}],"payload":{"tag":"h3","lines":"5030,5031"}},{"content":"<code>examples/sample-inventory.json</code>","children":[{"content":"<pre data-lines=\"5047,5057\"><code class=\"language-json\"><span class=\"hljs-punctuation\">{</span>\n  <span class=\"hljs-attr\">&quot;all&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n    <span class=\"hljs-attr\">&quot;hosts&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">[</span><span class=\"hljs-string\">&quot;192.168.1.10&quot;</span><span class=\"hljs-punctuation\">]</span><span class=\"hljs-punctuation\">,</span>\n    <span class=\"hljs-attr\">&quot;vars&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-punctuation\">{</span>\n      <span class=\"hljs-attr\">&quot;ansible_user&quot;</span><span class=\"hljs-punctuation\">:</span> <span class=\"hljs-string\">&quot;ubuntu&quot;</span>\n    <span class=\"hljs-punctuation\">}</span>\n  <span class=\"hljs-punctuation\">}</span>\n<span class=\"hljs-punctuation\">}</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5047,5057"}}],"payload":{"tag":"h3","lines":"5045,5046"}},{"content":"<code>scripts/test_playbook_generation.py</code>","children":[{"content":"<pre data-lines=\"5062,5079\"><code class=\"language-python\"><span class=\"hljs-keyword\">import</span> pytest\n<span class=\"hljs-keyword\">from</span> app.analyzer <span class=\"hljs-keyword\">import</span> load_docker_compose, analyze_services\n<span class=\"hljs-keyword\">from</span> app.ansible_generator <span class=\"hljs-keyword\">import</span> generate_playbook\n<span class=\"hljs-keyword\">import</span> json\n\n<span class=\"hljs-keyword\">def</span> <span class=\"hljs-title function_\">test_playbook_generation</span>():\n    compose = <span class=\"hljs-string\">&quot;examples/sample-docker-compose.yml&quot;</span>\n    inv = <span class=\"hljs-string\">&quot;examples/sample-inventory.json&quot;</span>\n    cd = load_docker_compose(compose)\n    <span class=\"hljs-keyword\">with</span> <span class=\"hljs-built_in\">open</span>(inv) <span class=\"hljs-keyword\">as</span> f:\n        invd = json.load(f)\n    analysis = analyze_services(cd)\n    pb = generate_playbook(analysis, invd)\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-string\">&quot;docker_container&quot;</span> <span class=\"hljs-keyword\">in</span> pb\n    <span class=\"hljs-keyword\">assert</span> <span class=\"hljs-string\">&quot;web&quot;</span> <span class=\"hljs-keyword\">in</span> pb\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5062,5079"}}],"payload":{"tag":"h3","lines":"5060,5061"}}],"payload":{"tag":"h2","lines":"4944,4945"}},{"content":"4. <code>.gitignore</code>","children":[{"content":"<pre data-lines=\"5084,5092\"><code data-lines=\"5084,5092\"><span class=\"hljs-string\">.venv/</span>\n__pycache__/\ndocs_processed/\n*<span class=\"hljs-string\">.pyc</span>\n<span class=\"hljs-string\">.env</span>\n*<span class=\"hljs-string\">.log</span>\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5084,5092"}}],"payload":{"tag":"h2","lines":"5082,5083"}},{"content":"5. <code>LICENSE</code> (MIT)","children":[{"content":"<pre data-lines=\"5097,5120\"><code class=\"language-text\">MIT License\n\nCopyright (c) 2025 Your Name\n\nPermission is hereby granted, free of charge, to any person obtaining a copy\nof this software and associated documentation files (the &#x201c;Software&#x201d;), to deal\nin the Software without restriction, including without limitation the rights\nto use, copy, modify, merge, publish, distribute, sublicense, and/or sell\ncopies of the Software, and to permit persons to whom the Software is\nfurnished to do so, subject to the following conditions:\n\nThe above copyright notice and this permission notice shall be included in all\ncopies or substantial portions of the Software.\n\nTHE SOFTWARE IS PROVIDED &#x201c;AS IS&#x201d;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\nIMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\nFITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\nAUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\nLIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\nOUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE\nSOFTWARE.\n</code></pre>","children":[],"payload":{"tag":"pre","lines":"5097,5120"}}],"payload":{"tag":"h2","lines":"5095,5096"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5129,5131"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5135,5137"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5141,5143"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5147,5149"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5153,5155"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5159,5161"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5165,5167"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5171,5173"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5177,5179"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5183,5185"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5189,5191"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5195,5197"}},{"content":"///","children":[],"payload":{"tag":"h2","lines":"5200,5202"}}],"payload":{"tag":"h1","lines":"3632,3633"}}]},null)</script>
</body>
</html>
